import{s as Ot,f as u,g as d,h as v,d as c,j as s,i as X,r,u as Y,C as Zt,X as Ba,z as De,A as xe,p as Bt,Y as Ft,P as $t,w as Lt,o as _l,l as C,a as x,m as H,c as I,R as Be,Q as _e,O as Il,n as F,v as mt,T as xa,U as ml,V as Rt,W as ra,e as gl,K as Tl,M as Aa}from"../chunks/scheduler.4a29073b.js";import{S as Yt,i as Kt,f as qt,b as Xe,d as $e,m as et,a as ge,t as Ee,e as tt,g as Wt,c as Xt}from"../chunks/index.10afcf02.js";import{g as Ca}from"../chunks/globals.7f7f1b26.js";import{e as Gt}from"../chunks/each.8348a957.js";import{a as Se}from"../chunks/Toaster.svelte_svelte_type_style_lang.622c7c00.js";import{f as Ha}from"../chunks/FileSaver.min.898eb36f.js";import{k as el,l as We,m as Oa,S as Ia,n as Ta,W as ja}from"../chunks/index.3cc0610f.js";import{g as Na,b as Ua,s as Pa,c as za,d as Ra,e as Za,r as Fa,f as qa,u as Va,A as Ga}from"../chunks/AddFilesPlaceholder.775c4cd0.js";import{t as Ma}from"../chunks/index.1bdba4f5.js";import"../chunks/dayjs.min.37c5e69a.js";import{M as Vl}from"../chunks/Modal.c844fe34.js";import{T as Sa}from"../chunks/Tags.ec6643e7.js";const xl=async(l,e,t,a,i,n=null)=>{let o=null;const h=await fetch(`${el}/documents/create`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({collection_name:e,filename:t,name:a,title:i,...n?{content:JSON.stringify(n)}:{}})}).then(async p=>{if(!p.ok)throw await p.json();return p.json()}).catch(p=>(o=p.detail,console.log(p),null));if(o)throw o;return h},pt=async(l="")=>{let e=null;const t=await fetch(`${el}/documents/`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async a=>{if(!a.ok)throw await a.json();return a.json()}).then(a=>a).catch(a=>(e=a.detail,console.log(a),null));if(e)throw e;return t},Ya=async(l,e,t)=>{let a=null;const i=await fetch(`${el}/documents/name/${e}/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({name:t.name,title:t.title})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(a=n.detail,console.log(n),null));if(a)throw a;return i},sa=async(l,e,t)=>{let a=null;const i=await fetch(`${el}/documents/name/${e}/tags`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`},body:JSON.stringify({name:t.name,tags:t.tags})}).then(async n=>{if(!n.ok)throw await n.json();return n.json()}).then(n=>n).catch(n=>(a=n.detail,console.log(n),null));if(a)throw a;return i},na=async(l,e)=>{let t=null;const a=await fetch(`${el}/documents/name/${e}/delete`,{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",authorization:`Bearer ${l}`}}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).then(i=>i).catch(i=>(t=i.detail,console.log(i),null));if(t)throw t;return a};function Ka(l){let e,t;return{c(){e=De("svg"),t=De("path"),this.h()},l(a){e=xe(a,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var i=v(e);t=xe(i,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(t).forEach(c),i.forEach(c),this.h()},h(){s(t,"stroke","currentColor"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","3"),s(t,"d","M5 12h14"),s(e,"class","w-3 h-3.5 text-gray-800 dark:text-white"),s(e,"aria-hidden","true"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(a,i){X(a,e,i),r(e,t)},d(a){a&&c(e)}}}function Qa(l){let e,t;return{c(){e=De("svg"),t=De("path"),this.h()},l(a){e=xe(a,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,fill:!0,viewBox:!0});var i=v(e);t=xe(i,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),v(t).forEach(c),i.forEach(c),this.h()},h(){s(t,"stroke","currentColor"),s(t,"stroke-linecap","round"),s(t,"stroke-linejoin","round"),s(t,"stroke-width","3"),s(t,"d","m5 12 4.7 4.5 9.3-9"),s(e,"class","w-3.5 h-3.5"),s(e,"aria-hidden","true"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"fill","none"),s(e,"viewBox","0 0 24 24")},m(a,i){X(a,e,i),r(e,t)},d(a){a&&c(e)}}}function Ja(l){let e,t,a,i,n;function o(_,f){if(_[2]==="checked")return Qa;if(_[1])return Ka}let h=o(l),p=h&&h(l);return{c(){e=u("button"),t=u("div"),p&&p.c(),this.h()},l(_){e=d(_,"BUTTON",{class:!0});var f=v(e);t=d(f,"DIV",{class:!0});var m=v(t);p&&p.l(m),m.forEach(c),f.forEach(c),this.h()},h(){s(t,"class","top-0 left-0 absolute w-full flex justify-center"),s(e,"class",a="outline -outline-offset-1 outline-[1.5px] outline-gray-200 dark:outline-gray-600 "+(l[0]!=="unchecked"?"bg-black outline-black ":"hover:outline-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800")+" text-white transition-all rounded inline-block w-3.5 h-3.5 relative")},m(_,f){X(_,e,f),r(e,t),p&&p.m(t,null),i||(n=Y(e,"click",l[4]),i=!0)},p(_,[f]){h!==(h=o(_))&&(p&&p.d(1),p=h&&h(_),p&&(p.c(),p.m(t,null))),f&1&&a!==(a="outline -outline-offset-1 outline-[1.5px] outline-gray-200 dark:outline-gray-600 "+(_[0]!=="unchecked"?"bg-black outline-black ":"hover:outline-gray-500 hover:bg-gray-50 dark:hover:bg-gray-800")+" text-white transition-all rounded inline-block w-3.5 h-3.5 relative")&&s(e,"class",a)},i:Zt,o:Zt,d(_){_&&c(e),p&&p.d(),i=!1,n()}}}function Wa(l,e,t){const a=Ba();let{state:i="unchecked"}=e,{indeterminate:n=!1}=e,o="unchecked";const h=()=>{o==="unchecked"?(t(2,o="checked"),a("change",o)):o==="checked"?(t(2,o="unchecked"),n||a("change",o)):n&&(t(2,o="checked"),a("change",o))};return l.$$set=p=>{"state"in p&&t(0,i=p.state),"indeterminate"in p&&t(1,n=p.indeterminate)},l.$$.update=()=>{l.$$.dirty&1&&t(2,o=i)},[i,n,o,a,h]}class La extends Yt{constructor(e){super(),Kt(this,e,Wa,Ja,Ot,{state:0,indeterminate:1})}}function Xa(l){let e,t,a,i=l[3].t("Edit Doc")+"",n,o,h,p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,f,m,w,k,b,y,E,D,V=l[3].t("Name Tag")+"",T,A,L,U,P="#",z,re,$,M,R,Z=l[3].t("Title")+"",K,he,ee,te,de,q,ie,ae=l[3].t("Tags")+"",le,J,g,B,W,se,j=l[3].t("Save")+"",ve,ne,pe,be;return g=new Sa({props:{tags:l[1],addTag:l[6],deleteTag:l[7]}}),{c(){e=u("div"),t=u("div"),a=u("div"),n=C(i),o=x(),h=u("button"),h.innerHTML=p,_=x(),f=u("hr"),m=x(),w=u("div"),k=u("div"),b=u("form"),y=u("div"),E=u("div"),D=u("div"),T=C(V),A=x(),L=u("div"),U=u("div"),U.textContent=P,z=x(),re=u("input"),$=x(),M=u("div"),R=u("div"),K=C(Z),he=x(),ee=u("div"),te=u("input"),de=x(),q=u("div"),ie=u("div"),le=C(ae),J=x(),Xe(g.$$.fragment),B=x(),W=u("div"),se=u("button"),ve=C(j),this.h()},l(N){e=d(N,"DIV",{});var oe=v(e);t=d(oe,"DIV",{class:!0});var Ve=v(t);a=d(Ve,"DIV",{class:!0});var Ge=v(a);n=H(Ge,i),Ge.forEach(c),o=I(Ve),h=d(Ve,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(h)!=="svelte-745w2y"&&(h.innerHTML=p),Ve.forEach(c),_=I(oe),f=d(oe,"HR",{class:!0}),m=I(oe),w=d(oe,"DIV",{class:!0});var we=v(w);k=d(we,"DIV",{class:!0});var Te=v(k);b=d(Te,"FORM",{class:!0});var Ze=v(b);y=d(Ze,"DIV",{class:!0});var Ie=v(y);E=d(Ie,"DIV",{class:!0});var Pe=v(E);D=d(Pe,"DIV",{class:!0});var Ae=v(D);T=H(Ae,V),Ae.forEach(c),A=I(Pe),L=d(Pe,"DIV",{class:!0});var Le=v(L);U=d(Le,"DIV",{class:!0,"data-svelte-h":!0}),Be(U)!=="svelte-9ujxug"&&(U.textContent=P),z=I(Le),re=d(Le,"INPUT",{class:!0,type:!0,autocomplete:!0}),Le.forEach(c),Pe.forEach(c),$=I(Ie),M=d(Ie,"DIV",{class:!0});var ze=v(M);R=d(ze,"DIV",{class:!0});var Oe=v(R);K=H(Oe,Z),Oe.forEach(c),he=I(ze),ee=d(ze,"DIV",{class:!0});var it=v(ee);te=d(it,"INPUT",{class:!0,type:!0,autocomplete:!0}),it.forEach(c),ze.forEach(c),de=I(Ie),q=d(Ie,"DIV",{class:!0});var Ke=v(q);ie=d(Ke,"DIV",{class:!0});var Me=v(ie);le=H(Me,ae),Me.forEach(c),J=I(Ke),$e(g.$$.fragment,Ke),Ke.forEach(c),Ie.forEach(c),B=I(Ze),W=d(Ze,"DIV",{class:!0});var ke=v(W);se=d(ke,"BUTTON",{class:!0,type:!0});var Ye=v(se);ve=H(Ye,j),Ye.forEach(c),ke.forEach(c),Ze.forEach(c),Te.forEach(c),we.forEach(c),oe.forEach(c),this.h()},h(){s(a,"class","text-lg font-medium self-center"),s(h,"class","self-center"),s(t,"class","flex justify-between dark:text-gray-300 px-5 py-4"),s(f,"class","dark:border-gray-800"),s(D,"class","mb-1 text-xs text-gray-500"),s(U,"class","bg-gray-200 dark:bg-gray-600 font-bold px-3 py-1 border border-r-0 dark:border-gray-600 rounded-l-lg flex items-center"),s(re,"class","w-full rounded-r-lg py-2.5 px-4 text-sm dark:text-gray-300 dark:bg-gray-800 disabled:text-gray-500 dark:disabled:text-gray-500 outline-none svelte-1vx7r9s"),s(re,"type","text"),s(re,"autocomplete","off"),re.required=!0,s(L,"class","flex flex-1"),s(E,"class","flex flex-col w-full"),s(R,"class","mb-1 text-xs text-gray-500"),s(te,"class","w-full rounded-lg py-2.5 px-4 text-sm dark:text-gray-300 dark:bg-gray-800 outline-none svelte-1vx7r9s"),s(te,"type","text"),s(te,"autocomplete","off"),te.required=!0,s(ee,"class","flex-1"),s(M,"class","flex flex-col w-full"),s(ie,"class","mb-1.5 text-xs text-gray-500"),s(q,"class","flex flex-col w-full"),s(y,"class","flex flex-col space-y-1.5"),s(se,"class","px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-gray-100 transition rounded"),s(se,"type","submit"),s(W,"class","flex justify-end pt-5 text-sm font-medium"),s(b,"class","flex flex-col w-full"),s(k,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),s(w,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(N,oe){X(N,e,oe),r(e,t),r(t,a),r(a,n),r(t,o),r(t,h),r(e,_),r(e,f),r(e,m),r(e,w),r(w,k),r(k,b),r(b,y),r(y,E),r(E,D),r(D,T),r(E,A),r(E,L),r(L,U),r(L,z),r(L,re),_e(re,l[2].name),r(y,$),r(y,M),r(M,R),r(R,K),r(M,he),r(M,ee),r(ee,te),_e(te,l[2].title),r(y,de),r(y,q),r(q,ie),r(ie,le),r(q,J),et(g,q,null),r(b,B),r(b,W),r(W,se),r(se,ve),ne=!0,pe||(be=[Y(h,"click",l[9]),Y(re,"input",l[10]),Y(te,"input",l[11]),Y(b,"submit",Il(l[12]))],pe=!0)},p(N,oe){(!ne||oe&8)&&i!==(i=N[3].t("Edit Doc")+"")&&F(n,i),(!ne||oe&8)&&V!==(V=N[3].t("Name Tag")+"")&&F(T,V),oe&4&&re.value!==N[2].name&&_e(re,N[2].name),(!ne||oe&8)&&Z!==(Z=N[3].t("Title")+"")&&F(K,Z),oe&4&&te.value!==N[2].title&&_e(te,N[2].title),(!ne||oe&8)&&ae!==(ae=N[3].t("Tags")+"")&&F(le,ae);const Ve={};oe&2&&(Ve.tags=N[1]),g.$set(Ve),(!ne||oe&8)&&j!==(j=N[3].t("Save")+"")&&F(ve,j)},i(N){ne||(ge(g.$$.fragment,N),ne=!0)},o(N){Ee(g.$$.fragment,N),ne=!1},d(N){N&&c(e),tt(g),pe=!1,mt(be)}}}function $a(l){let e,t,a;function i(o){l[13](o)}let n={size:"sm",$$slots:{default:[Xa]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.show=l[0]),e=new Vl({props:n}),Bt.push(()=>qt(e,"show",i)),{c(){Xe(e.$$.fragment)},l(o){$e(e.$$.fragment,o)},m(o,h){et(e,o,h),a=!0},p(o,[h]){const p={};h&16399&&(p.$$scope={dirty:h,ctx:o}),!t&&h&1&&(t=!0,p.show=o[0],Ft(()=>t=!1)),e.$set(p)},i(o){a||(ge(e.$$.fragment,o),a=!0)},o(o){Ee(e.$$.fragment,o),a=!1},d(o){tt(e,o)}}}function er(l,e,t){let a;const i=$t("i18n");Lt(l,i,D=>t(3,a=D));let{show:n=!1}=e,{selectedDoc:o}=e,h=[],p={name:"",title:"",content:null};const _=async()=>{await Ya(localStorage.token,o.name,{title:p.title,name:p.name}).catch(V=>{Se.error(V)})&&(t(0,n=!1),We.set(await pt(localStorage.token)))},f=async D=>{!h.find(V=>V.name===D)&&D!==""?(t(1,h=[...h,{name:D}]),await sa(localStorage.token,p.name,{name:p.name,tags:h}),We.set(await pt(localStorage.token))):console.log("tag already exists")},m=async D=>{t(1,h=h.filter(V=>V.name!==D)),await sa(localStorage.token,p.name,{name:p.name,tags:h}),We.set(await pt(localStorage.token))};_l(()=>{var D;o&&(t(2,p=JSON.parse(JSON.stringify(o))),t(1,h=((D=p==null?void 0:p.content)==null?void 0:D.tags)??[]))});const w=()=>{t(0,n=!1)};function k(){p.name=this.value,t(2,p)}function b(){p.title=this.value,t(2,p)}const y=()=>{_()};function E(D){n=D,t(0,n)}return l.$$set=D=>{"show"in D&&t(0,n=D.show),"selectedDoc"in D&&t(8,o=D.selectedDoc)},[n,h,p,a,i,_,f,m,o,w,k,b,y,E]}class tr extends Yt{constructor(e){super(),Kt(this,e,er,$a,Ot,{show:0,selectedDoc:8})}}function oa(l,e,t){const a=l.slice();return a[37]=e[t],a}function ia(l){let e,t,a,i,n,o,h,p;return{c(){e=u("div"),t=u("input"),i=x(),n=u("input"),this.h()},l(_){e=d(_,"DIV",{class:!0});var f=v(e);t=d(f,"INPUT",{class:!0,placeholder:!0}),i=I(f),n=d(f,"INPUT",{class:!0,placeholder:!0}),f.forEach(c),this.h()},h(){s(t,"class","w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(t,"placeholder",a=l[12].t("API Base URL")),t.required=!0,s(n,"class","w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(n,"placeholder",o=l[12].t("API Key")),n.required=!0,s(e,"class","mt-1 flex gap-2")},m(_,f){X(_,e,f),r(e,t),_e(t,l[7]),r(e,i),r(e,n),_e(n,l[6]),h||(p=[Y(t,"input",l[20]),Y(n,"input",l[21])],h=!0)},p(_,f){f[0]&4096&&a!==(a=_[12].t("API Base URL"))&&s(t,"placeholder",a),f[0]&128&&t.value!==_[7]&&_e(t,_[7]),f[0]&4096&&o!==(o=_[12].t("API Key"))&&s(n,"placeholder",o),f[0]&64&&n.value!==_[6]&&_e(n,_[6])},d(_){_&&c(e),h=!1,mt(p)}}}function lr(l){let e,t,a,i,n,o,h,p;function _(w,k){return w[2]?sr:rr}let f=_(l),m=f(l);return{c(){e=u("div"),t=u("div"),a=u("input"),n=x(),o=u("button"),m.c(),this.h()},l(w){e=d(w,"DIV",{class:!0});var k=v(e);t=d(k,"DIV",{class:!0});var b=v(t);a=d(b,"INPUT",{class:!0,placeholder:!0}),b.forEach(c),n=I(k),o=d(k,"BUTTON",{class:!0});var y=v(o);m.l(y),y.forEach(c),k.forEach(c),this.h()},h(){s(a,"class","w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(a,"placeholder",i=l[12].t("Update embedding model (e.g. {{model}})",{model:l[5].slice(-40)})),s(t,"class","flex-1 mr-2"),s(o,"class","px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition"),o.disabled=l[2],s(e,"class","flex w-full")},m(w,k){X(w,e,k),r(e,t),r(t,a),_e(a,l[5]),r(e,n),r(e,o),m.m(o,null),h||(p=[Y(a,"input",l[24]),Y(o,"click",l[25])],h=!0)},p(w,k){k[0]&12320&&i!==(i=w[12].t("Update embedding model (e.g. {{model}})",{model:w[5].slice(-40)}))&&s(a,"placeholder",i),k[0]&8224&&a.value!==w[5]&&_e(a,w[5]),f!==(f=_(w))&&(m.d(1),m=f(w),m&&(m.c(),m.m(o,null))),k[0]&4&&(o.disabled=w[2])},d(w){w&&c(e),m.d(),h=!1,mt(p)}}}function ar(l){let e,t,a,i,n,o,h,p,_,f=!l[5]&&ca(l),m=Gt(l[13].filter(fa)),w=[];for(let E=0;E<m.length;E+=1)w[E]=ua(oa(l,m,E));function k(E,D){return E[2]?or:nr}let b=k(l),y=b(l);return{c(){e=u("div"),t=u("div"),a=u("select"),f&&f.c(),i=gl();for(let E=0;E<w.length;E+=1)w[E].c();o=x(),h=u("button"),y.c(),this.h()},l(E){e=d(E,"DIV",{class:!0});var D=v(e);t=d(D,"DIV",{class:!0});var V=v(t);a=d(V,"SELECT",{class:!0,placeholder:!0});var T=v(a);f&&f.l(T),i=gl();for(let L=0;L<w.length;L+=1)w[L].l(T);T.forEach(c),V.forEach(c),o=I(D),h=d(D,"BUTTON",{class:!0});var A=v(h);y.l(A),A.forEach(c),D.forEach(c),this.h()},h(){s(a,"class","w-full rounded-lg py-2 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(a,"placeholder",n=l[12].t("Select a model")),a.required=!0,l[5]===void 0&&xa(()=>l[22].call(a)),s(t,"class","flex-1 mr-2"),s(h,"class","px-2.5 bg-gray-100 hover:bg-gray-200 text-gray-800 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-100 rounded-lg transition"),h.disabled=l[2],s(e,"class","flex w-full")},m(E,D){X(E,e,D),r(e,t),r(t,a),f&&f.m(a,null),r(a,i);for(let V=0;V<w.length;V+=1)w[V]&&w[V].m(a,null);ml(a,l[5],!0),r(e,o),r(e,h),y.m(h,null),p||(_=[Y(a,"change",l[22]),Y(h,"click",l[23])],p=!0)},p(E,D){if(E[5]?f&&(f.d(1),f=null):f?f.p(E,D):(f=ca(E),f.c(),f.m(a,i)),D[0]&8192){m=Gt(E[13].filter(fa));let V;for(V=0;V<m.length;V+=1){const T=oa(E,m,V);w[V]?w[V].p(T,D):(w[V]=ua(T),w[V].c(),w[V].m(a,null))}for(;V<w.length;V+=1)w[V].d(1);w.length=m.length}D[0]&4096&&n!==(n=E[12].t("Select a model"))&&s(a,"placeholder",n),D[0]&8224&&ml(a,E[5]),b!==(b=k(E))&&(y.d(1),y=b(E),y&&(y.c(),y.m(h,null))),D[0]&4&&(h.disabled=E[2])},d(E){E&&c(e),f&&f.d(),Tl(w,E),y.d(),p=!1,mt(_)}}}function rr(l){let e,t,a;return{c(){e=De("svg"),t=De("path"),a=De("path"),this.h()},l(i){e=xe(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=v(e);t=xe(n,"path",{d:!0}),v(t).forEach(c),a=xe(n,"path",{d:!0}),v(a).forEach(c),n.forEach(c),this.h()},h(){s(t,"d","M8.75 2.75a.75.75 0 0 0-1.5 0v5.69L5.03 6.22a.75.75 0 0 0-1.06 1.06l3.5 3.5a.75.75 0 0 0 1.06 0l3.5-3.5a.75.75 0 0 0-1.06-1.06L8.75 8.44V2.75Z"),s(a,"d","M3.5 9.75a.75.75 0 0 0-1.5 0v1.5A2.75 2.75 0 0 0 4.75 14h6.5A2.75 2.75 0 0 0 14 11.25v-1.5a.75.75 0 0 0-1.5 0v1.5c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-1.5Z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"fill","currentColor"),s(e,"class","w-4 h-4")},m(i,n){X(i,e,n),r(e,t),r(e,a)},d(i){i&&c(e)}}}function sr(l){let e,t=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
												transform-origin: center;
												animation: spinner_AtaB 0.75s infinite linear;
											}
											@keyframes spinner_AtaB {
												100% {
													transform: rotate(360deg);
												}
											}
										</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){e=u("div"),e.innerHTML=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-to07og"&&(e.innerHTML=t),this.h()},h(){s(e,"class","self-center")},m(a,i){X(a,e,i)},d(a){a&&c(e)}}}function ca(l){let e,t=l[12].t("Select a model")+"",a;return{c(){e=u("option"),a=C(t),this.h()},l(i){e=d(i,"OPTION",{});var n=v(e);a=H(n,t),n.forEach(c),this.h()},h(){e.__value="",_e(e,e.__value),e.disabled=!0,e.selected=!0},m(i,n){X(i,e,n),r(e,a)},p(i,n){n[0]&4096&&t!==(t=i[12].t("Select a model")+"")&&F(a,t)},d(i){i&&c(e)}}}function ua(l){let e,t=l[37].name+" ("+(l[37].size/1073741824).toFixed(1)+" GB)",a,i;return{c(){e=u("option"),a=C(t),this.h()},l(n){e=d(n,"OPTION",{class:!0});var o=v(e);a=H(o,t),o.forEach(c),this.h()},h(){e.__value=i=l[37].name,_e(e,e.__value),s(e,"class","bg-gray-100 dark:bg-gray-700")},m(n,o){X(n,e,o),r(e,a)},p(n,o){o[0]&8192&&t!==(t=n[37].name+" ("+(n[37].size/1024**3).toFixed(1)+" GB)")&&F(a,t),o[0]&8192&&i!==(i=n[37].name)&&(e.__value=i,_e(e,e.__value))},d(n){n&&c(e)}}}function nr(l){let e,t;return{c(){e=De("svg"),t=De("path"),this.h()},l(a){e=xe(a,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=v(e);t=xe(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(t).forEach(c),i.forEach(c),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M12.416 3.376a.75.75 0 0 1 .208 1.04l-5 7.5a.75.75 0 0 1-1.154.114l-3-3a.75.75 0 0 1 1.06-1.06l2.353 2.353 4.493-6.74a.75.75 0 0 1 1.04-.207Z"),s(t,"clip-rule","evenodd"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 16 16"),s(e,"fill","currentColor"),s(e,"class","w-4 h-4")},m(a,i){X(a,e,i),r(e,t)},d(a){a&&c(e)}}}function or(l){let e,t=`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
												transform-origin: center;
												animation: spinner_AtaB 0.75s infinite linear;
											}
											@keyframes spinner_AtaB {
												100% {
													transform: rotate(360deg);
												}
											}
										</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){e=u("div"),e.innerHTML=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-to07og"&&(e.innerHTML=t),this.h()},h(){s(e,"class","self-center")},m(a,i){X(a,e,i)},d(a){a&&c(e)}}}function da(l){let e,t=`<svg class="w-3 h-3" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><style>.spinner_ajPY {
											transform-origin: center;
											animation: spinner_AtaB 0.75s infinite linear;
										}
										@keyframes spinner_AtaB {
											100% {
												transform: rotate(360deg);
											}
										}
									</style><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" opacity=".25"></path><path d="M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z" class="spinner_ajPY"></path></svg>`;return{c(){e=u("div"),e.innerHTML=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-12rhl99"&&(e.innerHTML=t),this.h()},h(){s(e,"class","ml-3 self-center")},m(a,i){X(a,e,i)},d(a){a&&c(e)}}}function ir(l){let e,t,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M3.5 2A1.5 1.5 0 0 0 2 3.5v9A1.5 1.5 0 0 0 3.5 14h9a1.5 1.5 0 0 0 1.5-1.5v-7A1.5 1.5 0 0 0 12.5 4H9.621a1.5 1.5 0 0 1-1.06-.44L7.439 2.44A1.5 1.5 0 0 0 6.38 2H3.5Zm6.75 7.75a.75.75 0 0 0 0-1.5h-4.5a.75.75 0 0 0 0 1.5h4.5Z" clip-rule="evenodd"></path></svg>',i,n,o=l[12].t("Reset Vector Storage")+"",h,p,_;return{c(){e=u("button"),t=u("div"),t.innerHTML=a,i=x(),n=u("div"),h=C(o),this.h()},l(f){e=d(f,"BUTTON",{class:!0});var m=v(e);t=d(m,"DIV",{class:!0,"data-svelte-h":!0}),Be(t)!=="svelte-17prqu7"&&(t.innerHTML=a),i=I(m),n=d(m,"DIV",{class:!0});var w=v(n);h=H(w,o),w.forEach(c),m.forEach(c),this.h()},h(){s(t,"class","self-center mr-3"),s(n,"class","self-center text-sm font-medium"),s(e,"class","flex rounded-md py-2 px-3.5 w-full hover:bg-gray-200 dark:hover:bg-gray-800 transition")},m(f,m){X(f,e,m),r(e,t),r(e,i),r(e,n),r(n,h),p||(_=Y(e,"click",l[34]),p=!0)},p(f,m){m[0]&4096&&o!==(o=f[12].t("Reset Vector Storage")+"")&&F(h,o)},d(f){f&&c(e),p=!1,_()}}}function cr(l){let e,t,a,i,n,o,h,p=l[12].t("Are you sure?")+"",_,f,m,w,k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z" clip-rule="evenodd"></path></svg>',b,y,E='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',D,V;return{c(){e=u("div"),t=u("div"),a=De("svg"),i=De("path"),n=De("path"),o=x(),h=u("span"),_=C(p),f=x(),m=u("div"),w=u("button"),w.innerHTML=k,b=x(),y=u("button"),y.innerHTML=E,this.h()},l(T){e=d(T,"DIV",{class:!0});var A=v(e);t=d(A,"DIV",{class:!0});var L=v(t);a=xe(L,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var U=v(a);i=xe(U,"path",{d:!0}),v(i).forEach(c),n=xe(U,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(n).forEach(c),U.forEach(c),o=I(L),h=d(L,"SPAN",{});var P=v(h);_=H(P,p),P.forEach(c),L.forEach(c),f=I(A),m=d(A,"DIV",{class:!0});var z=v(m);w=d(z,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(w)!=="svelte-19znk1w"&&(w.innerHTML=k),b=I(z),y=d(z,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(y)!=="svelte-1jep5h3"&&(y.innerHTML=E),z.forEach(c),A.forEach(c),this.h()},h(){s(i,"d","M2 3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3Z"),s(n,"fill-rule","evenodd"),s(n,"d","M13 6H3v6a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V6ZM5.72 7.47a.75.75 0 0 1 1.06 0L8 8.69l1.22-1.22a.75.75 0 1 1 1.06 1.06L9.06 9.75l1.22 1.22a.75.75 0 1 1-1.06 1.06L8 10.81l-1.22 1.22a.75.75 0 0 1-1.06-1.06l1.22-1.22-1.22-1.22a.75.75 0 0 1 0-1.06Z"),s(n,"clip-rule","evenodd"),s(a,"xmlns","http://www.w3.org/2000/svg"),s(a,"viewBox","0 0 16 16"),s(a,"fill","currentColor"),s(a,"class","w-4 h-4"),s(t,"class","flex items-center space-x-3"),s(w,"class","hover:text-white transition"),s(y,"class","hover:text-white transition"),s(m,"class","flex space-x-1.5 items-center"),s(e,"class","flex justify-between rounded-md items-center py-2 px-3.5 w-full transition")},m(T,A){X(T,e,A),r(e,t),r(t,a),r(a,i),r(a,n),r(t,o),r(t,h),r(h,_),r(e,f),r(e,m),r(m,w),r(m,b),r(m,y),D||(V=[Y(w,"click",l[32]),Y(y,"click",l[33])],D=!0)},p(T,A){A[0]&4096&&p!==(p=T[12].t("Are you sure?")+"")&&F(_,p)},d(T){T&&c(e),D=!1,mt(V)}}}function ur(l){let e,t,a,i,n=l[12].t("General Settings")+"",o,h,p,_,f=l[12].t("Embedding Model Engine")+"",m,w,k,b,y,E=l[12].t("Default (SentenceTransformer)")+"",D,V,T=l[12].t("Ollama")+"",A,L,U=l[12].t("OpenAI")+"",P,z,re,$,M,R,Z=l[12].t("Update Embedding Model")+"",K,he,ee,te,de=l[12].t("Warning: If you update or change your embedding model, you will need to re-import all documents.")+"",q,ie,ae,le,J,g,B=l[12].t("Scan for documents from {{path}}",{path:"/data/docs"})+"",W,se,j,ve,ne=l[12].t("Scan")+"",pe,be,N,oe,Ve,Ge,we,Te,Ze=l[12].t("Chunk Params")+"",Ie,Pe,Ae,Le,ze,Oe=l[12].t("Chunk Size")+"",it,Ke,Me,ke,Ye,Dt,Qe,Fe,xt=l[12].t("Chunk Overlap")+"",je,At,gt,ce,Ce,Qt,_t,ct,wt,me=l[12].t("PDF Extract Images (OCR)")+"",Je,fe,ut,S=(l[10]?l[12].t("On"):l[12].t("Off"))+"",G,qe,dt,ue,He,lt,It=l[12].t("Query Params")+"",Ct,Tt,bt,at,ft,ht=l[12].t("Top K")+"",kt,jt,yt,Ne,rt,Vt,vt,st,Mt=l[12].t("RAG Template")+"",St,wl,Et,bl,tl,kl,yl,Nt,Ht,Jt=l[12].t("Save")+"",ll,El,Ml,Ue=l[4]==="openai"&&ia(l);function Sl(O,Q){return O[4]==="ollama"?ar:lr}let al=Sl(l),nt=al(l),Re=l[1]&&da();function Ll(O,Q){return O[3]?cr:ir}let rl=Ll(l),ot=rl(l);return{c(){e=u("form"),t=u("div"),a=u("div"),i=u("div"),o=C(n),h=x(),p=u("div"),_=u("div"),m=C(f),w=x(),k=u("div"),b=u("select"),y=u("option"),D=C(E),V=u("option"),A=C(T),L=u("option"),P=C(U),z=x(),Ue&&Ue.c(),re=x(),$=u("div"),M=u("div"),R=u("div"),K=C(Z),he=x(),nt.c(),ee=x(),te=u("div"),q=C(de),ie=x(),ae=u("hr"),le=x(),J=u("div"),g=u("div"),W=C(B),se=x(),j=u("button"),ve=u("div"),pe=C(ne),be=x(),Re&&Re.c(),oe=x(),Ve=u("hr"),Ge=x(),we=u("div"),Te=u("div"),Ie=C(Ze),Pe=x(),Ae=u("div"),Le=u("div"),ze=u("div"),it=C(Oe),Ke=x(),Me=u("div"),ke=u("input"),Dt=x(),Qe=u("div"),Fe=u("div"),je=C(xt),At=x(),gt=u("div"),ce=u("input"),Qt=x(),_t=u("div"),ct=u("div"),wt=u("div"),Je=C(me),fe=x(),ut=u("button"),G=C(S),qe=x(),dt=u("hr"),ue=x(),He=u("div"),lt=u("div"),Ct=C(It),Tt=x(),bt=u("div"),at=u("div"),ft=u("div"),kt=C(ht),jt=x(),yt=u("div"),Ne=u("input"),Vt=x(),vt=u("div"),st=u("div"),St=C(Mt),wl=x(),Et=u("textarea"),bl=x(),tl=u("hr"),kl=x(),ot.c(),yl=x(),Nt=u("div"),Ht=u("button"),ll=C(Jt),this.h()},l(O){e=d(O,"FORM",{class:!0});var Q=v(e);t=d(Q,"DIV",{class:!0});var sl=v(t);a=d(sl,"DIV",{});var Ut=v(a);i=d(Ut,"DIV",{class:!0});var Bl=v(i);o=H(Bl,n),Bl.forEach(c),h=I(Ut),p=d(Ut,"DIV",{class:!0});var nl=v(p);_=d(nl,"DIV",{class:!0});var Al=v(_);m=H(Al,f),Al.forEach(c),w=I(nl),k=d(nl,"DIV",{class:!0});var Cl=v(k);b=d(Cl,"SELECT",{class:!0,placeholder:!0});var ol=v(b);y=d(ol,"OPTION",{});var Hl=v(y);D=H(Hl,E),Hl.forEach(c),V=d(ol,"OPTION",{});var Ol=v(V);A=H(Ol,T),Ol.forEach(c),L=d(ol,"OPTION",{});var jl=v(L);P=H(jl,U),jl.forEach(c),ol.forEach(c),Cl.forEach(c),nl.forEach(c),z=I(Ut),Ue&&Ue.l(Ut),Ut.forEach(c),re=I(sl),$=d(sl,"DIV",{class:!0});var Nl=v($);M=d(Nl,"DIV",{});var ye=v(M);R=d(ye,"DIV",{class:!0});var Ul=v(R);K=H(Ul,Z),Ul.forEach(c),he=I(ye),nt.l(ye),ee=I(ye),te=d(ye,"DIV",{class:!0});var Pl=v(te);q=H(Pl,de),Pl.forEach(c),ie=I(ye),ae=d(ye,"HR",{class:!0}),le=I(ye),J=d(ye,"DIV",{class:!0});var il=v(J);g=d(il,"DIV",{class:!0});var zl=v(g);W=H(zl,B),zl.forEach(c),se=I(il),j=d(il,"BUTTON",{class:!0,type:!0});var cl=v(j);ve=d(cl,"DIV",{class:!0});var Rl=v(ve);pe=H(Rl,ne),Rl.forEach(c),be=I(cl),Re&&Re.l(cl),cl.forEach(c),il.forEach(c),oe=I(ye),Ve=d(ye,"HR",{class:!0}),Ge=I(ye),we=d(ye,"DIV",{class:!0});var Pt=v(we);Te=d(Pt,"DIV",{class:!0});var Zl=v(Te);Ie=H(Zl,Ze),Zl.forEach(c),Pe=I(Pt),Ae=d(Pt,"DIV",{class:!0});var ul=v(Ae);Le=d(ul,"DIV",{class:!0});var dl=v(Le);ze=d(dl,"DIV",{class:!0});var Fl=v(ze);it=H(Fl,Oe),Fl.forEach(c),Ke=I(dl),Me=d(dl,"DIV",{class:!0});var ql=v(Me);ke=d(ql,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0,min:!0}),ql.forEach(c),dl.forEach(c),Dt=I(ul),Qe=d(ul,"DIV",{class:!0});var fl=v(Qe);Fe=d(fl,"DIV",{class:!0});var Gl=v(Fe);je=H(Gl,xt),Gl.forEach(c),At=I(fl),gt=d(fl,"DIV",{class:!0});var Yl=v(gt);ce=d(Yl,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0,min:!0}),Yl.forEach(c),fl.forEach(c),ul.forEach(c),Qt=I(Pt),_t=d(Pt,"DIV",{class:!0});var Kl=v(_t);ct=d(Kl,"DIV",{class:!0});var hl=v(ct);wt=d(hl,"DIV",{class:!0});var Ql=v(wt);Je=H(Ql,me),Ql.forEach(c),fe=I(hl),ut=d(hl,"BUTTON",{class:!0,type:!0});var Jl=v(ut);G=H(Jl,S),Jl.forEach(c),hl.forEach(c),Kl.forEach(c),Pt.forEach(c),qe=I(ye),dt=d(ye,"HR",{class:!0}),ue=I(ye),He=d(ye,"DIV",{});var zt=v(He);lt=d(zt,"DIV",{class:!0});var Wl=v(lt);Ct=H(Wl,It),Wl.forEach(c),Tt=I(zt),bt=d(zt,"DIV",{class:!0});var Xl=v(bt);at=d(Xl,"DIV",{class:!0});var vl=v(at);ft=d(vl,"DIV",{class:!0});var $l=v(ft);kt=H($l,ht),$l.forEach(c),jt=I(vl),yt=d(vl,"DIV",{class:!0});var ea=v(yt);Ne=d(ea,"INPUT",{class:!0,type:!0,placeholder:!0,autocomplete:!0,min:!0}),ea.forEach(c),vl.forEach(c),Xl.forEach(c),Vt=I(zt),vt=d(zt,"DIV",{});var pl=v(vt);st=d(pl,"DIV",{class:!0});var ta=v(st);St=H(ta,Mt),ta.forEach(c),wl=I(pl),Et=d(pl,"TEXTAREA",{class:!0,rows:!0}),v(Et).forEach(c),pl.forEach(c),zt.forEach(c),bl=I(ye),tl=d(ye,"HR",{class:!0}),kl=I(ye),ot.l(ye),ye.forEach(c),Nl.forEach(c),sl.forEach(c),yl=I(Q),Nt=d(Q,"DIV",{class:!0});var la=v(Nt);Ht=d(la,"BUTTON",{class:!0,type:!0});var aa=v(Ht);ll=H(aa,Jt),aa.forEach(c),la.forEach(c),Q.forEach(c),this.h()},h(){s(i,"class","mb-2 text-sm font-medium"),s(_,"class","self-center text-xs font-medium"),y.__value="",_e(y,y.__value),V.__value="ollama",_e(V,V.__value),L.__value="openai",_e(L,L.__value),s(b,"class","dark:bg-gray-900 w-fit pr-8 rounded px-2 p-1 text-xs bg-transparent outline-none text-right"),s(b,"placeholder","Select an embedding model engine"),l[4]===void 0&&xa(()=>l[18].call(b)),s(k,"class","flex items-center relative"),s(p,"class","flex w-full justify-between"),s(R,"class","mb-2 text-sm font-medium"),s(te,"class","mt-2 mb-1 text-xs text-gray-400 dark:text-gray-500"),s(ae,"class","dark:border-gray-700 my-3"),s(g,"class","self-center text-xs font-medium"),s(ve,"class","self-center font-medium"),s(j,"class",N="self-center text-xs p-1 px-3 bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg flex flex-row space-x-1 items-center "+(l[1]?" cursor-not-allowed":"")),s(j,"type","button"),j.disabled=l[1],s(J,"class","flex w-full justify-between"),s(Ve,"class","dark:border-gray-700 my-3"),s(Te,"class","text-sm font-medium"),s(ze,"class","self-center text-xs font-medium min-w-fit"),s(ke,"class","w-full rounded-lg py-1.5 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(ke,"type","number"),s(ke,"placeholder",Ye=l[12].t("Enter Chunk Size")),s(ke,"autocomplete","off"),s(ke,"min","0"),s(Me,"class","self-center p-3"),s(Le,"class","flex w-full justify-between"),s(Fe,"class","self-center text-xs font-medium min-w-fit"),s(ce,"class","w-full rounded-lg py-1.5 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(ce,"type","number"),s(ce,"placeholder",Ce=l[12].t("Enter Chunk Overlap")),s(ce,"autocomplete","off"),s(ce,"min","0"),s(gt,"class","self-center p-3"),s(Qe,"class","flex w-full"),s(Ae,"class","flex"),s(wt,"class","text-xs font-medium"),s(ut,"class","text-xs font-medium text-gray-500"),s(ut,"type","button"),s(ct,"class","flex justify-between items-center text-xs"),s(_t,"class","pr-2"),s(we,"class",""),s(dt,"class","dark:border-gray-700 my-3"),s(lt,"class","text-sm font-medium"),s(ft,"class","self-center text-xs font-medium flex-1"),s(Ne,"class","w-full rounded-lg py-1.5 px-4 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none"),s(Ne,"type","number"),s(Ne,"placeholder",rt=l[12].t("Enter Top K")),s(Ne,"autocomplete","off"),s(Ne,"min","0"),s(yt,"class","self-center p-3"),s(at,"class","flex w-full justify-between"),s(bt,"class","flex"),s(st,"class","mb-2.5 text-sm font-medium"),s(Et,"class","w-full rounded-lg px-4 py-3 text-sm dark:text-gray-300 dark:bg-gray-850 outline-none resize-none"),s(Et,"rows","4"),s(tl,"class","dark:border-gray-700 my-3"),s($,"class","space-y-2"),s(t,"class","space-y-3 pr-1.5 overflow-y-scroll max-h-[22rem]"),s(Ht,"class","px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-gray-100 transition rounded"),s(Ht,"type","submit"),s(Nt,"class","flex justify-end pt-3 text-sm font-medium"),s(e,"class","flex flex-col h-full justify-between space-y-3 text-sm")},m(O,Q){X(O,e,Q),r(e,t),r(t,a),r(a,i),r(i,o),r(a,h),r(a,p),r(p,_),r(_,m),r(p,w),r(p,k),r(k,b),r(b,y),r(y,D),r(b,V),r(V,A),r(b,L),r(L,P),ml(b,l[4],!0),r(a,z),Ue&&Ue.m(a,null),r(t,re),r(t,$),r($,M),r(M,R),r(R,K),r(M,he),nt.m(M,null),r(M,ee),r(M,te),r(te,q),r(M,ie),r(M,ae),r(M,le),r(M,J),r(J,g),r(g,W),r(J,se),r(J,j),r(j,ve),r(ve,pe),r(j,be),Re&&Re.m(j,null),r(M,oe),r(M,Ve),r(M,Ge),r(M,we),r(we,Te),r(Te,Ie),r(we,Pe),r(we,Ae),r(Ae,Le),r(Le,ze),r(ze,it),r(Le,Ke),r(Le,Me),r(Me,ke),_e(ke,l[8]),r(Ae,Dt),r(Ae,Qe),r(Qe,Fe),r(Fe,je),r(Qe,At),r(Qe,gt),r(gt,ce),_e(ce,l[9]),r(we,Qt),r(we,_t),r(_t,ct),r(ct,wt),r(wt,Je),r(ct,fe),r(ct,ut),r(ut,G),r(M,qe),r(M,dt),r(M,ue),r(M,He),r(He,lt),r(lt,Ct),r(He,Tt),r(He,bt),r(bt,at),r(at,ft),r(ft,kt),r(at,jt),r(at,yt),r(yt,Ne),_e(Ne,l[11].k),r(He,Vt),r(He,vt),r(vt,st),r(st,St),r(vt,wl),r(vt,Et),_e(Et,l[11].template),r(M,bl),r(M,tl),r(M,kl),ot.m(M,null),r(e,yl),r(e,Nt),r(Nt,Ht),r(Ht,ll),El||(Ml=[Y(b,"change",l[18]),Y(b,"change",l[19]),Y(j,"click",l[26]),Y(ke,"input",l[27]),Y(ce,"input",l[28]),Y(ut,"click",l[29]),Y(Ne,"input",l[30]),Y(Et,"input",l[31]),Y(e,"submit",Il(l[35]))],El=!0)},p(O,Q){Q[0]&4096&&n!==(n=O[12].t("General Settings")+"")&&F(o,n),Q[0]&4096&&f!==(f=O[12].t("Embedding Model Engine")+"")&&F(m,f),Q[0]&4096&&E!==(E=O[12].t("Default (SentenceTransformer)")+"")&&F(D,E),Q[0]&4096&&T!==(T=O[12].t("Ollama")+"")&&F(A,T),Q[0]&4096&&U!==(U=O[12].t("OpenAI")+"")&&F(P,U),Q[0]&16&&ml(b,O[4]),O[4]==="openai"?Ue?Ue.p(O,Q):(Ue=ia(O),Ue.c(),Ue.m(a,null)):Ue&&(Ue.d(1),Ue=null),Q[0]&4096&&Z!==(Z=O[12].t("Update Embedding Model")+"")&&F(K,Z),al===(al=Sl(O))&&nt?nt.p(O,Q):(nt.d(1),nt=al(O),nt&&(nt.c(),nt.m(M,ee))),Q[0]&4096&&de!==(de=O[12].t("Warning: If you update or change your embedding model, you will need to re-import all documents.")+"")&&F(q,de),Q[0]&4096&&B!==(B=O[12].t("Scan for documents from {{path}}",{path:"/data/docs"})+"")&&F(W,B),Q[0]&4096&&ne!==(ne=O[12].t("Scan")+"")&&F(pe,ne),O[1]?Re||(Re=da(),Re.c(),Re.m(j,null)):Re&&(Re.d(1),Re=null),Q[0]&2&&N!==(N="self-center text-xs p-1 px-3 bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 rounded-lg flex flex-row space-x-1 items-center "+(O[1]?" cursor-not-allowed":""))&&s(j,"class",N),Q[0]&2&&(j.disabled=O[1]),Q[0]&4096&&Ze!==(Ze=O[12].t("Chunk Params")+"")&&F(Ie,Ze),Q[0]&4096&&Oe!==(Oe=O[12].t("Chunk Size")+"")&&F(it,Oe),Q[0]&4096&&Ye!==(Ye=O[12].t("Enter Chunk Size"))&&s(ke,"placeholder",Ye),Q[0]&256&&Rt(ke.value)!==O[8]&&_e(ke,O[8]),Q[0]&4096&&xt!==(xt=O[12].t("Chunk Overlap")+"")&&F(je,xt),Q[0]&4096&&Ce!==(Ce=O[12].t("Enter Chunk Overlap"))&&s(ce,"placeholder",Ce),Q[0]&512&&Rt(ce.value)!==O[9]&&_e(ce,O[9]),Q[0]&4096&&me!==(me=O[12].t("PDF Extract Images (OCR)")+"")&&F(Je,me),Q[0]&5120&&S!==(S=(O[10]?O[12].t("On"):O[12].t("Off"))+"")&&F(G,S),Q[0]&4096&&It!==(It=O[12].t("Query Params")+"")&&F(Ct,It),Q[0]&4096&&ht!==(ht=O[12].t("Top K")+"")&&F(kt,ht),Q[0]&4096&&rt!==(rt=O[12].t("Enter Top K"))&&s(Ne,"placeholder",rt),Q[0]&2048&&Rt(Ne.value)!==O[11].k&&_e(Ne,O[11].k),Q[0]&4096&&Mt!==(Mt=O[12].t("RAG Template")+"")&&F(St,Mt),Q[0]&2048&&_e(Et,O[11].template),rl===(rl=Ll(O))&&ot?ot.p(O,Q):(ot.d(1),ot=rl(O),ot&&(ot.c(),ot.m(M,null))),Q[0]&4096&&Jt!==(Jt=O[12].t("Save")+"")&&F(ll,Jt)},i:Zt,o:Zt,d(O){O&&c(e),Ue&&Ue.d(),nt.d(),Re&&Re.d(),ot.d(),El=!1,mt(Ml)}}}const fa=l=>l.id&&!l.external;function dr(l,e,t){let a,i;Lt(l,Oa,g=>t(13,i=g));const n=$t("i18n");Lt(l,n,g=>t(12,a=g));let{saveHandler:o}=e,h=!1,p=!1,_=!1,f="",m="",w="",k="",b=0,y=0,E=!0,D={template:"",k:4};const V=async()=>{t(1,h=!0);const g=await Pa(localStorage.token);t(1,h=!1),g&&(await We.set(await pt(localStorage.token)),Se.success(a.t("Scan complete!")))},T=async()=>{if(f===""&&m.split("/").length-1>1){Se.error(a.t("Model filesystem path detected. Model shortname is required for update, cannot continue."));return}if(f==="ollama"&&m===""){Se.error(a.t("Model filesystem path detected. Model shortname is required for update, cannot continue."));return}if(f==="openai"&&m===""){Se.error(a.t("Model filesystem path detected. Model shortname is required for update, cannot continue."));return}if(f==="openai"&&w===""||k===""){Se.error(a.t("OpenAI URL/Key required."));return}console.log("Update embedding model attempt:",m),t(2,p=!0);const g=await qa(localStorage.token,{embedding_engine:f,embedding_model:m,...f==="openai"?{openai_config:{key:w,url:k}}:{}}).catch(async B=>(Se.error(B),await L(),null));t(2,p=!1),g&&(console.log("embeddingModelUpdateHandler:",g),g.status===!0&&Se.success(a.t('Embedding model set to "{{embedding_model}}"',g),{duration:1e3*10}))},A=async()=>{await za(localStorage.token,{pdf_extract_images:E,chunk:{chunk_overlap:y,chunk_size:b}}),t(11,D=await Ra(localStorage.token,D))},L=async()=>{const g=await Za(localStorage.token);g&&(t(4,f=g.embedding_engine),t(5,m=g.embedding_model),t(6,w=g.openai_config.key),t(7,k=g.openai_config.url))};_l(async()=>{const g=await Na(localStorage.token);g&&(t(10,E=g.pdf_extract_images),t(8,b=g.chunk.chunk_size),t(9,y=g.chunk.chunk_overlap)),await L(),t(11,D=await Ua(localStorage.token))});function U(){f=ra(this),t(4,f)}const P=g=>{g.target.value==="ollama"?t(5,m=""):g.target.value==="openai"&&t(5,m="text-embedding-3-small")};function z(){k=this.value,t(7,k)}function re(){w=this.value,t(6,w)}function $(){m=ra(this),t(5,m)}const M=()=>{T()};function R(){m=this.value,t(5,m)}const Z=()=>{T()},K=()=>{V(),console.log("check")};function he(){b=Rt(this.value),t(8,b)}function ee(){y=Rt(this.value),t(9,y)}const te=()=>{t(10,E=!E)};function de(){D.k=Rt(this.value),t(11,D)}function q(){D.template=this.value,t(11,D)}const ie=()=>{Fa(localStorage.token).catch(B=>(Se.error(B),null))&&Se.success(a.t("Success")),t(3,_=!1)},ae=()=>{t(3,_=!1)},le=()=>{t(3,_=!0)},J=()=>{A(),o()};return l.$$set=g=>{"saveHandler"in g&&t(0,o=g.saveHandler)},[o,h,p,_,f,m,w,k,b,y,E,D,a,i,n,V,T,A,U,P,z,re,$,M,R,Z,K,he,ee,te,de,q,ie,ae,le,J]}class fr extends Yt{constructor(e){super(),Kt(this,e,dr,ur,Ot,{saveHandler:0},null,[-1,-1])}}function ha(l){let e,t;return e=new fr({props:{saveHandler:l[6]}}),{c(){Xe(e.$$.fragment)},l(a){$e(e.$$.fragment,a)},m(a,i){et(e,a,i),t=!0},p(a,i){const n={};i&1&&(n.saveHandler=a[6]),e.$set(n)},i(a){t||(ge(e.$$.fragment,a),t=!0)},o(a){Ee(e.$$.fragment,a),t=!1},d(a){tt(e,a)}}}function hr(l){let e,t,a,i=l[2].t("Document Settings")+"",n,o,h,p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,f,m,w,k,b,y,E='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M6.955 1.45A.5.5 0 0 1 7.452 1h1.096a.5.5 0 0 1 .497.45l.17 1.699c.484.12.94.312 1.356.562l1.321-1.081a.5.5 0 0 1 .67.033l.774.775a.5.5 0 0 1 .034.67l-1.08 1.32c.25.417.44.873.561 1.357l1.699.17a.5.5 0 0 1 .45.497v1.096a.5.5 0 0 1-.45.497l-1.699.17c-.12.484-.312.94-.562 1.356l1.082 1.322a.5.5 0 0 1-.034.67l-.774.774a.5.5 0 0 1-.67.033l-1.322-1.08c-.416.25-.872.44-1.356.561l-.17 1.699a.5.5 0 0 1-.497.45H7.452a.5.5 0 0 1-.497-.45l-.17-1.699a4.973 4.973 0 0 1-1.356-.562L4.108 13.37a.5.5 0 0 1-.67-.033l-.774-.775a.5.5 0 0 1-.034-.67l1.08-1.32a4.971 4.971 0 0 1-.561-1.357l-1.699-.17A.5.5 0 0 1 1 8.548V7.452a.5.5 0 0 1 .45-.497l1.699-.17c.12-.484.312-.94.562-1.356L2.629 4.107a.5.5 0 0 1 .034-.67l.774-.774a.5.5 0 0 1 .67-.033L5.43 3.71a4.97 4.97 0 0 1 1.356-.561l.17-1.699ZM6 8c0 .538.212 1.026.558 1.385l.057.057a2 2 0 0 0 2.828-2.828l-.058-.056A2 2 0 0 0 6 8Z" clip-rule="evenodd"></path></svg>',D,V,T=l[2].t("General")+"",A,L,U,P,z,re,$,M=l[1]==="general"&&ha(l);return{c(){e=u("div"),t=u("div"),a=u("div"),n=C(i),o=x(),h=u("button"),h.innerHTML=p,_=x(),f=u("hr"),m=x(),w=u("div"),k=u("div"),b=u("button"),y=u("div"),y.innerHTML=E,D=x(),V=u("div"),A=C(T),U=x(),P=u("div"),M&&M.c(),this.h()},l(R){e=d(R,"DIV",{});var Z=v(e);t=d(Z,"DIV",{class:!0});var K=v(t);a=d(K,"DIV",{class:!0});var he=v(a);n=H(he,i),he.forEach(c),o=I(K),h=d(K,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(h)!=="svelte-745w2y"&&(h.innerHTML=p),K.forEach(c),_=I(Z),f=d(Z,"HR",{class:!0}),m=I(Z),w=d(Z,"DIV",{class:!0});var ee=v(w);k=d(ee,"DIV",{class:!0});var te=v(k);b=d(te,"BUTTON",{class:!0});var de=v(b);y=d(de,"DIV",{class:!0,"data-svelte-h":!0}),Be(y)!=="svelte-1k1ieum"&&(y.innerHTML=E),D=I(de),V=d(de,"DIV",{class:!0});var q=v(V);A=H(q,T),q.forEach(c),de.forEach(c),te.forEach(c),U=I(ee),P=d(ee,"DIV",{class:!0});var ie=v(P);M&&M.l(ie),ie.forEach(c),ee.forEach(c),Z.forEach(c),this.h()},h(){s(a,"class","text-lg font-medium self-center"),s(h,"class","self-center"),s(t,"class","flex justify-between dark:text-gray-300 px-5 py-4"),s(f,"class","dark:border-gray-800"),s(y,"class","self-center mr-2"),s(V,"class","self-center"),s(b,"class",L="px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition "+(l[1]==="general"?"bg-gray-200 dark:bg-gray-700":" hover:bg-gray-300 dark:hover:bg-gray-800")),s(k,"class","tabs flex flex-row overflow-x-auto space-x-1 md:space-x-0 md:space-y-1 md:flex-col flex-1 md:flex-none md:w-40 dark:text-gray-200 text-xs text-left mb-3 md:mb-0"),s(P,"class","flex-1 md:min-h-[380px]"),s(w,"class","flex flex-col md:flex-row w-full p-4 md:space-x-4")},m(R,Z){X(R,e,Z),r(e,t),r(t,a),r(a,n),r(t,o),r(t,h),r(e,_),r(e,f),r(e,m),r(e,w),r(w,k),r(k,b),r(b,y),r(b,D),r(b,V),r(V,A),r(w,U),r(w,P),M&&M.m(P,null),z=!0,re||($=[Y(h,"click",l[4]),Y(b,"click",l[5])],re=!0)},p(R,Z){(!z||Z&4)&&i!==(i=R[2].t("Document Settings")+"")&&F(n,i),(!z||Z&4)&&T!==(T=R[2].t("General")+"")&&F(A,T),(!z||Z&2&&L!==(L="px-2.5 py-2.5 min-w-fit rounded-lg flex-1 md:flex-none flex text-right transition "+(R[1]==="general"?"bg-gray-200 dark:bg-gray-700":" hover:bg-gray-300 dark:hover:bg-gray-800")))&&s(b,"class",L),R[1]==="general"?M?(M.p(R,Z),Z&2&&ge(M,1)):(M=ha(R),M.c(),ge(M,1),M.m(P,null)):M&&(Wt(),Ee(M,1,1,()=>{M=null}),Xt())},i(R){z||(ge(M),z=!0)},o(R){Ee(M),z=!1},d(R){R&&c(e),M&&M.d(),re=!1,mt($)}}}function vr(l){let e,t,a;function i(o){l[7](o)}let n={$$slots:{default:[hr]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.show=l[0]),e=new Vl({props:n}),Bt.push(()=>qt(e,"show",i)),{c(){Xe(e.$$.fragment)},l(o){$e(e.$$.fragment,o)},m(o,h){et(e,o,h),a=!0},p(o,[h]){const p={};h&263&&(p.$$scope={dirty:h,ctx:o}),!t&&h&1&&(t=!0,p.show=o[0],Ft(()=>t=!1)),e.$set(p)},i(o){a||(ge(e.$$.fragment,o),a=!0)},o(o){Ee(e.$$.fragment,o),a=!1},d(o){tt(e,o)}}}function pr(l,e,t){let a;const i=$t("i18n");Lt(l,i,m=>t(2,a=m));let{show:n=!1}=e,o="general";const h=()=>{t(0,n=!1)},p=()=>{t(1,o="general")},_=()=>{t(0,n=!1)};function f(m){n=m,t(0,n)}return l.$$set=m=>{"show"in m&&t(0,n=m.show)},[n,o,a,i,h,p,_,f]}class mr extends Yt{constructor(e){super(),Kt(this,e,pr,vr,Ot,{show:0})}}function gr(l){let e=l[4].t("Click here to select documents.")+"",t;return{c(){t=C(e)},l(a){t=H(a,e)},m(a,i){X(a,t,i)},p(a,i){i&16&&e!==(e=a[4].t("Click here to select documents.")+"")&&F(t,e)},d(a){a&&c(t)}}}function _r(l){let e=l[2].length>0?`${l[2].length}`:"",t,a;return{c(){t=C(e),a=C(" document(s) selected.")},l(i){t=H(i,e),a=H(i," document(s) selected.")},m(i,n){X(i,t,n),X(i,a,n)},p(i,n){n&4&&e!==(e=i[2].length>0?`${i[2].length}`:"")&&F(t,e)},d(i){i&&(c(t),c(a))}}}function wr(l){let e,t,a,i=l[4].t("Add Docs")+"",n,o,h,p='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',_,f,m,w,k,b,y,E,D,V,T,A,L,U,P=l[4].t("Tags")+"",z,re,$,M,R,Z,K=l[4].t("Save")+"",he,ee,te,de;function q(le,J){return le[2]?_r:gr}let ie=q(l),ae=ie(l);return $=new Sa({props:{tags:l[3],addTag:l[7],deleteTag:l[8]}}),{c(){e=u("div"),t=u("div"),a=u("div"),n=C(i),o=x(),h=u("button"),h.innerHTML=p,_=x(),f=u("hr"),m=x(),w=u("div"),k=u("div"),b=u("form"),y=u("div"),E=u("input"),D=x(),V=u("button"),ae.c(),T=x(),A=u("div"),L=u("div"),U=u("div"),z=C(P),re=x(),Xe($.$$.fragment),M=x(),R=u("div"),Z=u("button"),he=C(K),this.h()},l(le){e=d(le,"DIV",{});var J=v(e);t=d(J,"DIV",{class:!0});var g=v(t);a=d(g,"DIV",{class:!0});var B=v(a);n=H(B,i),B.forEach(c),o=I(g),h=d(g,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(h)!=="svelte-745w2y"&&(h.innerHTML=p),g.forEach(c),_=I(J),f=d(J,"HR",{class:!0}),m=I(J),w=d(J,"DIV",{class:!0});var W=v(w);k=d(W,"DIV",{class:!0});var se=v(k);b=d(se,"FORM",{class:!0});var j=v(b);y=d(j,"DIV",{class:!0});var ve=v(y);E=d(ve,"INPUT",{id:!0,type:!0,class:!0}),D=I(ve),V=d(ve,"BUTTON",{class:!0,type:!0});var ne=v(V);ae.l(ne),ne.forEach(c),ve.forEach(c),T=I(j),A=d(j,"DIV",{class:!0});var pe=v(A);L=d(pe,"DIV",{class:!0});var be=v(L);U=d(be,"DIV",{class:!0});var N=v(U);z=H(N,P),N.forEach(c),re=I(be),$e($.$$.fragment,be),be.forEach(c),pe.forEach(c),M=I(j),R=d(j,"DIV",{class:!0});var oe=v(R);Z=d(oe,"BUTTON",{class:!0,type:!0});var Ve=v(Z);he=H(Ve,K),Ve.forEach(c),oe.forEach(c),j.forEach(c),se.forEach(c),W.forEach(c),J.forEach(c),this.h()},h(){s(a,"class","text-lg font-medium self-center"),s(h,"class","self-center"),s(t,"class","flex justify-between dark:text-gray-300 px-5 py-4"),s(f,"class","dark:border-gray-800"),s(E,"id","upload-doc-input"),E.hidden=!0,s(E,"type","file"),E.multiple=!0,s(E,"class","svelte-1vx7r9s"),s(V,"class","w-full text-sm font-medium py-3 bg-gray-100 hover:bg-gray-200 dark:bg-gray-850 dark:hover:bg-gray-800 text-center rounded-xl"),s(V,"type","button"),s(y,"class","mb-3 w-full"),s(U,"class","mb-1.5 text-xs text-gray-500"),s(L,"class","flex flex-col w-full"),s(A,"class","flex flex-col space-y-1.5"),s(Z,"class","px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-gray-100 transition rounded"),s(Z,"type","submit"),s(R,"class","flex justify-end pt-5 text-sm font-medium"),s(b,"class","flex flex-col w-full"),s(k,"class","flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"),s(w,"class","flex flex-col md:flex-row w-full px-5 py-4 md:space-x-4 dark:text-gray-200")},m(le,J){X(le,e,J),r(e,t),r(t,a),r(a,n),r(t,o),r(t,h),r(e,_),r(e,f),r(e,m),r(e,w),r(w,k),r(k,b),r(b,y),r(y,E),l[10](E),r(y,D),r(y,V),ae.m(V,null),r(b,T),r(b,A),r(A,L),r(L,U),r(U,z),r(L,re),et($,L,null),r(b,M),r(b,R),r(R,Z),r(Z,he),ee=!0,te||(de=[Y(h,"click",l[9]),Y(E,"change",l[11]),Y(V,"click",l[12]),Y(b,"submit",Il(l[13]))],te=!0)},p(le,J){(!ee||J&16)&&i!==(i=le[4].t("Add Docs")+"")&&F(n,i),ie===(ie=q(le))&&ae?ae.p(le,J):(ae.d(1),ae=ie(le),ae&&(ae.c(),ae.m(V,null))),(!ee||J&16)&&P!==(P=le[4].t("Tags")+"")&&F(z,P);const g={};J&8&&(g.tags=le[3]),$.$set(g),(!ee||J&16)&&K!==(K=le[4].t("Save")+"")&&F(he,K)},i(le){ee||(ge($.$$.fragment,le),ee=!0)},o(le){Ee($.$$.fragment,le),ee=!1},d(le){le&&c(e),l[10](null),ae.d(),tt($),te=!1,mt(de)}}}function br(l){let e,t,a;function i(o){l[14](o)}let n={size:"sm",$$slots:{default:[wr]},$$scope:{ctx:l}};return l[0]!==void 0&&(n.show=l[0]),e=new Vl({props:n}),Bt.push(()=>qt(e,"show",i)),{c(){Xe(e.$$.fragment)},l(o){$e(e.$$.fragment,o)},m(o,h){et(e,o,h),a=!0},p(o,[h]){const p={};h&131103&&(p.$$scope={dirty:h,ctx:o}),!t&&h&1&&(t=!0,p.show=o[0],Ft(()=>t=!1)),e.$set(p)},i(o){a||(ge(e.$$.fragment,o),a=!0)},o(o){Ee(e.$$.fragment,o),a=!1},d(o){tt(e,o)}}}function kr(l,e,t){let a;const i=$t("i18n");Lt(l,i,T=>t(4,a=T));let{show:n=!1}=e,o,h,p=[];const _=async T=>{const A=await Va(localStorage.token,"",T).catch(L=>(Se.error(L),null));A&&(await xl(localStorage.token,A.collection_name,A.filename,Ma(A.filename),A.filename,p.length>0?{tags:p}:null).catch(L=>(Se.error(L),null)),await We.set(await pt(localStorage.token)))},f=async()=>{if(h&&h.length>0){for(const T of h)console.log(T,T.name.split(".").at(-1)),Ia.includes(T.type)||Ta.includes(T.name.split(".").at(-1))||Se.error(`Unknown File Type '${T.type}', but accepting and treating as plain text`),_(T);t(2,h=null),t(1,o.value="",o)}else Se.error(a.t("File not found."));t(0,n=!1),We.set(await pt(localStorage.token))},m=async T=>{!p.find(A=>A.name===T)&&T!==""?t(3,p=[...p,{name:T}]):console.log("tag already exists")},w=async T=>{t(3,p=p.filter(A=>A.name!==T))};_l(()=>{});const k=()=>{t(0,n=!1)};function b(T){Bt[T?"unshift":"push"](()=>{o=T,t(1,o)})}function y(){h=this.files,t(2,h)}const E=()=>{o.click()},D=()=>{f()};function V(T){n=T,t(0,n)}return l.$$set=T=>{"show"in T&&t(0,n=T.show)},[n,o,h,p,a,i,f,m,w,k,b,y,E,D,V]}class yr extends Yt{constructor(e){super(),Kt(this,e,kr,br,Ot,{show:0})}}const{document:Dl}=Ca;function va(l,e,t){const a=l.slice();return a[37]=e[t],a[38]=e,a[39]=t,a}function pa(l,e,t){const a=l.slice();return a[40]=e[t],a}function ma(l){let e,t,a,i,n,o;return n=new Ga({props:{$$slots:{default:[Er]},$$scope:{ctx:l}}}),{c(){e=u("div"),t=u("div"),a=u("div"),i=u("div"),Xe(n.$$.fragment),this.h()},l(h){e=d(h,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var p=v(e);t=d(p,"DIV",{class:!0});var _=v(t);a=d(_,"DIV",{class:!0});var f=v(a);i=d(f,"DIV",{class:!0});var m=v(i);$e(n.$$.fragment,m),m.forEach(c),f.forEach(c),_.forEach(c),p.forEach(c),this.h()},h(){s(i,"class","max-w-md"),s(a,"class","m-auto pt-64 flex flex-col justify-center"),s(t,"class","absolute rounded-xl w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),s(e,"class","fixed w-full h-full flex z-50 touch-none pointer-events-none"),s(e,"id","dropzone"),s(e,"role","region"),s(e,"aria-label","Drag and Drop Container")},m(h,p){X(h,e,p),r(e,t),r(t,a),r(a,i),et(n,i,null),o=!0},i(h){o||(ge(n.$$.fragment,h),o=!0)},o(h){Ee(n.$$.fragment,h),o=!1},d(h){h&&c(e),tt(n)}}}function Er(l){let e,t="Drop any files here to add to my documents";return{c(){e=u("div"),e.textContent=t,this.h()},l(a){e=d(a,"DIV",{class:!0,"data-svelte-h":!0}),Be(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){s(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(a,i){X(a,e,i)},p:Zt,d(a){a&&c(e)}}}function ga(l){let e,t,a;function i(o){l[18](o)}let n={selectedDoc:l[9]};return l[8]!==void 0&&(n.show=l[8]),e=new tr({props:n}),Bt.push(()=>qt(e,"show",i)),{c(){Xe(e.$$.fragment)},l(o){$e(e.$$.fragment,o)},m(o,h){et(e,o,h),a=!0},p(o,h){const p={};h[0]&512&&(p.selectedDoc=o[9]),!t&&h[0]&256&&(t=!0,p.show=o[8],Ft(()=>t=!1)),e.$set(p)},i(o){a||(ge(e.$$.fragment,o),a=!0)},o(o){Ee(e.$$.fragment,o),a=!1},d(o){tt(e,o)}}}function _a(l){let e,t,a,i,n,o;a=new La({props:{state:l[11].filter(ka).length===l[11].length?"checked":"unchecked",indeterminate:l[11].filter(ya).length>0&&l[11].filter(Ea).length!==l[11].length}}),a.$on("change",l[24]);function h(f,m){return m[0]&2048&&(n=null),n==null&&(n=f[11].filter(Mr).length===0),n?xr:Dr}let p=h(l,[-1,-1]),_=p(l);return{c(){e=u("div"),t=u("div"),Xe(a.$$.fragment),i=x(),_.c(),this.h()},l(f){e=d(f,"DIV",{class:!0});var m=v(e);t=d(m,"DIV",{class:!0});var w=v(t);$e(a.$$.fragment,w),w.forEach(c),i=I(m),_.l(m),m.forEach(c),this.h()},h(){s(t,"class","ml-0.5 pr-3 my-auto flex items-center"),s(e,"class","px-2.5 pt-1 flex gap-1 flex-wrap")},m(f,m){X(f,e,m),r(e,t),et(a,t,null),r(e,i),_.m(e,null),o=!0},p(f,m){const w={};m[0]&2048&&(w.state=f[11].filter(ka).length===f[11].length?"checked":"unchecked"),m[0]&2048&&(w.indeterminate=f[11].filter(ya).length>0&&f[11].filter(Ea).length!==f[11].length),a.$set(w),p===(p=h(f,m))&&_?_.p(f,m):(_.d(1),_=p(f),_&&(_.c(),_.m(e,null)))},i(f){o||(ge(a.$$.fragment,f),o=!0)},o(f){Ee(a.$$.fragment,f),o=!1},d(f){f&&c(e),tt(a),_.d()}}}function Dr(l){let e,t,a=l[11].filter(Da).length+"",i,n,o,h,p,_,f=l[12].t("delete")+"",m,w,k;return{c(){e=u("div"),t=u("div"),i=C(a),n=C(" Selected"),o=x(),h=u("div"),p=u("button"),_=u("div"),m=C(f),this.h()},l(b){e=d(b,"DIV",{class:!0});var y=v(e);t=d(y,"DIV",{class:!0});var E=v(t);i=H(E,a),n=H(E," Selected"),E.forEach(c),o=I(y),h=d(y,"DIV",{class:!0});var D=v(h);p=d(D,"BUTTON",{class:!0});var V=v(p);_=d(V,"DIV",{class:!0});var T=v(_);m=H(T,f),T.forEach(c),V.forEach(c),D.forEach(c),y.forEach(c),this.h()},h(){s(t,"class","text-xs font-medium py-0.5 self-center mr-1"),s(_,"class","text-xs font-medium self-center line-clamp-1"),s(p,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white"),s(h,"class","flex gap-1"),s(e,"class","flex-1 flex w-full justify-between items-center")},m(b,y){X(b,e,y),r(e,t),r(t,i),r(t,n),r(e,o),r(e,h),r(h,p),r(p,_),r(_,m),w||(k=Y(p,"click",l[27]),w=!0)},p(b,y){y[0]&2048&&a!==(a=b[11].filter(Da).length+"")&&F(i,a),y[0]&4096&&f!==(f=b[12].t("delete")+"")&&F(m,f)},d(b){b&&c(e),w=!1,k()}}}function xr(l){let e,t,a=l[12].t("all")+"",i,n,o,h,p,_=Gt(l[5]),f=[];for(let m=0;m<_.length;m+=1)f[m]=wa(pa(l,_,m));return{c(){e=u("button"),t=u("div"),i=C(a),n=x();for(let m=0;m<f.length;m+=1)f[m].c();o=gl(),this.h()},l(m){e=d(m,"BUTTON",{class:!0});var w=v(e);t=d(w,"DIV",{class:!0});var k=v(t);i=H(k,a),k.forEach(c),w.forEach(c),n=I(m);for(let b=0;b<f.length;b+=1)f[b].l(m);o=gl(),this.h()},h(){s(t,"class","text-xs font-medium self-center line-clamp-1"),s(e,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(m,w){X(m,e,w),r(e,t),r(t,i),X(m,n,w);for(let k=0;k<f.length;k+=1)f[k]&&f[k].m(m,w);X(m,o,w),h||(p=Y(e,"click",l[25]),h=!0)},p(m,w){if(w[0]&4096&&a!==(a=m[12].t("all")+"")&&F(i,a),w[0]&34){_=Gt(m[5]);let k;for(k=0;k<_.length;k+=1){const b=pa(m,_,k);f[k]?f[k].p(b,w):(f[k]=wa(b),f[k].c(),f[k].m(o.parentNode,o))}for(;k<f.length;k+=1)f[k].d(1);f.length=_.length}},d(m){m&&(c(e),c(n),c(o)),Tl(f,m),h=!1,p()}}}function wa(l){let e,t,a,i=l[40]+"",n,o,h,p;function _(){return l[26](l[40])}return{c(){e=u("button"),t=u("div"),a=C("#"),n=C(i),o=x(),this.h()},l(f){e=d(f,"BUTTON",{class:!0});var m=v(e);t=d(m,"DIV",{class:!0});var w=v(t);a=H(w,"#"),n=H(w,i),w.forEach(c),o=I(m),m.forEach(c),this.h()},h(){s(t,"class","text-xs font-medium self-center line-clamp-1"),s(e,"class","px-2 py-0.5 space-x-1 flex h-fit items-center rounded-full transition bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:text-white")},m(f,m){X(f,e,m),r(e,t),r(t,a),r(t,n),r(e,o),h||(p=Y(e,"click",_),h=!0)},p(f,m){l=f,m[0]&32&&i!==(i=l[40]+"")&&F(n,i)},d(f){f&&c(e),h=!1,p()}}}function Ir(l){let e,t,a,i,n,o;return{c(){e=De("svg"),t=De("style"),a=C(`.spinner_qM83 {\r
													animation: spinner_8HQG 1.05s infinite;\r
												}\r
												.spinner_oXPr {\r
													animation-delay: 0.1s;\r
												}\r
												.spinner_ZTLf {\r
													animation-delay: 0.2s;\r
												}\r
												@keyframes spinner_8HQG {\r
													0%,\r
													57.14% {\r
														animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
														transform: translate(0);\r
													}\r
													28.57% {\r
														animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
														transform: translateY(-6px);\r
													}\r
													100% {\r
														transform: translate(0);\r
													}\r
												}\r
											`),i=De("circle"),n=De("circle"),o=De("circle"),this.h()},l(h){e=xe(h,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var p=v(e);t=xe(p,"style",{});var _=v(t);a=H(_,`.spinner_qM83 {\r
													animation: spinner_8HQG 1.05s infinite;\r
												}\r
												.spinner_oXPr {\r
													animation-delay: 0.1s;\r
												}\r
												.spinner_ZTLf {\r
													animation-delay: 0.2s;\r
												}\r
												@keyframes spinner_8HQG {\r
													0%,\r
													57.14% {\r
														animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
														transform: translate(0);\r
													}\r
													28.57% {\r
														animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
														transform: translateY(-6px);\r
													}\r
													100% {\r
														transform: translate(0);\r
													}\r
												}\r
											`),_.forEach(c),i=xe(p,"circle",{class:!0,cx:!0,cy:!0,r:!0}),v(i).forEach(c),n=xe(p,"circle",{class:!0,cx:!0,cy:!0,r:!0}),v(n).forEach(c),o=xe(p,"circle",{class:!0,cx:!0,cy:!0,r:!0}),v(o).forEach(c),p.forEach(c),this.h()},h(){s(i,"class","spinner_qM83"),s(i,"cx","4"),s(i,"cy","12"),s(i,"r","2.5"),s(n,"class","spinner_qM83 spinner_oXPr"),s(n,"cx","12"),s(n,"cy","12"),s(n,"r","2.5"),s(o,"class","spinner_qM83 spinner_ZTLf"),s(o,"cx","20"),s(o,"cy","12"),s(o,"r","2.5"),s(e,"class","w-6 h-6 translate-y-[0.5px]"),s(e,"fill","currentColor"),s(e,"viewBox","0 0 24 24"),s(e,"xmlns","http://www.w3.org/2000/svg")},m(h,p){X(h,e,p),r(e,t),r(t,a),r(e,i),r(e,n),r(e,o)},d(h){h&&c(e)}}}function Tr(l){let e,t,a;return{c(){e=De("svg"),t=De("path"),a=De("path"),this.h()},l(i){e=xe(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=v(e);t=xe(n,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(t).forEach(c),a=xe(n,"path",{d:!0}),v(a).forEach(c),n.forEach(c),this.h()},h(){s(t,"fill-rule","evenodd"),s(t,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),s(t,"clip-rule","evenodd"),s(a,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),s(e,"xmlns","http://www.w3.org/2000/svg"),s(e,"viewBox","0 0 24 24"),s(e,"fill","currentColor"),s(e,"class","w-6 h-6")},m(i,n){X(i,e,n),r(e,t),r(e,a)},d(i){i&&c(e)}}}function ba(l){var J;let e,t,a,i,n,o,h,p,_,f,m,w=l[37].name+"",k,b,y=l[37].filename+"",E,D,V,T,A=l[37].title+"",L,U,P,z,re='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L6.832 19.82a4.5 4.5 0 01-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 011.13-1.897L16.863 4.487zm0 0L19.5 7.125"></path></svg>',$,M,R='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"></path></svg>',Z,K,he,ee;a=new La({props:{state:((J=l[37])==null?void 0:J.selected)??"unchecked"}});function te(g,B){return g[37]?Tr:Ir}let de=te(l),q=de(l);function ie(...g){return l[28](l[37],...g)}function ae(...g){return l[29](l[37],...g)}function le(){return l[30](l[37],l[38],l[39])}return{c(){e=u("button"),t=u("div"),Xe(a.$$.fragment),i=x(),n=u("div"),o=u("div"),h=u("div"),q.c(),p=x(),_=u("div"),f=u("div"),m=C("#"),k=C(w),b=C(" ("),E=C(y),D=C(")"),V=x(),T=u("div"),L=C(A),U=x(),P=u("div"),z=u("button"),z.innerHTML=re,$=x(),M=u("button"),M.innerHTML=R,Z=x(),this.h()},l(g){e=d(g,"BUTTON",{class:!0});var B=v(e);t=d(B,"DIV",{class:!0});var W=v(t);$e(a.$$.fragment,W),W.forEach(c),i=I(B),n=d(B,"DIV",{class:!0});var se=v(n);o=d(se,"DIV",{class:!0});var j=v(o);h=d(j,"DIV",{class:!0});var ve=v(h);q.l(ve),ve.forEach(c),p=I(j),_=d(j,"DIV",{class:!0});var ne=v(_);f=d(ne,"DIV",{class:!0});var pe=v(f);m=H(pe,"#"),k=H(pe,w),b=H(pe," ("),E=H(pe,y),D=H(pe,")"),pe.forEach(c),V=I(ne),T=d(ne,"DIV",{class:!0});var be=v(T);L=H(be,A),be.forEach(c),ne.forEach(c),j.forEach(c),se.forEach(c),U=I(B),P=d(B,"DIV",{class:!0});var N=v(P);z=d(N,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Be(z)!=="svelte-mdhrvt"&&(z.innerHTML=re),$=I(N),M=d(N,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),Be(M)!=="svelte-smh81r"&&(M.innerHTML=R),N.forEach(c),Z=I(B),B.forEach(c),this.h()},h(){s(t,"class","my-auto flex items-center"),s(h,"class","p-2.5 bg-red-400 text-white rounded-lg"),s(f,"class","font-bold line-clamp-1"),s(T,"class","text-xs overflow-hidden text-ellipsis line-clamp-1"),s(_,"class","self-center flex-1"),s(o,"class","flex items-center space-x-3"),s(n,"class","flex flex-1 space-x-4 cursor-pointer w-full"),s(z,"class","self-center w-fit text-sm z-20 px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),s(z,"type","button"),s(M,"class","self-center w-fit text-sm px-2 py-2 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),s(M,"type","button"),s(P,"class","flex flex-row space-x-1 self-center"),s(e,"class","flex space-x-4 cursor-pointer text-left w-full px-3 py-2 dark:hover:bg-white/5 hover:bg-black/5 rounded-xl")},m(g,B){X(g,e,B),r(e,t),et(a,t,null),r(e,i),r(e,n),r(n,o),r(o,h),q.m(h,null),r(o,p),r(o,_),r(_,f),r(f,m),r(f,k),r(f,b),r(f,E),r(f,D),r(_,V),r(_,T),r(T,L),r(e,U),r(e,P),r(P,z),r(P,$),r(P,M),r(e,Z),K=!0,he||(ee=[Y(z,"click",ie),Y(M,"click",ae),Y(e,"click",le)],he=!0)},p(g,B){var se;l=g;const W={};B[0]&2048&&(W.state=((se=l[37])==null?void 0:se.selected)??"unchecked"),a.$set(W),de!==(de=te(l))&&(q.d(1),q=de(l),q&&(q.c(),q.m(h,null))),(!K||B[0]&2048)&&w!==(w=l[37].name+"")&&F(k,w),(!K||B[0]&2048)&&y!==(y=l[37].filename+"")&&F(E,y),(!K||B[0]&2048)&&A!==(A=l[37].title+"")&&F(L,A)},i(g){K||(ge(a.$$.fragment,g),K=!0)},o(g){Ee(a.$$.fragment,g),K=!1},d(g){g&&c(e),tt(a),q.d(),he=!1,mt(ee)}}}function Vr(l){let e,t,a,i=l[9],n,o,h,p,_,f,m,w,k,b,y,E,D,V=l[12].t("My Documents")+"",T,A,L,U,P,z,re,$,M=l[12].t("Document Settings")+"",R,Z,K,he,ee=l[12].t("Use '#' in the prompt input to load and select your documents.")+"",te,de,q,ie,ae,le='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',J,g,B,W,se,j,ve='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',ne,pe,be,N,oe,Ve,Ge,we,Te,Ze,Ie,Pe,Ae=l[12].t("Import Documents Mapping")+"",Le,ze,Oe,it='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 9.5a.75.75 0 0 1-.75-.75V8.06l-.72.72a.75.75 0 0 1-1.06-1.06l2-2a.75.75 0 0 1 1.06 0l2 2a.75.75 0 1 1-1.06 1.06l-.72-.72v2.69a.75.75 0 0 1-.75.75Z" clip-rule="evenodd"></path></svg>',Ke,Me,ke,Ye=l[12].t("Export Documents Mapping")+"",Dt,Qe,Fe,xt='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M4 2a1.5 1.5 0 0 0-1.5 1.5v9A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V6.621a1.5 1.5 0 0 0-.44-1.06L9.94 2.439A1.5 1.5 0 0 0 8.878 2H4Zm4 3.5a.75.75 0 0 1 .75.75v2.69l.72-.72a.75.75 0 1 1 1.06 1.06l-2 2a.75.75 0 0 1-1.06 0l-2-2a.75.75 0 0 1 1.06-1.06l.72.72V6.25A.75.75 0 0 1 8 5.5Z" clip-rule="evenodd"></path></svg>',je,At,gt;Dl.title=e=l[12].t("Documents")+" | "+l[13];let ce=l[10]&&ma(l),Ce=ga(l);function Qt(S){l[19](S)}let _t={};l[7]!==void 0&&(_t.show=l[7]),o=new yr({props:_t}),Bt.push(()=>qt(o,"show",Qt));function ct(S){l[20](S)}let wt={};l[6]!==void 0&&(wt.show=l[6]),_=new mr({props:wt}),Bt.push(()=>qt(_,"show",ct));let me=l[5].length>0&&_a(l),Je=Gt(l[11]),fe=[];for(let S=0;S<Je.length;S+=1)fe[S]=ba(va(l,Je,S));const ut=S=>Ee(fe[S],1,1,()=>{fe[S]=null});return{c(){t=x(),ce&&ce.c(),a=x(),Ce.c(),n=x(),Xe(o.$$.fragment),p=x(),Xe(_.$$.fragment),m=x(),w=u("div"),k=u("div"),b=u("div"),y=u("div"),E=u("div"),D=u("div"),T=C(V),A=x(),L=u("div"),U=u("button"),P=De("svg"),z=De("path"),re=x(),$=u("div"),R=C(M),Z=x(),K=u("div"),he=C("ⓘ "),te=C(ee),de=x(),q=u("div"),ie=u("div"),ae=u("div"),ae.innerHTML=le,J=x(),g=u("input"),W=x(),se=u("div"),j=u("button"),j.innerHTML=ve,ne=x(),pe=u("hr"),be=x(),me&&me.c(),N=x(),oe=u("div");for(let S=0;S<fe.length;S+=1)fe[S].c();Ve=x(),Ge=u("div"),we=u("div"),Te=u("input"),Ze=x(),Ie=u("button"),Pe=u("div"),Le=C(Ae),ze=x(),Oe=u("div"),Oe.innerHTML=it,Ke=x(),Me=u("button"),ke=u("div"),Dt=C(Ye),Qe=x(),Fe=u("div"),Fe.innerHTML=xt,this.h()},l(S){Aa("svelte-1ihck1h",Dl.head).forEach(c),t=I(S),ce&&ce.l(S),a=I(S),Ce.l(S),n=I(S),$e(o.$$.fragment,S),p=I(S),$e(_.$$.fragment,S),m=I(S),w=d(S,"DIV",{class:!0});var qe=v(w);k=d(qe,"DIV",{class:!0});var dt=v(k);b=d(dt,"DIV",{class:!0});var ue=v(b);y=d(ue,"DIV",{class:!0});var He=v(y);E=d(He,"DIV",{class:!0});var lt=v(E);D=d(lt,"DIV",{class:!0});var It=v(D);T=H(It,V),It.forEach(c),A=I(lt),L=d(lt,"DIV",{});var Ct=v(L);U=d(Ct,"BUTTON",{class:!0,type:!0});var Tt=v(U);P=xe(Tt,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var bt=v(P);z=xe(bt,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),v(z).forEach(c),bt.forEach(c),re=I(Tt),$=d(Tt,"DIV",{class:!0});var at=v($);R=H(at,M),at.forEach(c),Tt.forEach(c),Ct.forEach(c),lt.forEach(c),Z=I(He),K=d(He,"DIV",{class:!0});var ft=v(K);he=H(ft,"ⓘ "),te=H(ft,ee),ft.forEach(c),He.forEach(c),de=I(ue),q=d(ue,"DIV",{class:!0});var ht=v(q);ie=d(ht,"DIV",{class:!0});var kt=v(ie);ae=d(kt,"DIV",{class:!0,"data-svelte-h":!0}),Be(ae)!=="svelte-kinl2y"&&(ae.innerHTML=le),J=I(kt),g=d(kt,"INPUT",{class:!0,placeholder:!0}),kt.forEach(c),W=I(ht),se=d(ht,"DIV",{});var jt=v(se);j=d(jt,"BUTTON",{class:!0,"data-svelte-h":!0}),Be(j)!=="svelte-1mfes9a"&&(j.innerHTML=ve),jt.forEach(c),ht.forEach(c),ne=I(ue),pe=d(ue,"HR",{class:!0}),be=I(ue),me&&me.l(ue),N=I(ue),oe=d(ue,"DIV",{class:!0});var yt=v(oe);for(let St=0;St<fe.length;St+=1)fe[St].l(yt);yt.forEach(c),Ve=I(ue),Ge=d(ue,"DIV",{class:!0});var Ne=v(Ge);we=d(Ne,"DIV",{class:!0});var rt=v(we);Te=d(rt,"INPUT",{id:!0,type:!0,accept:!0}),Ze=I(rt),Ie=d(rt,"BUTTON",{class:!0});var Vt=v(Ie);Pe=d(Vt,"DIV",{class:!0});var vt=v(Pe);Le=H(vt,Ae),vt.forEach(c),ze=I(Vt),Oe=d(Vt,"DIV",{class:!0,"data-svelte-h":!0}),Be(Oe)!=="svelte-1ml9hw2"&&(Oe.innerHTML=it),Vt.forEach(c),Ke=I(rt),Me=d(rt,"BUTTON",{class:!0});var st=v(Me);ke=d(st,"DIV",{class:!0});var Mt=v(ke);Dt=H(Mt,Ye),Mt.forEach(c),Qe=I(st),Fe=d(st,"DIV",{class:!0,"data-svelte-h":!0}),Be(Fe)!=="svelte-12vm9hf"&&(Fe.innerHTML=xt),st.forEach(c),rt.forEach(c),Ne.forEach(c),ue.forEach(c),dt.forEach(c),qe.forEach(c),this.h()},h(){s(D,"class","text-2xl font-semibold self-center"),s(z,"fill-rule","evenodd"),s(z,"d","M6.955 1.45A.5.5 0 0 1 7.452 1h1.096a.5.5 0 0 1 .497.45l.17 1.699c.484.12.94.312 1.356.562l1.321-1.081a.5.5 0 0 1 .67.033l.774.775a.5.5 0 0 1 .034.67l-1.08 1.32c.25.417.44.873.561 1.357l1.699.17a.5.5 0 0 1 .45.497v1.096a.5.5 0 0 1-.45.497l-1.699.17c-.12.484-.312.94-.562 1.356l1.082 1.322a.5.5 0 0 1-.034.67l-.774.774a.5.5 0 0 1-.67.033l-1.322-1.08c-.416.25-.872.44-1.356.561l-.17 1.699a.5.5 0 0 1-.497.45H7.452a.5.5 0 0 1-.497-.45l-.17-1.699a4.973 4.973 0 0 1-1.356-.562L4.108 13.37a.5.5 0 0 1-.67-.033l-.774-.775a.5.5 0 0 1-.034-.67l1.08-1.32a4.971 4.971 0 0 1-.561-1.357l-1.699-.17A.5.5 0 0 1 1 8.548V7.452a.5.5 0 0 1 .45-.497l1.699-.17c.12-.484.312-.94.562-1.356L2.629 4.107a.5.5 0 0 1 .034-.67l.774-.774a.5.5 0 0 1 .67-.033L5.43 3.71a4.97 4.97 0 0 1 1.356-.561l.17-1.699ZM6 8c0 .538.212 1.026.558 1.385l.057.057a2 2 0 0 0 2.828-2.828l-.058-.056A2 2 0 0 0 6 8Z"),s(z,"clip-rule","evenodd"),s(P,"xmlns","http://www.w3.org/2000/svg"),s(P,"viewBox","0 0 16 16"),s(P,"fill","currentColor"),s(P,"class","w-4 h-4"),s($,"class","text-xs"),s(U,"class","flex items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition"),s(U,"type","button"),s(E,"class","flex justify-between items-center"),s(K,"class","text-gray-500 text-xs mt-1"),s(y,"class","mb-6"),s(ae,"class","self-center ml-1 mr-3"),s(g,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),s(g,"placeholder",B=l[12].t("Search Documents")),s(ie,"class","flex flex-1"),s(j,"class","px-2 py-2 rounded-xl border border-gray-200 dark:border-gray-600 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1"),s(q,"class","flex w-full space-x-2"),s(pe,"class","dark:border-gray-700 my-2.5"),s(oe,"class","my-3 mb-5"),s(Te,"id","documents-import-input"),s(Te,"type","file"),s(Te,"accept",".json"),Te.hidden=!0,s(Pe,"class","self-center mr-2 font-medium"),s(Oe,"class","self-center"),s(Ie,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),s(ke,"class","self-center mr-2 font-medium"),s(Fe,"class","self-center"),s(Me,"class","flex text-xs items-center space-x-1 px-3 py-1.5 rounded-xl bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200 transition"),s(we,"class","flex space-x-2"),s(Ge,"class","flex justify-end w-full mb-2"),s(b,"class","max-w-2xl mx-auto w-full px-3 md:px-0 my-10"),s(k,"class","flex flex-col justify-between w-full overflow-y-auto"),s(w,"class","min-h-screen max-h-[100dvh] w-full flex justify-center dark:text-white")},m(S,G){X(S,t,G),ce&&ce.m(S,G),X(S,a,G),Ce.m(S,G),X(S,n,G),et(o,S,G),X(S,p,G),et(_,S,G),X(S,m,G),X(S,w,G),r(w,k),r(k,b),r(b,y),r(y,E),r(E,D),r(D,T),r(E,A),r(E,L),r(L,U),r(U,P),r(P,z),r(U,re),r(U,$),r($,R),r(y,Z),r(y,K),r(K,he),r(K,te),r(b,de),r(b,q),r(q,ie),r(ie,ae),r(ie,J),r(ie,g),_e(g,l[0]),r(q,W),r(q,se),r(se,j),r(b,ne),r(b,pe),r(b,be),me&&me.m(b,null),r(b,N),r(b,oe);for(let qe=0;qe<fe.length;qe+=1)fe[qe]&&fe[qe].m(oe,null);r(b,Ve),r(b,Ge),r(Ge,we),r(we,Te),l[31](Te),r(we,Ze),r(we,Ie),r(Ie,Pe),r(Pe,Le),r(Ie,ze),r(Ie,Oe),r(we,Ke),r(we,Me),r(Me,ke),r(ke,Dt),r(Me,Qe),r(Me,Fe),je=!0,At||(gt=[Y(U,"click",l[21]),Y(g,"input",l[22]),Y(j,"click",l[23]),Y(Te,"change",l[32]),Y(Te,"change",l[33]),Y(Ie,"click",l[34]),Y(Me,"click",l[35])],At=!0)},p(S,G){(!je||G[0]&12288)&&e!==(e=S[12].t("Documents")+" | "+S[13])&&(Dl.title=e),S[10]?ce?G[0]&1024&&ge(ce,1):(ce=ma(S),ce.c(),ge(ce,1),ce.m(a.parentNode,a)):ce&&(Wt(),Ee(ce,1,1,()=>{ce=null}),Xt()),G[0]&512&&Ot(i,i=S[9])?(Wt(),Ee(Ce,1,1,Zt),Xt(),Ce=ga(S),Ce.c(),ge(Ce,1),Ce.m(n.parentNode,n)):Ce.p(S,G);const qe={};!h&&G[0]&128&&(h=!0,qe.show=S[7],Ft(()=>h=!1)),o.$set(qe);const dt={};if(!f&&G[0]&64&&(f=!0,dt.show=S[6],Ft(()=>f=!1)),_.$set(dt),(!je||G[0]&4096)&&V!==(V=S[12].t("My Documents")+"")&&F(T,V),(!je||G[0]&4096)&&M!==(M=S[12].t("Document Settings")+"")&&F(R,M),(!je||G[0]&4096)&&ee!==(ee=S[12].t("Use '#' in the prompt input to load and select your documents.")+"")&&F(te,ee),(!je||G[0]&4096&&B!==(B=S[12].t("Search Documents")))&&s(g,"placeholder",B),G[0]&1&&g.value!==S[0]&&_e(g,S[0]),S[5].length>0?me?(me.p(S,G),G[0]&32&&ge(me,1)):(me=_a(S),me.c(),ge(me,1),me.m(b,N)):me&&(Wt(),Ee(me,1,1,()=>{me=null}),Xt()),G[0]&68352){Je=Gt(S[11]);let ue;for(ue=0;ue<Je.length;ue+=1){const He=va(S,Je,ue);fe[ue]?(fe[ue].p(He,G),ge(fe[ue],1)):(fe[ue]=ba(He),fe[ue].c(),ge(fe[ue],1),fe[ue].m(oe,null))}for(Wt(),ue=Je.length;ue<fe.length;ue+=1)ut(ue);Xt()}(!je||G[0]&4096)&&Ae!==(Ae=S[12].t("Import Documents Mapping")+"")&&F(Le,Ae),(!je||G[0]&4096)&&Ye!==(Ye=S[12].t("Export Documents Mapping")+"")&&F(Dt,Ye)},i(S){if(!je){ge(ce),ge(Ce),ge(o.$$.fragment,S),ge(_.$$.fragment,S),ge(me);for(let G=0;G<Je.length;G+=1)ge(fe[G]);je=!0}},o(S){Ee(ce),Ee(Ce),Ee(o.$$.fragment,S),Ee(_.$$.fragment,S),Ee(me),fe=fe.filter(Boolean);for(let G=0;G<fe.length;G+=1)Ee(fe[G]);je=!1},d(S){S&&(c(t),c(a),c(n),c(p),c(m),c(w)),ce&&ce.d(S),Ce.d(S),tt(o,S),tt(_,S),me&&me.d(),Tl(fe,S),l[31](null),At=!1,mt(gt)}}}const Mr=l=>(l==null?void 0:l.selected)==="checked",ka=l=>(l==null?void 0:l.selected)==="checked",ya=l=>(l==null?void 0:l.selected)==="checked",Ea=l=>(l==null?void 0:l.selected)==="checked",Da=l=>(l==null?void 0:l.selected)==="checked";function Sr(l,e,t){let a,i,n;Lt(l,We,g=>t(2,a=g)),Lt(l,ja,g=>t(13,n=g));const{saveAs:o}=Ha,h=$t("i18n");Lt(l,h,g=>t(12,i=g));let p="",_="",f,m=[],w=!1,k=!1,b=!1,y,E="",D=!1;const V=async g=>{await na(localStorage.token,g),await We.set(await pt(localStorage.token))},T=async g=>{await Promise.all(g.map(async B=>await na(localStorage.token,B.name))),await We.set(await pt(localStorage.token))},A=async g=>{const B=await Va(localStorage.token,"",g).catch(W=>(Se.error(W),null));B&&(await xl(localStorage.token,B.collection_name,B.filename,Ma(B.filename),B.filename).catch(W=>(Se.error(W),null)),await We.set(await pt(localStorage.token)))};_l(()=>{We.subscribe(j=>{t(5,m=j.reduce((ve,ne,pe,be)=>{var N;return[...new Set([...ve,...(((N=ne==null?void 0:ne.content)==null?void 0:N.tags)??[]).map(oe=>oe.name)])]},[]))});const g=document.querySelector("body"),B=j=>{j.preventDefault(),t(10,D=!0)},W=()=>{t(10,D=!1)},se=async j=>{var ve,ne;if(j.preventDefault(),console.log(j),(ve=j.dataTransfer)!=null&&ve.files){let pe=new FileReader;pe.onload=N=>{files=[...files,{type:"image",url:`${N.target.result}`}]};const be=(ne=j.dataTransfer)==null?void 0:ne.files;if(be&&be.length>0)for(const N of be)console.log(N,N.name.split(".").at(-1)),Ia.includes(N.type)||Ta.includes(N.name.split(".").at(-1))||Se.error(`Unknown File Type '${N.type}', but accepting and treating as plain text`),A(N);else Se.error(i.t("File not found."))}t(10,D=!1)};return g==null||g.addEventListener("dragover",B),g==null||g.addEventListener("drop",se),g==null||g.addEventListener("dragleave",W),()=>{g==null||g.removeEventListener("dragover",B),g==null||g.removeEventListener("drop",se),g==null||g.removeEventListener("dragleave",W)}});let L;function U(g){b=g,t(8,b)}function P(g){k=g,t(7,k)}function z(g){w=g,t(6,w)}const re=()=>{t(6,w=!w)};function $(){_=this.value,t(0,_)}const M=()=>{t(7,k=!0)},R=g=>{g.detail==="checked"?t(11,L=L.map(B=>({...B,selected:"checked"}))):g.detail==="unchecked"&&t(11,L=L.map(B=>({...B,selected:"unchecked"})))},Z=async()=>{t(1,E="")},K=async g=>{t(1,E=g)},he=async()=>{T(L.filter(g=>g.selected==="checked"))},ee=async(g,B)=>{B.stopPropagation(),t(8,b=!b),t(9,y=g)},te=(g,B)=>{B.stopPropagation(),V(g.name)},de=(g,B,W)=>{(g==null?void 0:g.selected)==="checked"?t(11,B[W].selected="unchecked",L):t(11,B[W].selected="checked",L)};function q(g){Bt[g?"unshift":"push"](()=>{f=g,t(4,f)})}function ie(){p=this.files,t(3,p)}const ae=()=>{console.log(p);const g=new FileReader;g.onload=async B=>{const W=JSON.parse(B.target.result);console.log(W);for(const se of W)await xl(localStorage.token,se.collection_name,se.filename,se.name,se.title).catch(j=>(Se.error(j),null));await We.set(await pt(localStorage.token))},g.readAsText(p[0])},le=()=>{f.click()},J=async()=>{let g=new Blob([JSON.stringify(a)],{type:"application/json"});o(g,`documents-mapping-export-${Date.now()}.json`)};return l.$$.update=()=>{l.$$.dirty[0]&7&&t(11,L=a.filter(g=>{var B;return(E===""||(((B=g==null?void 0:g.content)==null?void 0:B.tags)??[]).map(W=>W.name).includes(E))&&(_===""||g.name.includes(_))}))},[_,E,a,p,f,m,w,k,b,y,D,L,i,n,o,h,V,T,U,P,z,re,$,M,R,Z,K,he,ee,te,de,q,ie,ae,le,J]}class Zr extends Yt{constructor(e){super(),Kt(this,e,Sr,Vr,Ot,{},null,[-1,-1])}}export{Zr as component};
