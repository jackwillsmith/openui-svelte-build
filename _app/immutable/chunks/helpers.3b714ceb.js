import{O as ot}from"./index.3cc0610f.js";import{p as Ae}from"./index.1bdba4f5.js";import{v as Oe,n as it,j as Ee,i as j,w as Se,r as kt,u as Pe,e as Rt,h as Q}from"./create.76372bae.js";import{d as Ce,w as Ft,r as zt}from"./index.7c7f65a8.js";import{a1 as Ne,t as Re}from"./scheduler.4a29073b.js";const Ao=async(e="")=>{let t=null;const n=await fetch(`${ot}/urls`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(console.log(o),"detail"in o?t=o.detail:t="Server connection failed",null));if(t)throw t;return n.OPENAI_API_BASE_URLS},Oo=async(e="",t)=>{let n=null;const o=await fetch(`${ot}/urls/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify({urls:t})}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).catch(i=>(console.log(i),"detail"in i?n=i.detail:n="Server connection failed",null));if(n)throw n;return o.OPENAI_API_BASE_URLS},Eo=async(e="")=>{let t=null;const n=await fetch(`${ot}/keys`,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}}}).then(async o=>{if(!o.ok)throw await o.json();return o.json()}).catch(o=>(console.log(o),"detail"in o?t=o.detail:t="Server connection failed",null));if(t)throw t;return n.OPENAI_API_KEYS},So=async(e="",t)=>{let n=null;const o=await fetch(`${ot}/keys/update`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...e&&{authorization:`Bearer ${e}`}},body:JSON.stringify({keys:t})}).then(async i=>{if(!i.ok)throw await i.json();return i.json()}).catch(i=>(console.log(i),"detail"in i?n=i.detail:n="Server connection failed",null));if(n)throw n;return o.OPENAI_API_KEYS},Po=async(e="",t,n=ot)=>{let o=null;const i=await fetch(`${n}/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(a=>(console.log(a),o=a,null));if(o)throw o;return i},Co=async(e="",t,n,o,i=ot)=>{var c,s;let a=null;t=Ae(t,o),console.log(t);const r=await fetch(`${i}/chat/completions`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({model:n,messages:[{role:"user",content:t}],stream:!1})}).then(async l=>{if(!l.ok)throw await l.json();return l.json()}).catch(l=>(console.log(l),"detail"in l&&(a=l.detail),null));if(a)throw a;return((s=(c=r==null?void 0:r.choices[0])==null?void 0:c.message)==null?void 0:s.content)??"New Chat"};function No(e,t,n,o=!0){const i=t-n;return i<=0?o?e[e.length-1]:e[0]:e[i]}function Ro(e,t,n,o=!0){const i=t+n;return i>e.length-1?o?e[0]:e[e.length-1]:e[i]}function Fo(e,t,n=!0){return t===e.length-1?n?e[0]:e[t]:e[t+1]}function Do(e,t,n=!0){return t<=0?n?e[e.length-1]:e[0]:e[t-1]}function Fe(e){return e[e.length-1]}function De(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function Io(e,t,n=Oe){const o=t.findIndex(i=>n(i,e));return o!==-1?t.splice(o,1):t.push(e),t}function Lo(e){e.setAttribute("data-highlighted","")}function ko(e){e.removeAttribute("data-highlighted")}function ne(e){return new Promise(t=>setTimeout(t,e))}let Ie="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",Le=(e=21)=>{let t="",n=e;for(;n--;)t+=Ie[Math.random()*64|0];return t};function ke(){return Le(10)}function Mo(e){return e.reduce((t,n)=>(t[n]=ke(),t),{})}function Me(e,t=500){let n=null;return function(...o){const i=()=>{n=null,e(...o)};n&&clearTimeout(n),n=setTimeout(i,t)}}const oe=()=>typeof window<"u";function Be(){const e=navigator.userAgentData;return(e==null?void 0:e.platform)??navigator.platform}const ie=e=>oe()&&e.test(Be().toLowerCase()),je=()=>oe()&&!!navigator.maxTouchPoints,$e=()=>ie(/^mac/)&&!je(),We=()=>ie(/mac|iphone|ipad|ipod/i),Ve=()=>We()&&!$e(),Ct="data-melt-scroll-lock";function Ht(e,t){if(!e)return;const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function Ke(e,t,n){if(!e)return;const o=e.style.getPropertyValue(t);return e.style.setProperty(t,n),()=>{o?e.style.setProperty(t,o):e.style.removeProperty(t)}}function ze(e){const t=e.getBoundingClientRect().left;return Math.round(t)+e.scrollLeft?"paddingLeft":"paddingRight"}function Bo(e){const t=e??document,n=t.defaultView??window,{documentElement:o,body:i}=t;if(i.hasAttribute(Ct))return it;i.setAttribute(Ct,"");const r=n.innerWidth-o.clientWidth,c=()=>Ke(o,"--scrollbar-width",`${r}px`),s=ze(o),l=n.getComputedStyle(i)[s],p=()=>Ht(i,{overflow:"hidden",[s]:`calc(${l} + ${r}px)`}),d=()=>{const{scrollX:h,scrollY:v,visualViewport:m}=n,y=(m==null?void 0:m.offsetLeft)??0,w=(m==null?void 0:m.offsetTop)??0,x=Ht(i,{position:"fixed",overflow:"hidden",top:`${-(v-Math.floor(w))}px`,left:`${-(h-Math.floor(y))}px`,right:"0",[s]:`calc(${l} + ${r}px)`});return()=>{x==null||x(),n.scrollTo(h,v)}},g=[c(),Ve()?d():p()];return()=>{g.forEach(h=>h==null?void 0:h()),i.removeAttribute(Ct)}}function jo(e){const{open:t,forceVisible:n,activeTrigger:o}=e;return Ce([t,n,o],([i,a,r])=>(i||a)&&r!==null)}function He(e){Ee&&ne(1).then(()=>{const t=document.activeElement;!j(t)||t===e||(t.tabIndex=-1,e&&(e.tabIndex=0,e.focus()))})}function re(){return Array.from(document.querySelectorAll('a[href]:not([tabindex="-1"]), button:not([disabled]):not([tabindex="-1"]), input:not([disabled]):not([tabindex="-1"]), select:not([disabled]):not([tabindex="-1"]), textarea:not([disabled]):not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])'))}function $o(e){const t=re(),o=t.indexOf(e)+1,i=t[o];return o<t.length&&j(i)?i:null}function Wo(e){const t=re(),o=t.indexOf(e)-1,i=t[o];return o>=0&&j(i)?i:null}const Ue=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),qe={onMatch:He,getCurrentItem:()=>document.activeElement};function Vo(e={}){const t={...qe,...e},n=Se(Ft([])),o=Me(()=>{n.update(()=>[])});return{typed:n,resetTyped:o,handleTypeaheadSearch:(a,r)=>{if(Ue.has(a))return;const c=t.getCurrentItem(),s=Ne(n);if(!Array.isArray(s))return;s.push(a.toLowerCase()),n.set(s);const l=r.filter(y=>!(y.getAttribute("disabled")==="true"||y.getAttribute("aria-disabled")==="true"||y.hasAttribute("data-disabled"))),d=s.length>1&&s.every(y=>y===s[0])?s[0]:s.join(""),g=j(c)?l.indexOf(c):-1;let h=De(l,Math.max(g,0));d.length===1&&(h=h.filter(y=>y!==c));const m=h.find(y=>(y==null?void 0:y.innerText)&&y.innerText.toLowerCase().startsWith(d.toLowerCase()));j(m)&&m!==c&&t.onMatch(m),o()}}}function Ye(e){let t=e.parentElement;for(;j(t)&&!t.hasAttribute("data-portal");)t=t.parentElement;return t||"body"}function Ko(e,t){return t!==void 0?t:Ye(e)==="body"?document.body:null}const U=Math.min,L=Math.max,bt=Math.round,ht=Math.floor,q=e=>({x:e,y:e}),Ge={left:"right",right:"left",bottom:"top",top:"bottom"},_e={start:"end",end:"start"};function Dt(e,t,n){return L(e,U(t,n))}function rt(e,t){return typeof e=="function"?e(t):e}function Y(e){return e.split("-")[0]}function at(e){return e.split("-")[1]}function ae(e){return e==="x"?"y":"x"}function Mt(e){return e==="y"?"height":"width"}function dt(e){return["top","bottom"].includes(Y(e))?"y":"x"}function Bt(e){return ae(dt(e))}function Xe(e,t,n){n===void 0&&(n=!1);const o=at(e),i=Bt(e),a=Mt(i);let r=i==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(r=gt(r)),[r,gt(r)]}function Je(e){const t=gt(e);return[It(e),t,It(t)]}function It(e){return e.replace(/start|end/g,t=>_e[t])}function Ze(e,t,n){const o=["left","right"],i=["right","left"],a=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:o:t?o:i;case"left":case"right":return t?a:r;default:return[]}}function Qe(e,t,n,o){const i=at(e);let a=Ze(Y(e),n==="start",o);return i&&(a=a.map(r=>r+"-"+i),t&&(a=a.concat(a.map(It)))),a}function gt(e){return e.replace(/left|right|bottom|top/g,t=>Ge[t])}function tn(e){return{top:0,right:0,bottom:0,left:0,...e}}function se(e){return typeof e!="number"?tn(e):{top:e,right:e,bottom:e,left:e}}function yt(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Ut(e,t,n){let{reference:o,floating:i}=e;const a=dt(t),r=Bt(t),c=Mt(r),s=Y(t),l=a==="y",p=o.x+o.width/2-i.width/2,d=o.y+o.height/2-i.height/2,g=o[c]/2-i[c]/2;let h;switch(s){case"top":h={x:p,y:o.y-i.height};break;case"bottom":h={x:p,y:o.y+o.height};break;case"right":h={x:o.x+o.width,y:d};break;case"left":h={x:o.x-i.width,y:d};break;default:h={x:o.x,y:o.y}}switch(at(t)){case"start":h[r]-=g*(n&&l?-1:1);break;case"end":h[r]+=g*(n&&l?-1:1);break}return h}const en=async(e,t,n)=>{const{placement:o="bottom",strategy:i="absolute",middleware:a=[],platform:r}=n,c=a.filter(Boolean),s=await(r.isRTL==null?void 0:r.isRTL(t));let l=await r.getElementRects({reference:e,floating:t,strategy:i}),{x:p,y:d}=Ut(l,o,s),g=o,h={},v=0;for(let m=0;m<c.length;m++){const{name:y,fn:w}=c[m],{x,y:E,data:C,reset:P}=await w({x:p,y:d,initialPlacement:o,placement:g,strategy:i,middlewareData:h,rects:l,platform:r,elements:{reference:e,floating:t}});p=x??p,d=E??d,h={...h,[y]:{...h[y],...C}},P&&v<=50&&(v++,typeof P=="object"&&(P.placement&&(g=P.placement),P.rects&&(l=P.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:i}):P.rects),{x:p,y:d}=Ut(l,g,s)),m=-1)}return{x:p,y:d,placement:g,strategy:i,middlewareData:h}};async function jt(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:a,rects:r,elements:c,strategy:s}=e,{boundary:l="clippingAncestors",rootBoundary:p="viewport",elementContext:d="floating",altBoundary:g=!1,padding:h=0}=rt(t,e),v=se(h),y=c[g?d==="floating"?"reference":"floating":d],w=yt(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(y)))==null||n?y:y.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:l,rootBoundary:p,strategy:s})),x=d==="floating"?{...r.floating,x:o,y:i}:r.reference,E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),C=await(a.isElement==null?void 0:a.isElement(E))?await(a.getScale==null?void 0:a.getScale(E))||{x:1,y:1}:{x:1,y:1},P=yt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:x,offsetParent:E,strategy:s}):x);return{top:(w.top-P.top+v.top)/C.y,bottom:(P.bottom-w.bottom+v.bottom)/C.y,left:(w.left-P.left+v.left)/C.x,right:(P.right-w.right+v.right)/C.x}}const nn=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:a,platform:r,elements:c,middlewareData:s}=t,{element:l,padding:p=0}=rt(e,t)||{};if(l==null)return{};const d=se(p),g={x:n,y:o},h=Bt(i),v=Mt(h),m=await r.getDimensions(l),y=h==="y",w=y?"top":"left",x=y?"bottom":"right",E=y?"clientHeight":"clientWidth",C=a.reference[v]+a.reference[h]-g[h]-a.floating[v],P=g[h]-a.reference[h],N=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l));let F=N?N[E]:0;(!F||!await(r.isElement==null?void 0:r.isElement(N)))&&(F=c.floating[E]||a.floating[v]);const M=C/2-P/2,B=F/2-m[v]/2-1,W=U(d[w],B),S=U(d[x],B),u=W,f=F-m[v]-S,b=F/2-m[v]/2+M,T=Dt(u,b,f),A=!s.arrow&&at(i)!=null&&b!==T&&a.reference[v]/2-(b<u?W:S)-m[v]/2<0,O=A?b<u?b-u:b-f:0;return{[h]:g[h]+O,data:{[h]:T,centerOffset:b-T-O,...A&&{alignmentOffset:O}},reset:A}}}),on=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:a,rects:r,initialPlacement:c,platform:s,elements:l}=t,{mainAxis:p=!0,crossAxis:d=!0,fallbackPlacements:g,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,...y}=rt(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const w=Y(i),x=Y(c)===c,E=await(s.isRTL==null?void 0:s.isRTL(l.floating)),C=g||(x||!m?[gt(c)]:Je(c));!g&&v!=="none"&&C.push(...Qe(c,m,v,E));const P=[c,...C],N=await jt(t,y),F=[];let M=((o=a.flip)==null?void 0:o.overflows)||[];if(p&&F.push(N[w]),d){const u=Xe(i,r,E);F.push(N[u[0]],N[u[1]])}if(M=[...M,{placement:i,overflows:F}],!F.every(u=>u<=0)){var B,W;const u=(((B=a.flip)==null?void 0:B.index)||0)+1,f=P[u];if(f)return{data:{index:u,overflows:M},reset:{placement:f}};let b=(W=M.filter(T=>T.overflows[0]<=0).sort((T,A)=>T.overflows[1]-A.overflows[1])[0])==null?void 0:W.placement;if(!b)switch(h){case"bestFit":{var S;const T=(S=M.map(A=>[A.placement,A.overflows.filter(O=>O>0).reduce((O,R)=>O+R,0)]).sort((A,O)=>A[1]-O[1])[0])==null?void 0:S[0];T&&(b=T);break}case"initialPlacement":b=c;break}if(i!==b)return{reset:{placement:b}}}return{}}}};async function rn(e,t){const{placement:n,platform:o,elements:i}=e,a=await(o.isRTL==null?void 0:o.isRTL(i.floating)),r=Y(n),c=at(n),s=dt(n)==="y",l=["left","top"].includes(r)?-1:1,p=a&&s?-1:1,d=rt(t,e);let{mainAxis:g,crossAxis:h,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return c&&typeof v=="number"&&(h=c==="end"?v*-1:v),s?{x:h*p,y:g*l}:{x:g*l,y:h*p}}const an=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:a,placement:r,middlewareData:c}=t,s=await rn(t,e);return r===((n=c.offset)==null?void 0:n.placement)&&(o=c.arrow)!=null&&o.alignmentOffset?{}:{x:i+s.x,y:a+s.y,data:{...s,placement:r}}}}},sn=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:a=!0,crossAxis:r=!1,limiter:c={fn:y=>{let{x:w,y:x}=y;return{x:w,y:x}}},...s}=rt(e,t),l={x:n,y:o},p=await jt(t,s),d=dt(Y(i)),g=ae(d);let h=l[g],v=l[d];if(a){const y=g==="y"?"top":"left",w=g==="y"?"bottom":"right",x=h+p[y],E=h-p[w];h=Dt(x,h,E)}if(r){const y=d==="y"?"top":"left",w=d==="y"?"bottom":"right",x=v+p[y],E=v-p[w];v=Dt(x,v,E)}const m=c.fn({...t,[g]:h,[d]:v});return{...m,data:{x:m.x-n,y:m.y-o}}}}},cn=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:o,platform:i,elements:a}=t,{apply:r=()=>{},...c}=rt(e,t),s=await jt(t,c),l=Y(n),p=at(n),d=dt(n)==="y",{width:g,height:h}=o.floating;let v,m;l==="top"||l==="bottom"?(v=l,m=p===(await(i.isRTL==null?void 0:i.isRTL(a.floating))?"start":"end")?"left":"right"):(m=l,v=p==="end"?"top":"bottom");const y=h-s[v],w=g-s[m],x=!t.middlewareData.shift;let E=y,C=w;if(d){const N=g-s.left-s.right;C=p||x?U(w,N):N}else{const N=h-s.top-s.bottom;E=p||x?U(y,N):N}if(x&&!p){const N=L(s.left,0),F=L(s.right,0),M=L(s.top,0),B=L(s.bottom,0);d?C=g-2*(N!==0||F!==0?N+F:L(s.left,s.right)):E=h-2*(M!==0||B!==0?M+B:L(s.top,s.bottom))}await r({...t,availableWidth:C,availableHeight:E});const P=await i.getDimensions(a.floating);return g!==P.width||h!==P.height?{reset:{rects:!0}}:{}}}};function G(e){return ce(e)?(e.nodeName||"").toLowerCase():"#document"}function k(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function z(e){var t;return(t=(ce(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ce(e){return e instanceof Node||e instanceof k(e).Node}function K(e){return e instanceof Element||e instanceof k(e).Element}function V(e){return e instanceof HTMLElement||e instanceof k(e).HTMLElement}function qt(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof k(e).ShadowRoot}function pt(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=$(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(i)}function ln(e){return["table","td","th"].includes(G(e))}function $t(e){const t=Wt(),n=$(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function un(e){let t=nt(e);for(;V(t)&&!Ot(t);){if($t(t))return t;t=nt(t)}return null}function Wt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ot(e){return["html","body","#document"].includes(G(e))}function $(e){return k(e).getComputedStyle(e)}function Et(e){return K(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function nt(e){if(G(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qt(e)&&e.host||z(e);return qt(t)?t.host:t}function le(e){const t=nt(e);return Ot(t)?e.ownerDocument?e.ownerDocument.body:e.body:V(t)&&pt(t)?t:le(t)}function ft(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=le(e),a=i===((o=e.ownerDocument)==null?void 0:o.body),r=k(i);return a?t.concat(r,r.visualViewport||[],pt(i)?i:[],r.frameElement&&n?ft(r.frameElement):[]):t.concat(i,ft(i,[],n))}function ue(e){const t=$(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=V(e),a=i?e.offsetWidth:n,r=i?e.offsetHeight:o,c=bt(n)!==a||bt(o)!==r;return c&&(n=a,o=r),{width:n,height:o,$:c}}function Vt(e){return K(e)?e:e.contextElement}function et(e){const t=Vt(e);if(!V(t))return q(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:a}=ue(t);let r=(a?bt(n.width):n.width)/o,c=(a?bt(n.height):n.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!c||!Number.isFinite(c))&&(c=1),{x:r,y:c}}const fn=q(0);function fe(e){const t=k(e);return!Wt()||!t.visualViewport?fn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dn(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==k(e)?!1:t}function J(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=Vt(e);let r=q(1);t&&(o?K(o)&&(r=et(o)):r=et(e));const c=dn(a,n,o)?fe(a):q(0);let s=(i.left+c.x)/r.x,l=(i.top+c.y)/r.y,p=i.width/r.x,d=i.height/r.y;if(a){const g=k(a),h=o&&K(o)?k(o):o;let v=g,m=v.frameElement;for(;m&&o&&h!==v;){const y=et(m),w=m.getBoundingClientRect(),x=$(m),E=w.left+(m.clientLeft+parseFloat(x.paddingLeft))*y.x,C=w.top+(m.clientTop+parseFloat(x.paddingTop))*y.y;s*=y.x,l*=y.y,p*=y.x,d*=y.y,s+=E,l+=C,v=k(m),m=v.frameElement}}return yt({width:p,height:d,x:s,y:l})}const pn=[":popover-open",":modal"];function de(e){return pn.some(t=>{try{return e.matches(t)}catch{return!1}})}function hn(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e;const a=i==="fixed",r=z(o),c=t?de(t.floating):!1;if(o===r||c&&a)return n;let s={scrollLeft:0,scrollTop:0},l=q(1);const p=q(0),d=V(o);if((d||!d&&!a)&&((G(o)!=="body"||pt(r))&&(s=Et(o)),V(o))){const g=J(o);l=et(o),p.x=g.x+o.clientLeft,p.y=g.y+o.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-s.scrollLeft*l.x+p.x,y:n.y*l.y-s.scrollTop*l.y+p.y}}function vn(e){return Array.from(e.getClientRects())}function pe(e){return J(z(e)).left+Et(e).scrollLeft}function mn(e){const t=z(e),n=Et(e),o=e.ownerDocument.body,i=L(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),a=L(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let r=-n.scrollLeft+pe(e);const c=-n.scrollTop;return $(o).direction==="rtl"&&(r+=L(t.clientWidth,o.clientWidth)-i),{width:i,height:a,x:r,y:c}}function bn(e,t){const n=k(e),o=z(e),i=n.visualViewport;let a=o.clientWidth,r=o.clientHeight,c=0,s=0;if(i){a=i.width,r=i.height;const l=Wt();(!l||l&&t==="fixed")&&(c=i.offsetLeft,s=i.offsetTop)}return{width:a,height:r,x:c,y:s}}function gn(e,t){const n=J(e,!0,t==="fixed"),o=n.top+e.clientTop,i=n.left+e.clientLeft,a=V(e)?et(e):q(1),r=e.clientWidth*a.x,c=e.clientHeight*a.y,s=i*a.x,l=o*a.y;return{width:r,height:c,x:s,y:l}}function Yt(e,t,n){let o;if(t==="viewport")o=bn(e,n);else if(t==="document")o=mn(z(e));else if(K(t))o=gn(t,n);else{const i=fe(e);o={...t,x:t.x-i.x,y:t.y-i.y}}return yt(o)}function he(e,t){const n=nt(e);return n===t||!K(n)||Ot(n)?!1:$(n).position==="fixed"||he(n,t)}function yn(e,t){const n=t.get(e);if(n)return n;let o=ft(e,[],!1).filter(c=>K(c)&&G(c)!=="body"),i=null;const a=$(e).position==="fixed";let r=a?nt(e):e;for(;K(r)&&!Ot(r);){const c=$(r),s=$t(r);!s&&c.position==="fixed"&&(i=null),(a?!s&&!i:!s&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||pt(r)&&!s&&he(e,r))?o=o.filter(p=>p!==r):i=c,r=nt(r)}return t.set(e,o),o}function wn(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const r=[...n==="clippingAncestors"?yn(t,this._c):[].concat(n),o],c=r[0],s=r.reduce((l,p)=>{const d=Yt(t,p,i);return l.top=L(d.top,l.top),l.right=U(d.right,l.right),l.bottom=U(d.bottom,l.bottom),l.left=L(d.left,l.left),l},Yt(t,c,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function xn(e){const{width:t,height:n}=ue(e);return{width:t,height:n}}function Tn(e,t,n){const o=V(t),i=z(t),a=n==="fixed",r=J(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const s=q(0);if(o||!o&&!a)if((G(t)!=="body"||pt(i))&&(c=Et(t)),o){const d=J(t,!0,a,t);s.x=d.x+t.clientLeft,s.y=d.y+t.clientTop}else i&&(s.x=pe(i));const l=r.left+c.scrollLeft-s.x,p=r.top+c.scrollTop-s.y;return{x:l,y:p,width:r.width,height:r.height}}function Gt(e,t){return!V(e)||$(e).position==="fixed"?null:t?t(e):e.offsetParent}function ve(e,t){const n=k(e);if(!V(e)||de(e))return n;let o=Gt(e,t);for(;o&&ln(o)&&$(o).position==="static";)o=Gt(o,t);return o&&(G(o)==="html"||G(o)==="body"&&$(o).position==="static"&&!$t(o))?n:o||un(e)||n}const An=async function(e){const t=this.getOffsetParent||ve,n=this.getDimensions;return{reference:Tn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await n(e.floating)}}};function On(e){return $(e).direction==="rtl"}const En={convertOffsetParentRelativeRectToViewportRelativeRect:hn,getDocumentElement:z,getClippingRect:wn,getOffsetParent:ve,getElementRects:An,getClientRects:vn,getDimensions:xn,getScale:et,isElement:K,isRTL:On};function Sn(e,t){let n=null,o;const i=z(e);function a(){var c;clearTimeout(o),(c=n)==null||c.disconnect(),n=null}function r(c,s){c===void 0&&(c=!1),s===void 0&&(s=1),a();const{left:l,top:p,width:d,height:g}=e.getBoundingClientRect();if(c||t(),!d||!g)return;const h=ht(p),v=ht(i.clientWidth-(l+d)),m=ht(i.clientHeight-(p+g)),y=ht(l),x={rootMargin:-h+"px "+-v+"px "+-m+"px "+-y+"px",threshold:L(0,U(1,s))||1};let E=!0;function C(P){const N=P[0].intersectionRatio;if(N!==s){if(!E)return r();N?r(!1,N):o=setTimeout(()=>{r(!1,1e-7)},100)}E=!1}try{n=new IntersectionObserver(C,{...x,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,x)}n.observe(e)}return r(!0),a}function Pn(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:s=!1}=o,l=Vt(e),p=i||a?[...l?ft(l):[],...ft(t)]:[];p.forEach(w=>{i&&w.addEventListener("scroll",n,{passive:!0}),a&&w.addEventListener("resize",n)});const d=l&&c?Sn(l,n):null;let g=-1,h=null;r&&(h=new ResizeObserver(w=>{let[x]=w;x&&x.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),l&&!s&&h.observe(l),h.observe(t));let v,m=s?J(e):null;s&&y();function y(){const w=J(e);m&&(w.x!==m.x||w.y!==m.y||w.width!==m.width||w.height!==m.height)&&n(),m=w,v=requestAnimationFrame(y)}return n(),()=>{var w;p.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),d==null||d(),(w=h)==null||w.disconnect(),h=null,s&&cancelAnimationFrame(v)}}const Cn=sn,Nn=on,Rn=cn,Fn=nn,Dn=(e,t,n)=>{const o=new Map,i={platform:En,...n},a={...i.platform,_c:o};return en(e,t,{...i,platform:a})},In={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},Ln={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function kn(e,t,n={}){if(!t||!e||n===null)return{destroy:it};const o={...In,...n},i=t.querySelector("[data-arrow=true]"),a=[];o.flip&&a.push(Nn({boundary:o.boundary,padding:o.overflowPadding}));const r=j(i)?i.offsetHeight/2:0;if(o.gutter||o.offset){const s=o.gutter?{mainAxis:o.gutter}:o.offset;(s==null?void 0:s.mainAxis)!=null&&(s.mainAxis+=r),a.push(an(s))}a.push(Cn({boundary:o.boundary,crossAxis:o.overlap,padding:o.overflowPadding})),i&&a.push(Fn({element:i,padding:8})),a.push(Rn({padding:o.overflowPadding,apply({rects:s,availableHeight:l,availableWidth:p}){o.sameWidth&&Object.assign(t.style,{width:`${Math.round(s.reference.width)}px`,minWidth:"unset"}),o.fitViewport&&Object.assign(t.style,{maxWidth:`${p}px`,maxHeight:`${l}px`})}}));function c(){if(!e||!t||j(e)&&!e.ownerDocument.documentElement.contains(e))return;const{placement:s,strategy:l}=o;Dn(e,t,{placement:s,middleware:a,strategy:l}).then(p=>{const d=Math.round(p.x),g=Math.round(p.y),[h,v]=Mn(p.placement);if(t.setAttribute("data-side",h),t.setAttribute("data-align",v),Object.assign(t.style,{position:o.strategy,top:`${g}px`,left:`${d}px`}),j(i)&&p.middlewareData.arrow){const{x:m,y}=p.middlewareData.arrow,w=p.placement.split("-")[0];i.setAttribute("data-side",w),Object.assign(i.style,{position:"absolute",left:m!=null?`${m}px`:"",top:y!=null?`${y}px`:"",[w]:`calc(100% - ${r}px)`,transform:Ln[w],backgroundColor:"inherit",zIndex:"inherit"})}return p})}return Object.assign(t.style,{position:o.strategy}),{destroy:Pn(e,t,c)}}function Mn(e){const[t,n="center"]=e.split("-");return[t,n]}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var me=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],wt=me.join(","),be=typeof Element>"u",Z=be?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,xt=!be&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Tt=function e(t,n){var o;n===void 0&&(n=!0);var i=t==null||(o=t.getAttribute)===null||o===void 0?void 0:o.call(t,"inert"),a=i===""||i==="true",r=a||n&&t&&e(t.parentNode);return r},Bn=function(t){var n,o=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return o===""||o==="true"},ge=function(t,n,o){if(Tt(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(wt));return n&&Z.call(t,wt)&&i.unshift(t),i=i.filter(o),i},ye=function e(t,n,o){for(var i=[],a=Array.from(t);a.length;){var r=a.shift();if(!Tt(r,!1))if(r.tagName==="SLOT"){var c=r.assignedElements(),s=c.length?c:r.children,l=e(s,!0,o);o.flatten?i.push.apply(i,l):i.push({scopeParent:r,candidates:l})}else{var p=Z.call(r,wt);p&&o.filter(r)&&(n||!t.includes(r))&&i.push(r);var d=r.shadowRoot||typeof o.getShadowRoot=="function"&&o.getShadowRoot(r),g=!Tt(d,!1)&&(!o.shadowRootFilter||o.shadowRootFilter(r));if(d&&g){var h=e(d===!0?r.children:d.children,!0,o);o.flatten?i.push.apply(i,h):i.push({scopeParent:r,candidates:h})}else a.unshift.apply(a,r.children)}}return i},we=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},X=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Bn(t))&&!we(t)?0:t.tabIndex},jn=function(t,n){var o=X(t);return o<0&&n&&!we(t)?0:o},$n=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},xe=function(t){return t.tagName==="INPUT"},Wn=function(t){return xe(t)&&t.type==="hidden"},Vn=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(o){return o.tagName==="SUMMARY"});return n},Kn=function(t,n){for(var o=0;o<t.length;o++)if(t[o].checked&&t[o].form===n)return t[o]},zn=function(t){if(!t.name)return!0;var n=t.form||xt(t),o=function(c){return n.querySelectorAll('input[type="radio"][name="'+c+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=o(window.CSS.escape(t.name));else try{i=o(t.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var a=Kn(i,t.form);return!a||a===t},Hn=function(t){return xe(t)&&t.type==="radio"},Un=function(t){return Hn(t)&&!zn(t)},qn=function(t){var n,o=t&&xt(t),i=(n=o)===null||n===void 0?void 0:n.host,a=!1;if(o&&o!==t){var r,c,s;for(a=!!((r=i)!==null&&r!==void 0&&(c=r.ownerDocument)!==null&&c!==void 0&&c.contains(i)||t!=null&&(s=t.ownerDocument)!==null&&s!==void 0&&s.contains(t));!a&&i;){var l,p,d;o=xt(i),i=(l=o)===null||l===void 0?void 0:l.host,a=!!((p=i)!==null&&p!==void 0&&(d=p.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return a},_t=function(t){var n=t.getBoundingClientRect(),o=n.width,i=n.height;return o===0&&i===0},Yn=function(t,n){var o=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=Z.call(t,"details>summary:first-of-type"),r=a?t.parentElement:t;if(Z.call(r,"details:not([open]) *"))return!0;if(!o||o==="full"||o==="legacy-full"){if(typeof i=="function"){for(var c=t;t;){var s=t.parentElement,l=xt(t);if(s&&!s.shadowRoot&&i(s)===!0)return _t(t);t.assignedSlot?t=t.assignedSlot:!s&&l!==t.ownerDocument?t=l.host:t=s}t=c}if(qn(t))return!t.getClientRects().length;if(o!=="legacy-full")return!0}else if(o==="non-zero-area")return _t(t);return!1},Gn=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var o=0;o<n.children.length;o++){var i=n.children.item(o);if(i.tagName==="LEGEND")return Z.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},At=function(t,n){return!(n.disabled||Tt(n)||Wn(n)||Yn(n,t)||Vn(n)||Gn(n))},Lt=function(t,n){return!(Un(n)||X(n)<0||!At(t,n))},_n=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Xn=function e(t){var n=[],o=[];return t.forEach(function(i,a){var r=!!i.scopeParent,c=r?i.scopeParent:i,s=jn(c,r),l=r?e(i.candidates):c;s===0?r?n.push.apply(n,l):n.push(c):o.push({documentOrder:a,tabIndex:s,item:i,isScope:r,content:l})}),o.sort($n).reduce(function(i,a){return a.isScope?i.push.apply(i,a.content):i.push(a.content),i},[]).concat(n)},Jn=function(t,n){n=n||{};var o;return n.getShadowRoot?o=ye([t],n.includeContainer,{filter:Lt.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:_n}):o=ge(t,n.includeContainer,Lt.bind(null,n)),Xn(o)},Zn=function(t,n){n=n||{};var o;return n.getShadowRoot?o=ye([t],n.includeContainer,{filter:At.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):o=ge(t,n.includeContainer,At.bind(null,n)),o},tt=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Z.call(t,wt)===!1?!1:Lt(n,t)},Qn=me.concat("iframe").join(","),Nt=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return Z.call(t,Qn)===!1?!1:At(n,t)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xt(Object(n),!0).forEach(function(o){to(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function to(e,t,n){return t=no(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eo(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function no(e){var t=eo(e,"string");return typeof t=="symbol"?t:String(t)}var Zt={activateTrap:function(t,n){if(t.length>0){var o=t[t.length-1];o!==n&&o.pause()}var i=t.indexOf(n);i===-1||t.splice(i,1),t.push(n)},deactivateTrap:function(t,n){var o=t.indexOf(n);o!==-1&&t.splice(o,1),t.length>0&&t[t.length-1].unpause()}},oo=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},io=function(t){return(t==null?void 0:t.key)==="Escape"||(t==null?void 0:t.key)==="Esc"||(t==null?void 0:t.keyCode)===27},ut=function(t){return(t==null?void 0:t.key)==="Tab"||(t==null?void 0:t.keyCode)===9},ro=function(t){return ut(t)&&!t.shiftKey},ao=function(t){return ut(t)&&t.shiftKey},Qt=function(t){return setTimeout(t,0)},te=function(t,n){var o=-1;return t.every(function(i,a){return n(i)?(o=a,!1):!0}),o},lt=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,o):t},vt=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},so=[],co=function(t,n){var o=(n==null?void 0:n.document)||document,i=(n==null?void 0:n.trapStack)||so,a=Jt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ro,isKeyBackward:ao},n),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},c,s=function(u,f,b){return u&&u[f]!==void 0?u[f]:a[b||f]},l=function(u,f){var b=typeof(f==null?void 0:f.composedPath)=="function"?f.composedPath():void 0;return r.containerGroups.findIndex(function(T){var A=T.container,O=T.tabbableNodes;return A.contains(u)||(b==null?void 0:b.includes(A))||O.find(function(R){return R===u})})},p=function(u){var f=a[u];if(typeof f=="function"){for(var b=arguments.length,T=new Array(b>1?b-1:0),A=1;A<b;A++)T[A-1]=arguments[A];f=f.apply(void 0,T)}if(f===!0&&(f=void 0),!f){if(f===void 0||f===!1)return f;throw new Error("`".concat(u,"` was specified but was not a node, or did not return a node"))}var O=f;if(typeof f=="string"&&(O=o.querySelector(f),!O))throw new Error("`".concat(u,"` as selector refers to no known node"));return O},d=function(){var u=p("initialFocus");if(u===!1)return!1;if(u===void 0||!Nt(u,a.tabbableOptions))if(l(o.activeElement)>=0)u=o.activeElement;else{var f=r.tabbableGroups[0],b=f&&f.firstTabbableNode;u=b||p("fallbackFocus")}if(!u)throw new Error("Your focus-trap needs to have at least one focusable element");return u},g=function(){if(r.containerGroups=r.containers.map(function(u){var f=Jn(u,a.tabbableOptions),b=Zn(u,a.tabbableOptions),T=f.length>0?f[0]:void 0,A=f.length>0?f[f.length-1]:void 0,O=b.find(function(D){return tt(D)}),R=b.slice().reverse().find(function(D){return tt(D)}),I=!!f.find(function(D){return X(D)>0});return{container:u,tabbableNodes:f,focusableNodes:b,posTabIndexesFound:I,firstTabbableNode:T,lastTabbableNode:A,firstDomTabbableNode:O,lastDomTabbableNode:R,nextTabbableNode:function(_){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,H=f.indexOf(_);return H<0?st?b.slice(b.indexOf(_)+1).find(function(ct){return tt(ct)}):b.slice(0,b.indexOf(_)).reverse().find(function(ct){return tt(ct)}):f[H+(st?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(u){return u.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!p("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(u){return u.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function S(u){var f=u.activeElement;if(f)return f.shadowRoot&&f.shadowRoot.activeElement!==null?S(f.shadowRoot):f},v=function S(u){if(u!==!1&&u!==h(document)){if(!u||!u.focus){S(d());return}u.focus({preventScroll:!!a.preventScroll}),r.mostRecentlyFocusedNode=u,oo(u)&&u.select()}},m=function(u){var f=p("setReturnFocus",u);return f||(f===!1?!1:u)},y=function(u){var f=u.target,b=u.event,T=u.isBackward,A=T===void 0?!1:T;f=f||vt(b),g();var O=null;if(r.tabbableGroups.length>0){var R=l(f,b),I=R>=0?r.containerGroups[R]:void 0;if(R<0)A?O=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:O=r.tabbableGroups[0].firstTabbableNode;else if(A){var D=te(r.tabbableGroups,function(St){var Pt=St.firstTabbableNode;return f===Pt});if(D<0&&(I.container===f||Nt(f,a.tabbableOptions)&&!tt(f,a.tabbableOptions)&&!I.nextTabbableNode(f,!1))&&(D=R),D>=0){var _=D===0?r.tabbableGroups.length-1:D-1,st=r.tabbableGroups[_];O=X(f)>=0?st.lastTabbableNode:st.lastDomTabbableNode}else ut(b)||(O=I.nextTabbableNode(f,!1))}else{var H=te(r.tabbableGroups,function(St){var Pt=St.lastTabbableNode;return f===Pt});if(H<0&&(I.container===f||Nt(f,a.tabbableOptions)&&!tt(f,a.tabbableOptions)&&!I.nextTabbableNode(f))&&(H=R),H>=0){var ct=H===r.tabbableGroups.length-1?0:H+1,Kt=r.tabbableGroups[ct];O=X(f)>=0?Kt.firstTabbableNode:Kt.firstDomTabbableNode}else ut(b)||(O=I.nextTabbableNode(f))}}else O=p("fallbackFocus");return O},w=function(u){var f=vt(u);if(!(l(f,u)>=0)){if(lt(a.clickOutsideDeactivates,u)){c.deactivate({returnFocus:a.returnFocusOnDeactivate});return}lt(a.allowOutsideClick,u)||u.preventDefault()}},x=function(u){var f=vt(u),b=l(f,u)>=0;if(b||f instanceof Document)b&&(r.mostRecentlyFocusedNode=f);else{u.stopImmediatePropagation();var T,A=!0;if(r.mostRecentlyFocusedNode)if(X(r.mostRecentlyFocusedNode)>0){var O=l(r.mostRecentlyFocusedNode),R=r.containerGroups[O].tabbableNodes;if(R.length>0){var I=R.findIndex(function(D){return D===r.mostRecentlyFocusedNode});I>=0&&(a.isKeyForward(r.recentNavEvent)?I+1<R.length&&(T=R[I+1],A=!1):I-1>=0&&(T=R[I-1],A=!1))}}else r.containerGroups.some(function(D){return D.tabbableNodes.some(function(_){return X(_)>0})})||(A=!1);else A=!1;A&&(T=y({target:r.mostRecentlyFocusedNode,isBackward:a.isKeyBackward(r.recentNavEvent)})),v(T||r.mostRecentlyFocusedNode||d())}r.recentNavEvent=void 0},E=function(u){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=u;var b=y({event:u,isBackward:f});b&&(ut(u)&&u.preventDefault(),v(b))},C=function(u){if(io(u)&&lt(a.escapeDeactivates,u)!==!1){u.preventDefault(),c.deactivate();return}(a.isKeyForward(u)||a.isKeyBackward(u))&&E(u,a.isKeyBackward(u))},P=function(u){var f=vt(u);l(f,u)>=0||lt(a.clickOutsideDeactivates,u)||lt(a.allowOutsideClick,u)||(u.preventDefault(),u.stopImmediatePropagation())},N=function(){if(r.active)return Zt.activateTrap(i,c),r.delayInitialFocusTimer=a.delayInitialFocus?Qt(function(){v(d())}):v(d()),o.addEventListener("focusin",x,!0),o.addEventListener("mousedown",w,{capture:!0,passive:!1}),o.addEventListener("touchstart",w,{capture:!0,passive:!1}),o.addEventListener("click",P,{capture:!0,passive:!1}),o.addEventListener("keydown",C,{capture:!0,passive:!1}),c},F=function(){if(r.active)return o.removeEventListener("focusin",x,!0),o.removeEventListener("mousedown",w,!0),o.removeEventListener("touchstart",w,!0),o.removeEventListener("click",P,!0),o.removeEventListener("keydown",C,!0),c},M=function(u){var f=u.some(function(b){var T=Array.from(b.removedNodes);return T.some(function(A){return A===r.mostRecentlyFocusedNode})});f&&v(d())},B=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(M):void 0,W=function(){B&&(B.disconnect(),r.active&&!r.paused&&r.containers.map(function(u){B.observe(u,{subtree:!0,childList:!0})}))};return c={get active(){return r.active},get paused(){return r.paused},activate:function(u){if(r.active)return this;var f=s(u,"onActivate"),b=s(u,"onPostActivate"),T=s(u,"checkCanFocusTrap");T||g(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=o.activeElement,f==null||f();var A=function(){T&&g(),N(),W(),b==null||b()};return T?(T(r.containers.concat()).then(A,A),this):(A(),this)},deactivate:function(u){if(!r.active)return this;var f=Jt({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},u);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,F(),r.active=!1,r.paused=!1,W(),Zt.deactivateTrap(i,c);var b=s(f,"onDeactivate"),T=s(f,"onPostDeactivate"),A=s(f,"checkCanReturnFocus"),O=s(f,"returnFocus","returnFocusOnDeactivate");b==null||b();var R=function(){Qt(function(){O&&v(m(r.nodeFocusedBeforeActivation)),T==null||T()})};return O&&A?(A(m(r.nodeFocusedBeforeActivation)).then(R,R),this):(R(),this)},pause:function(u){if(r.paused||!r.active)return this;var f=s(u,"onPause"),b=s(u,"onPostPause");return r.paused=!0,f==null||f(),F(),W(),b==null||b(),this},unpause:function(u){if(!r.paused||!r.active)return this;var f=s(u,"onUnpause"),b=s(u,"onPostUnpause");return r.paused=!1,f==null||f(),g(),N(),W(),b==null||b(),this},updateContainerElements:function(u){var f=[].concat(u).filter(Boolean);return r.containers=f.map(function(b){return typeof b=="string"?o.querySelector(b):b}),r.active&&g(),W(),this}},c.updateContainerElements(t),c};function lo(e={}){let t;const{immediate:n,...o}=e,i=Ft(!1),a=Ft(!1),r=d=>t==null?void 0:t.activate(d),c=d=>{t==null||t.deactivate(d)},s=()=>{t&&(t.pause(),a.set(!0))},l=()=>{t&&(t.unpause(),a.set(!1))};return{useFocusTrap:d=>(t=co(d,{...o,onActivate(){var g;i.set(!0),(g=e.onActivate)==null||g.call(e)},onDeactivate(){var g;i.set(!1),(g=e.onDeactivate)==null||g.call(e)}}),n&&r(),{destroy(){c(),t=void 0}}),hasFocus:zt(i),isPaused:zt(a),activate:r,deactivate:c,pause:s,unpause:l}}const mt=[];function uo(e,t){let n=it;function o(){const a=mt.indexOf(e);a>=0&&mt.splice(a,1)}function i(a){n();const{open:r,onClose:c,shouldCloseOnInteractOutside:s,closeOnInteractOutside:l}=a;ne(100).then(()=>{r?mt.push(e):o()});function p(){return Fe(mt)===e}function d(){p()&&c&&(c(),o())}function g(v){const m=v.target;kt(m)&&m&&p()&&(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation())}function h(v){s!=null&&s(v)&&p()&&(v.preventDefault(),v.stopPropagation(),v.stopImmediatePropagation(),d())}n=ho(e,{onInteractOutsideStart:g,onInteractOutside:l?h:void 0,enabled:r}).destroy}return i(t),{update:i,destroy(){o(),n()}}}const fo={floating:{},focusTrap:{},modal:{},escapeKeydown:{},portal:"body"},zo=(e,t)=>{e.dataset.escapee="";const{anchorElement:n,open:o,options:i}=t;if(!n||!o||!i)return{destroy:it};const a={...fo,...i},r=[];if(a.portal!==null){const s=po(e,a.portal);s!=null&&s.destroy&&r.push(s.destroy)}if(r.push(kn(n,e,a.floating).destroy),a.focusTrap!==null){const{useFocusTrap:s}=lo({immediate:!0,escapeDeactivates:!1,allowOutsideClick:!0,returnFocusOnDeactivate:!1,fallbackFocus:e,...a.focusTrap}),l=s(e);l!=null&&l.destroy&&r.push(l.destroy)}a.modal!==null&&r.push(uo(e,{onClose:()=>{j(n)&&(o.set(!1),n.focus())},shouldCloseOnInteractOutside:s=>!(s.defaultPrevented||j(n)&&n.contains(s.target)),...a.modal}).destroy),a.escapeKeydown!==null&&r.push(Pe(e,{enabled:o,handler:()=>{o.set(!1)},...a.escapeKeydown}).destroy);const c=Rt(...r);return{destroy(){c()}}},po=(e,t="body")=>{let n;if(!j(t)&&typeof t!="string")return{destroy:it};async function o(a){if(t=a,typeof t=="string"){if(n=document.querySelector(t),n===null&&(await Re(),n=document.querySelector(t)),n===null)throw new Error(`No element found matching css selector: "${t}"`)}else if(t instanceof HTMLElement)n=t;else throw new TypeError(`Unknown portal target type: ${t===null?"null":typeof t}. Allowed types: string (CSS selector) or HTMLElement.`);e.dataset.portal="",n.appendChild(e),e.hidden=!1}function i(){e.remove()}return o(t),{update:o,destroy:i}};function ho(e,t){let n=it,o=!1,i=!1,a=!1;function r(l){n();const{onInteractOutside:p,onInteractOutsideStart:d,enabled:g}=l;if(!g)return;function h(y){p&&ee(y,e)&&(d==null||d(y));const w=y.target;kt(w)&&Te(e,w)&&(i=!0),o=!0}function v(y){p==null||p(y)}const m=vo(e);if(typeof PointerEvent<"u"){const y=w=>{c(w)&&v(w),s()};n=Rt(Q(m,"pointerdown",h,!0),Q(m,"pointerup",y,!0))}else{const y=x=>{a?a=!1:c(x)&&v(x),s()},w=x=>{a=!0,c(x)&&v(x),s()};n=Rt(Q(m,"mousedown",h,!0),Q(m,"mouseup",y,!0),Q(m,"touchstart",h,!0),Q(m,"touchend",w,!0))}}function c(l){return!!(o&&!i&&ee(l,e))}function s(){o=!1,i=!1}return r(t),{update:r,destroy:n}}function ee(e,t){if("button"in e&&e.button>0)return!1;const n=e.target;if(!kt(n))return!1;const o=n.ownerDocument;return!o||!o.documentElement.contains(n)?!1:t&&!Te(t,n)}function Te(e,t){return e===t||e.contains(t)}function vo(e){return(e==null?void 0:e.ownerDocument)??document}function Ho(e){return(t={})=>mo(e,t)}function mo(e,t){const o={...{side:"bottom",align:"center",sideOffset:0,alignOffset:0,sameWidth:!1,avoidCollisions:!0,collisionPadding:8,fitViewport:!1,strategy:"absolute",overlap:!1},...t};e.update(i=>({...i,placement:bo(o.side,o.align),offset:{...i.offset,mainAxis:o.sideOffset,crossAxis:o.alignOffset},gutter:0,sameWidth:o.sameWidth,flip:o.avoidCollisions,overflowPadding:o.collisionPadding,boundary:o.collisionBoundary,fitViewport:o.fitViewport,strategy:o.strategy,overlap:o.overlap}))}function bo(e,t){return t==="center"?e:`${e}-${t}`}export{Io as A,Eo as a,So as b,Po as c,Co as d,Vo as e,Mo as f,Ao as g,jo as h,zo as i,Ko as j,He as k,po as l,Bo as m,$o as n,Wo as o,Lo as p,Ho as q,ko as r,ne as s,ke as t,Oo as u,Fe as v,No as w,Ro as x,Do as y,Fo as z};
