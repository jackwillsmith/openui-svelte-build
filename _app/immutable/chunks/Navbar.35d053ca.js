import{s as It,E as Pt,F as At,G as Ot,H as Ut,w as rt,e as bt,i as S,d as h,I as ue,x as Ht,y as rl,p as ut,f as D,g as C,h as y,L as kt,_ as Yt,u as O,v as Nt,T as me,C as at,P as Jt,a as N,l as tt,R as ht,c as R,m as et,j as d,r as b,n as it,K as $t,t as vt,X as hl,Q as ge,O as ml,o as _l,Y as qt,B as gl,z as W,A as Z,S as pe}from"./scheduler.4a29073b.js";import{S as Mt,i as Tt,a as H,t as P,g as Dt,c as Ct,j as ol,k as il,h as ve,b as X,d as K,m as Y,e as J,f as Wt}from"./index.10afcf02.js";import{e as yt}from"./each.8348a957.js";import{a as dt}from"./Toaster.svelte_svelte_type_style_lang.622c7c00.js";import{p as pl,l as vl,m as al,d as fe,S as be,n as we,u as bl,h as de,W as wl,f as kl}from"./index.3cc0610f.js";import{i as cl,r as ke,j as yl,s as El,k as ye}from"./index.1bdba4f5.js";import{A as Dl,u as Cl,a as Il}from"./AddFilesPlaceholder.775c4cd0.js";import{j as Ml}from"./index.0b44bc8f.js";import{C as Ee}from"./index.56297a3e.js";import{T as Gt}from"./Tooltip.16619442.js";import{b as Tl,g as Vl,u as Sl,c as Bl,d as Ll,D as Hl,M as Pl,a as he,T as Al,S as Ol}from"./ShareChatModal.18817021.js";import{S as Ul}from"./Selector.64953cc6.js";import"./create.76372bae.js";import{d as Nl}from"./index.7c7f65a8.js";import{g as te}from"./spread.8a54911c.js";import{a as ul,d as Rl}from"./updater.1ac2943e.js";import{f as jl}from"./FileSaver.min.898eb36f.js";import"./jspdf.es.min.fce916a1.js";import{f as fl}from"./index.1df8947f.js";import{a as xl}from"./index.f5b19d46.js";const zl=n=>({subIds:n&1}),De=n=>({subIds:n[0]});function Fl(n){let t;const e=n[6].default,l=Pt(e,n,n[5],De);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,[r]){l&&l.p&&(!t||r&33)&&At(l,e,s,s[5],t?Ut(e,s[5],r,zl):Ot(s[5]),De)},i(s){t||(H(l,s),t=!0)},o(s){P(l,s),t=!1},d(s){l&&l.d(s)}}}function ql(n,t,e){let l,{$$slots:s={},$$scope:r}=t,{disabled:o=void 0}=t,{open:i=void 0}=t,{onOpenChange:c=void 0}=t;const{updateOption:f,ids:a,states:{subOpen:u}}=Tl({disabled:o,onOpenChange:({next:g})=>(i!==g&&(c==null||c(g),e(2,i=g)),g)}),_=Nl([a.menu,a.trigger],([g,m])=>({menu:g,trigger:m}));return rt(n,_,g=>e(0,l=g)),n.$$set=g=>{"disabled"in g&&e(3,o=g.disabled),"open"in g&&e(2,i=g.open),"onOpenChange"in g&&e(4,c=g.onOpenChange),"$$scope"in g&&e(5,r=g.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&i!==void 0&&u.set(i),n.$$.dirty&8&&f("disabled",o)},[l,_,i,o,c,r,s]}class Wl extends Mt{constructor(t){super(),Tt(this,t,ql,Fl,It,{disabled:3,open:2,onOpenChange:4})}}const Zl=n=>({builder:n[0]&256}),Ce=n=>({builder:n[8]}),Gl=n=>({builder:n[0]&256}),Ie=n=>({builder:n[8]}),Ql=n=>({builder:n[0]&256}),Me=n=>({builder:n[8]}),Xl=n=>({builder:n[0]&256}),Te=n=>({builder:n[8]}),Kl=n=>({builder:n[0]&256}),Ve=n=>({builder:n[8]}),Yl=n=>({builder:n[0]&256}),Se=n=>({builder:n[8]});function Jl(n){let t,e,l,s;const r=n[28].default,o=Pt(r,n,n[27],Ce);let i=[n[8],n[13]],c={};for(let f=0;f<i.length;f+=1)c=Ht(c,i[f]);return{c(){t=D("div"),o&&o.c(),this.h()},l(f){t=C(f,"DIV",{});var a=y(t);o&&o.l(a),a.forEach(h),this.h()},h(){kt(t,c)},m(f,a){S(f,t,a),o&&o.m(t,null),n[33](t),e=!0,l||(s=[Yt(n[8].action(t)),O(t,"m-focusout",n[12]),O(t,"m-keydown",n[12]),O(t,"m-pointermove",n[12])],l=!0)},p(f,a){o&&o.p&&(!e||a[0]&134217984)&&At(o,r,f,f[27],e?Ut(r,f[27],a,Zl):Ot(f[27]),Ce),kt(t,c=te(i,[a[0]&256&&f[8],a[0]&8192&&f[13]]))},i(f){e||(H(o,f),e=!0)},o(f){P(o,f),e=!1},d(f){f&&h(t),o&&o.d(f),n[33](null),l=!1,Nt(s)}}}function $l(n){let t,e,l,s,r;const o=n[28].default,i=Pt(o,n,n[27],Ie);let c=[n[8],n[13]],f={};for(let a=0;a<c.length;a+=1)f=Ht(f,c[a]);return{c(){t=D("div"),i&&i.c(),this.h()},l(a){t=C(a,"DIV",{});var u=y(t);i&&i.l(u),u.forEach(h),this.h()},h(){kt(t,f)},m(a,u){S(a,t,u),i&&i.m(t,null),n[32](t),l=!0,s||(r=[Yt(n[8].action(t)),O(t,"m-focusout",n[12]),O(t,"m-keydown",n[12]),O(t,"m-pointermove",n[12])],s=!0)},p(a,u){n=a,i&&i.p&&(!l||u[0]&134217984)&&At(i,o,n,n[27],l?Ut(o,n[27],u,Gl):Ot(n[27]),Ie),kt(t,f=te(c,[u[0]&256&&n[8],u[0]&8192&&n[13]]))},i(a){l||(H(i,a),e&&e.end(1),l=!0)},o(a){P(i,a),a&&(e=ol(t,n[5],n[6])),l=!1},d(a){a&&h(t),i&&i.d(a),n[32](null),a&&e&&e.end(),s=!1,Nt(r)}}}function tn(n){let t,e,l,s,r;const o=n[28].default,i=Pt(o,n,n[27],Me);let c=[n[8],n[13]],f={};for(let a=0;a<c.length;a+=1)f=Ht(f,c[a]);return{c(){t=D("div"),i&&i.c(),this.h()},l(a){t=C(a,"DIV",{});var u=y(t);i&&i.l(u),u.forEach(h),this.h()},h(){kt(t,f)},m(a,u){S(a,t,u),i&&i.m(t,null),n[31](t),l=!0,s||(r=[Yt(n[8].action(t)),O(t,"m-focusout",n[12]),O(t,"m-keydown",n[12]),O(t,"m-pointermove",n[12])],s=!0)},p(a,u){n=a,i&&i.p&&(!l||u[0]&134217984)&&At(i,o,n,n[27],l?Ut(o,n[27],u,Ql):Ot(n[27]),Me),kt(t,f=te(c,[u[0]&256&&n[8],u[0]&8192&&n[13]]))},i(a){l||(H(i,a),a&&(e||me(()=>{e=il(t,n[3],n[4]),e.start()})),l=!0)},o(a){P(i,a),l=!1},d(a){a&&h(t),i&&i.d(a),n[31](null),s=!1,Nt(r)}}}function en(n){let t,e,l,s,r,o;const i=n[28].default,c=Pt(i,n,n[27],Te);let f=[n[8],n[13]],a={};for(let u=0;u<f.length;u+=1)a=Ht(a,f[u]);return{c(){t=D("div"),c&&c.c(),this.h()},l(u){t=C(u,"DIV",{});var _=y(t);c&&c.l(_),_.forEach(h),this.h()},h(){kt(t,a)},m(u,_){S(u,t,_),c&&c.m(t,null),n[30](t),s=!0,r||(o=[Yt(n[8].action(t)),O(t,"m-focusout",n[12]),O(t,"m-keydown",n[12]),O(t,"m-pointermove",n[12])],r=!0)},p(u,_){n=u,c&&c.p&&(!s||_[0]&134217984)&&At(c,i,n,n[27],s?Ut(i,n[27],_,Xl):Ot(n[27]),Te),kt(t,a=te(f,[_[0]&256&&n[8],_[0]&8192&&n[13]]))},i(u){s||(H(c,u),u&&me(()=>{s&&(l&&l.end(1),e=il(t,n[3],n[4]),e.start())}),s=!0)},o(u){P(c,u),e&&e.invalidate(),u&&(l=ol(t,n[5],n[6])),s=!1},d(u){u&&h(t),c&&c.d(u),n[30](null),u&&l&&l.end(),r=!1,Nt(o)}}}function ln(n){let t,e,l,s,r;const o=n[28].default,i=Pt(o,n,n[27],Ve);let c=[n[8],n[13]],f={};for(let a=0;a<c.length;a+=1)f=Ht(f,c[a]);return{c(){t=D("div"),i&&i.c(),this.h()},l(a){t=C(a,"DIV",{});var u=y(t);i&&i.l(u),u.forEach(h),this.h()},h(){kt(t,f)},m(a,u){S(a,t,u),i&&i.m(t,null),n[29](t),l=!0,s||(r=[Yt(n[8].action(t)),O(t,"m-focusout",n[12]),O(t,"m-keydown",n[12]),O(t,"m-pointermove",n[12])],s=!0)},p(a,u){n=a,i&&i.p&&(!l||u[0]&134217984)&&At(i,o,n,n[27],l?Ut(o,n[27],u,Kl):Ot(n[27]),Ve),kt(t,f=te(c,[u[0]&256&&n[8],u[0]&8192&&n[13]]))},i(a){l||(H(i,a),a&&me(()=>{l&&(e||(e=ve(t,n[1],n[2],!0)),e.run(1))}),l=!0)},o(a){P(i,a),a&&(e||(e=ve(t,n[1],n[2],!1)),e.run(0)),l=!1},d(a){a&&h(t),i&&i.d(a),n[29](null),a&&e&&e.end(),s=!1,Nt(r)}}}function nn(n){let t;const e=n[28].default,l=Pt(e,n,n[27],Se);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r[0]&134217984)&&At(l,e,s,s[27],t?Ut(e,s[27],r,Yl):Ot(s[27]),Se)},i(s){t||(H(l,s),t=!0)},o(s){P(l,s),t=!1},d(s){l&&l.d(s)}}}function sn(n){let t,e,l,s;const r=[nn,ln,en,tn,$l,Jl],o=[];function i(c,f){return c[7]&&c[9]?0:c[1]&&c[9]?1:c[3]&&c[5]&&c[9]?2:c[3]&&c[9]?3:c[5]&&c[9]?4:c[9]?5:-1}return~(t=i(n))&&(e=o[t]=r[t](n)),{c(){e&&e.c(),l=bt()},l(c){e&&e.l(c),l=bt()},m(c,f){~t&&o[t].m(c,f),S(c,l,f),s=!0},p(c,f){let a=t;t=i(c),t===a?~t&&o[t].p(c,f):(e&&(Dt(),P(o[a],1,1,()=>{o[a]=null}),Ct()),~t?(e=o[t],e?e.p(c,f):(e=o[t]=r[t](c),e.c()),H(e,1),e.m(l.parentNode,l)):e=null)},i(c){s||(H(e),s=!0)},o(c){P(e),s=!1},d(c){c&&h(l),~t&&o[t].d(c)}}}function rn(n,t,e){let l;const s=["transition","transitionConfig","inTransition","inTransitionConfig","outTransition","outTransitionConfig","asChild","id","side","align","sideOffset","alignOffset","collisionPadding","avoidCollisions","collisionBoundary","sameWidth","fitViewport","strategy","overlap","el"];let r=ue(t,s),o,i,{$$slots:c={},$$scope:f}=t,{transition:a=void 0}=t,{transitionConfig:u=void 0}=t,{inTransition:_=void 0}=t,{inTransitionConfig:g=void 0}=t,{outTransition:m=void 0}=t,{outTransitionConfig:p=void 0}=t,{asChild:k=!1}=t,{id:w=void 0}=t,{side:V="right"}=t,{align:M="start"}=t,{sideOffset:E=0}=t,{alignOffset:T=0}=t,{collisionPadding:I=8}=t,{avoidCollisions:G=!0}=t,{collisionBoundary:B=void 0}=t,{sameWidth:j=!1}=t,{fitViewport:Q=!1}=t,{strategy:$="absolute"}=t,{overlap:ct=!1}=t,{el:q=void 0}=t;const{elements:{subMenu:mt},states:{subOpen:_t},ids:jt,getAttrs:pt}=Vl();rt(n,mt,L=>e(26,o=L)),rt(n,_t,L=>e(9,i=L));const Vt=ul(),xt=pt("sub-content");function Et(L){ut[L?"unshift":"push"](()=>{q=L,e(0,q)})}function Zt(L){ut[L?"unshift":"push"](()=>{q=L,e(0,q)})}function Qt(L){ut[L?"unshift":"push"](()=>{q=L,e(0,q)})}function lt(L){ut[L?"unshift":"push"](()=>{q=L,e(0,q)})}function ot(L){ut[L?"unshift":"push"](()=>{q=L,e(0,q)})}return n.$$set=L=>{t=Ht(Ht({},t),rl(L)),e(13,r=ue(t,s)),"transition"in L&&e(1,a=L.transition),"transitionConfig"in L&&e(2,u=L.transitionConfig),"inTransition"in L&&e(3,_=L.inTransition),"inTransitionConfig"in L&&e(4,g=L.inTransitionConfig),"outTransition"in L&&e(5,m=L.outTransition),"outTransitionConfig"in L&&e(6,p=L.outTransitionConfig),"asChild"in L&&e(7,k=L.asChild),"id"in L&&e(14,w=L.id),"side"in L&&e(15,V=L.side),"align"in L&&e(16,M=L.align),"sideOffset"in L&&e(17,E=L.sideOffset),"alignOffset"in L&&e(18,T=L.alignOffset),"collisionPadding"in L&&e(19,I=L.collisionPadding),"avoidCollisions"in L&&e(20,G=L.avoidCollisions),"collisionBoundary"in L&&e(21,B=L.collisionBoundary),"sameWidth"in L&&e(22,j=L.sameWidth),"fitViewport"in L&&e(23,Q=L.fitViewport),"strategy"in L&&e(24,$=L.strategy),"overlap"in L&&e(25,ct=L.overlap),"el"in L&&e(0,q=L.el),"$$scope"in L&&e(27,f=L.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&w&&jt.menu.set(w),n.$$.dirty[0]&67108864&&e(8,l=o),n.$$.dirty[0]&256&&Object.assign(l,xt),n.$$.dirty[0]&67076096&&Sl({side:V,align:M,sideOffset:E,alignOffset:T,collisionPadding:I,avoidCollisions:G,collisionBoundary:B,sameWidth:j,fitViewport:Q,strategy:$,overlap:ct})},[q,a,u,_,g,m,p,k,l,i,mt,_t,Vt,r,w,V,M,E,T,I,G,B,j,Q,$,ct,o,f,c,Et,Zt,Qt,lt,ot]}class on extends Mt{constructor(t){super(),Tt(this,t,rn,sn,It,{transition:1,transitionConfig:2,inTransition:3,inTransitionConfig:4,outTransition:5,outTransitionConfig:6,asChild:7,id:14,side:15,align:16,sideOffset:17,alignOffset:18,collisionPadding:19,avoidCollisions:20,collisionBoundary:21,sameWidth:22,fitViewport:23,strategy:24,overlap:25,el:0},null,[-1,-1])}}const an=n=>({builder:n&4}),Be=n=>({builder:n[2]}),cn=n=>({builder:n&4}),Le=n=>({builder:n[2]});function un(n){let t,e,l,s;const r=n[13].default,o=Pt(r,n,n[12],Be);let i=[n[2],n[6]],c={};for(let f=0;f<i.length;f+=1)c=Ht(c,i[f]);return{c(){t=D("div"),o&&o.c(),this.h()},l(f){t=C(f,"DIV",{});var a=y(t);o&&o.l(a),a.forEach(h),this.h()},h(){kt(t,c)},m(f,a){S(f,t,a),o&&o.m(t,null),n[14](t),e=!0,l||(s=[Yt(n[2].action(t)),O(t,"m-click",n[5]),O(t,"m-focusin",n[5]),O(t,"m-focusout",n[5]),O(t,"m-keydown",n[5]),O(t,"m-pointerleave",n[5]),O(t,"m-pointermove",n[5])],l=!0)},p(f,a){o&&o.p&&(!e||a&4100)&&At(o,r,f,f[12],e?Ut(r,f[12],a,an):Ot(f[12]),Be),kt(t,c=te(i,[a&4&&f[2],a&64&&f[6]]))},i(f){e||(H(o,f),e=!0)},o(f){P(o,f),e=!1},d(f){f&&h(t),o&&o.d(f),n[14](null),l=!1,Nt(s)}}}function fn(n){let t;const e=n[13].default,l=Pt(e,n,n[12],Le);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r&4100)&&At(l,e,s,s[12],t?Ut(e,s[12],r,cn):Ot(s[12]),Le)},i(s){t||(H(l,s),t=!0)},o(s){P(l,s),t=!1},d(s){l&&l.d(s)}}}function dn(n){let t,e,l,s;const r=[fn,un],o=[];function i(c,f){return c[1]?0:1}return t=i(n),e=o[t]=r[t](n),{c(){e.c(),l=bt()},l(c){e.l(c),l=bt()},m(c,f){o[t].m(c,f),S(c,l,f),s=!0},p(c,[f]){let a=t;t=i(c),t===a?o[t].p(c,f):(Dt(),P(o[a],1,1,()=>{o[a]=null}),Ct(),e=o[t],e?e.p(c,f):(e=o[t]=r[t](c),e.c()),H(e,1),e.m(l.parentNode,l))},i(c){s||(H(e),s=!0)},o(c){P(e),s=!1},d(c){c&&h(l),o[t].d(c)}}}function hn(n,t,e){let l,s;const r=["disabled","asChild","id","el"];let o=ue(t,r),i,c,{$$slots:f={},$$scope:a}=t,{disabled:u=!1}=t,{asChild:_=!1}=t,{id:g=void 0}=t,{el:m=void 0}=t;const{elements:{subTrigger:p},ids:k,getAttrs:w,options:V}=Bl();rt(n,p,I=>e(11,c=I));const{disabled:M}=V;rt(n,M,I=>e(10,i=I));const E=ul();function T(I){ut[I?"unshift":"push"](()=>{m=I,e(0,m)})}return n.$$set=I=>{t=Ht(Ht({},t),rl(I)),e(6,o=ue(t,r)),"disabled"in I&&e(7,u=I.disabled),"asChild"in I&&e(1,_=I.asChild),"id"in I&&e(8,g=I.id),"el"in I&&e(0,m=I.el),"$$scope"in I&&e(12,a=I.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&g&&k.trigger.set(g),n.$$.dirty&2048&&e(2,l=c),n.$$.dirty&1152&&e(9,s={...w("sub-trigger"),...Rl(u||i)}),n.$$.dirty&516&&Object.assign(l,s)},[m,_,l,p,M,E,o,u,g,s,i,c,a,f,T]}class mn extends Mt{constructor(t){super(),Tt(this,t,hn,dn,It,{disabled:7,asChild:1,id:8,el:0})}}function He(n,t,e){const l=n.slice();return l[11]=t[e],l[13]=e,l}function Pe(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">/</div>',r,o,i,c,f,a,u='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-3 h-3"><path stroke-linecap="round" stroke-linejoin="round" d="m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"></path></svg>',_,g,m=n[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"",p,k=yt(n[1]),w=[];for(let V=0;V<k.length;V+=1)w[V]=Ae(He(n,k,V));return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=N(),o=D("div"),i=D("div");for(let V=0;V<w.length;V+=1)w[V].c();c=N(),f=D("div"),a=D("div"),a.innerHTML=u,_=N(),g=D("div"),p=tt(m),this.h()},l(V){t=C(V,"DIV",{class:!0});var M=y(t);e=C(M,"DIV",{class:!0});var E=y(e);l=C(E,"DIV",{class:!0,"data-svelte-h":!0}),ht(l)!=="svelte-1ynv172"&&(l.innerHTML=s),r=R(E),o=C(E,"DIV",{class:!0});var T=y(o);i=C(T,"DIV",{class:!0});var I=y(i);for(let j=0;j<w.length;j+=1)w[j].l(I);I.forEach(h),c=R(T),f=C(T,"DIV",{class:!0});var G=y(f);a=C(G,"DIV",{"data-svelte-h":!0}),ht(a)!=="svelte-cdi12d"&&(a.innerHTML=u),_=R(G),g=C(G,"DIV",{class:!0});var B=y(g);p=et(B,m),B.forEach(h),G.forEach(h),T.forEach(h),E.forEach(h),M.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(g,"class","line-clamp-1"),d(f,"class","px-2 pb-1 text-xs text-gray-600 bg-white rounded-br-xl flex items-center space-x-1"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(V,M){S(V,t,M),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let E=0;E<w.length;E+=1)w[E]&&w[E].m(i,null);b(o,c),b(o,f),b(f,a),b(f,_),b(f,g),b(g,p)},p(V,M){if(M&19){k=yt(V[1]);let E;for(E=0;E<k.length;E+=1){const T=He(V,k,E);w[E]?w[E].p(T,M):(w[E]=Ae(T),w[E].c(),w[E].m(i,null))}for(;E<w.length;E+=1)w[E].d(1);w.length=k.length}M&4&&m!==(m=V[2].t("Tip: Update multiple variable slots consecutively by pressing the tab key in the chat input after each replacement.")+"")&&it(p,m)},d(V){V&&h(t),$t(w,V)}}}function Ae(n){let t,e,l=n[11].command+"",s,r,o,i=n[11].title+"",c,f,a,u,_;function g(){return n[9](n[11])}function m(){return n[10](n[13])}return{c(){t=D("button"),e=D("div"),s=tt(l),r=N(),o=D("div"),c=tt(i),f=N(),this.h()},l(p){t=C(p,"BUTTON",{class:!0,type:!0});var k=y(t);e=C(k,"DIV",{class:!0});var w=y(e);s=et(w,l),w.forEach(h),r=R(k),o=C(k,"DIV",{class:!0});var V=y(o);c=et(V,i),V.forEach(h),f=R(k),k.forEach(h),this.h()},h(){d(e,"class","font-medium text-black"),d(o,"class","text-xs text-gray-600"),d(t,"class",a="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(p,k){S(p,t,k),b(t,e),b(e,s),b(t,r),b(t,o),b(o,c),b(t,f),u||(_=[O(t,"click",g),O(t,"mousemove",m),O(t,"focus",gn)],u=!0)},p(p,k){n=p,k&2&&l!==(l=n[11].command+"")&&it(s,l),k&2&&i!==(i=n[11].title+"")&&it(c,i),k&1&&a!==(a="px-3 py-1.5 rounded-xl w-full text-left "+(n[13]===n[0]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",a)},d(p){p&&h(t),u=!1,Nt(_)}}}function _n(n){let t,e=n[1].length>0&&Pe(n);return{c(){e&&e.c(),t=bt()},l(l){e&&e.l(l),t=bt()},m(l,s){e&&e.m(l,s),S(l,t,s)},p(l,[s]){l[1].length>0?e?e.p(l,s):(e=Pe(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:at,o:at,d(l){l&&h(t),e&&e.d(l)}}}const gn=()=>{};function pn(n,t,e){let l,s;rt(n,pl,m=>e(8,s=m));const r=Jt("i18n");rt(n,r,m=>e(2,l=m));let{prompt:o=""}=t,i=0,c=[];const f=()=>{e(0,i=Math.max(0,i-1))},a=()=>{e(0,i=Math.min(i+1,c.length-1))},u=async m=>{let p=m.content;if(m.content.includes("{{CLIPBOARD}}")){const V=await navigator.clipboard.readText().catch(M=>(dt.error(l.t("Failed to read clipboard contents")),"{{CLIPBOARD}}"));p=m.content.replaceAll("{{CLIPBOARD}}",V)}e(5,o=p);const k=document.getElementById("chat-textarea");await vt(),k.style.height="",k.style.height=Math.min(k.scrollHeight,200)+"px",k==null||k.focus(),await vt();const w=cl(o);if(w.length>0){const V=w.at(0);k.setSelectionRange(V==null?void 0:V.startIndex,V.endIndex+1)}},_=m=>{u(m)},g=m=>{e(0,i=m)};return n.$$set=m=>{"prompt"in m&&e(5,o=m.prompt)},n.$$.update=()=>{n.$$.dirty&288&&e(1,c=s.filter(m=>m.command.includes(o)).sort((m,p)=>m.title.localeCompare(p.title))),n.$$.dirty&32&&o&&e(0,i=0)},[i,c,l,r,u,o,f,a,s,_,g]}class vn extends Mt{constructor(t){super(),Tt(this,t,pn,_n,It,{prompt:5,selectUp:6,selectDown:7})}get selectUp(){return this.$$.ctx[6]}get selectDown(){return this.$$.ctx[7]}}function Oe(n,t,e){const l=n.slice();return l[4]=t[e],l[6]=e,l}function bn(n){let t,e=n[4].content+"",l;return{c(){t=D("div"),l=tt(e),this.h()},l(s){t=C(s,"DIV",{class:!0});var r=y(t);l=et(r,e),r.forEach(h),this.h()},h(){d(t,"class","self-center text-sm font-medium dark:text-gray-300 line-clamp-2")},m(s,r){S(s,t,r),b(t,l)},p(s,r){r&2&&e!==(e=s[4].content+"")&&it(l,e)},d(s){s&&h(t)}}}function wn(n){let t,e=n[4].title[0]+"",l,s,r,o=n[4].title[1]+"",i;return{c(){t=D("div"),l=tt(e),s=N(),r=D("div"),i=tt(o),this.h()},l(c){t=C(c,"DIV",{class:!0});var f=y(t);l=et(f,e),f.forEach(h),s=R(c),r=C(c,"DIV",{class:!0});var a=y(r);i=et(a,o),a.forEach(h),this.h()},h(){d(t,"class","text-sm font-medium dark:text-gray-300"),d(r,"class","text-sm text-gray-500 line-clamp-1")},m(c,f){S(c,t,f),b(t,l),S(c,s,f),S(c,r,f),b(r,i)},p(c,f){f&2&&e!==(e=c[4].title[0]+"")&&it(l,e),f&2&&o!==(o=c[4].title[1]+"")&&it(i,o)},d(c){c&&(h(t),h(s),h(r))}}}function Ue(n){let t,e,l,s,r,o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z" clip-rule="evenodd"></path></svg>',i,c,f;function a(m,p){return m[4].title&&m[4].title[0]!==""?wn:bn}let u=a(n),_=u(n);function g(){return n[3](n[4])}return{c(){t=D("div"),e=D("button"),l=D("div"),_.c(),s=N(),r=D("div"),r.innerHTML=o,i=N(),this.h()},l(m){t=C(m,"DIV",{class:!0});var p=y(t);e=C(p,"BUTTON",{class:!0});var k=y(e);l=C(k,"DIV",{class:!0});var w=y(l);_.l(w),w.forEach(h),s=R(k),r=C(k,"DIV",{class:!0,"data-svelte-h":!0}),ht(r)!=="svelte-qf8uca"&&(r.innerHTML=o),k.forEach(h),i=R(p),p.forEach(h),this.h()},h(){d(l,"class","flex flex-col text-left self-center"),d(r,"class","self-center p-1 rounded-lg text-gray-50 group-hover:text-gray-800 dark:text-gray-850 dark:group-hover:text-gray-100 transition"),d(e,"class","flex-1 flex justify-between w-full h-full px-4 py-2.5 bg-gray-50 hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 rounded-2xl transition group"),d(t,"class",(n[6]>1?"hidden sm:inline-flex":"")+" basis-full sm:basis-1/2 p-[5px] px-1")},m(m,p){S(m,t,p),b(t,e),b(e,l),_.m(l,null),b(e,s),b(e,r),b(t,i),c||(f=O(e,"click",g),c=!0)},p(m,p){n=m,u===(u=a(n))&&_?_.p(n,p):(_.d(1),_=u(n),_&&(_.c(),_.m(l,null)))},d(m){m&&h(t),_.d(),c=!1,f()}}}function kn(n){let t,e,l=yt(n[1]),s=[];for(let r=0;r<l.length;r+=1)s[r]=Ue(Oe(n,l,r));return{c(){t=D("div"),e=D("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){t=C(r,"DIV",{class:!0});var o=y(t);e=C(o,"DIV",{class:!0});var i=y(e);for(let c=0;c<s.length;c+=1)s[c].l(i);i.forEach(h),o.forEach(h),this.h()},h(){d(e,"class","flex flex-wrap-reverse px-2 text-left"),d(t,"class","mb-3 md:p-1 text-left w-full")},m(r,o){S(r,t,o),b(t,e);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(r,[o]){if(o&3){l=yt(r[1]);let i;for(i=0;i<l.length;i+=1){const c=Oe(r,l,i);s[i]?s[i].p(c,o):(s[i]=Ue(c),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},i:at,o:at,d(r){r&&h(t),$t(s,r)}}}function yn(n,t,e){let{submitPrompt:l}=t,{suggestionPrompts:s=[]}=t,r=[];const o=i=>{l(i.content)};return n.$$set=i=>{"submitPrompt"in i&&e(0,l=i.submitPrompt),"suggestionPrompts"in i&&e(2,s=i.suggestionPrompts)},n.$$.update=()=>{n.$$.dirty&4&&e(1,r=s.length<=4?s:s.sort(()=>Math.random()-.5).slice(0,4))},[l,r,s,o]}class En extends Mt{constructor(t){super(),Tt(this,t,yn,kn,It,{submitPrompt:0,suggestionPrompts:2})}}function Ne(n,t,e){const l=n.slice();return l[17]=t[e],l[19]=e,l}function Re(n){var g,m;let t,e,l,s='<div class="text-lg font-semibold mt-2">#</div>',r,o,i,c,f=(m=(g=n[0].split(" "))==null?void 0:g.at(0))==null?void 0:m.substring(1).startsWith("http"),a=yt(n[2]),u=[];for(let p=0;p<a.length;p+=1)u[p]=je(Ne(n,a,p));let _=f&&xe(n);return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=N(),o=D("div"),i=D("div");for(let p=0;p<u.length;p+=1)u[p].c();c=N(),_&&_.c(),this.h()},l(p){t=C(p,"DIV",{class:!0});var k=y(t);e=C(k,"DIV",{class:!0});var w=y(e);l=C(w,"DIV",{class:!0,"data-svelte-h":!0}),ht(l)!=="svelte-czbw16"&&(l.innerHTML=s),r=R(w),o=C(w,"DIV",{class:!0});var V=y(o);i=C(V,"DIV",{class:!0});var M=y(i);for(let E=0;E<u.length;E+=1)u[E].l(M);c=R(M),_&&_.l(M),M.forEach(h),V.forEach(h),w.forEach(h),k.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(p,k){S(p,t,k),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let w=0;w<u.length;w+=1)u[w]&&u[w].m(i,null);b(i,c),_&&_.m(i,null)},p(p,k){var w,V;if(k&46){a=yt(p[2]);let M;for(M=0;M<a.length;M+=1){const E=Ne(p,a,M);u[M]?u[M].p(E,k):(u[M]=je(E),u[M].c(),u[M].m(i,c))}for(;M<u.length;M+=1)u[M].d(1);u.length=a.length}k&1&&(f=(V=(w=p[0].split(" "))==null?void 0:w.at(0))==null?void 0:V.substring(1).startsWith("http")),f?_?_.p(p,k):(_=xe(p),_.c(),_.m(i,null)):_&&(_.d(1),_=null)},d(p){p&&h(t),$t(u,p),_&&_.d()}}}function Dn(n){let t,e,l=n[17].name+"",s,r,o=n[17].filename+"",i,c,f,a,u=n[17].title+"",_;return{c(){t=D("div"),e=tt("#"),s=tt(l),r=tt(" ("),i=tt(o),c=tt(")"),f=N(),a=D("div"),_=tt(u),this.h()},l(g){t=C(g,"DIV",{class:!0});var m=y(t);e=et(m,"#"),s=et(m,l),r=et(m," ("),i=et(m,o),c=et(m,")"),m.forEach(h),f=R(g),a=C(g,"DIV",{class:!0});var p=y(a);_=et(p,u),p.forEach(h),this.h()},h(){d(t,"class","font-medium text-black line-clamp-1"),d(a,"class","text-xs text-gray-600 line-clamp-1")},m(g,m){S(g,t,m),b(t,e),b(t,s),b(t,r),b(t,i),b(t,c),S(g,f,m),S(g,a,m),b(a,_)},p(g,m){m&4&&l!==(l=g[17].name+"")&&it(s,l),m&4&&o!==(o=g[17].filename+"")&&it(i,o),m&4&&u!==(u=g[17].title+"")&&it(_,u)},d(g){g&&(h(t),h(f),h(a))}}}function Cn(n){var c;let t,e=(((c=n[17])==null?void 0:c.title)??`#${n[17].name}`)+"",l,s,r,o=n[3].t("Collection")+"",i;return{c(){t=D("div"),l=tt(e),s=N(),r=D("div"),i=tt(o),this.h()},l(f){t=C(f,"DIV",{class:!0});var a=y(t);l=et(a,e),a.forEach(h),s=R(f),r=C(f,"DIV",{class:!0});var u=y(r);i=et(u,o),u.forEach(h),this.h()},h(){d(t,"class","font-medium text-black line-clamp-1"),d(r,"class","text-xs text-gray-600 line-clamp-1")},m(f,a){S(f,t,a),b(t,l),S(f,s,a),S(f,r,a),b(r,i)},p(f,a){var u;a&4&&e!==(e=(((u=f[17])==null?void 0:u.title)??`#${f[17].name}`)+"")&&it(l,e),a&8&&o!==(o=f[3].t("Collection")+"")&&it(i,o)},d(f){f&&(h(t),h(s),h(r))}}}function je(n){let t,e,l,s;function r(a,u){return a[17].type==="collection"?Cn:Dn}let o=r(n),i=o(n);function c(){return n[13](n[17])}function f(){return n[14](n[19])}return{c(){t=D("button"),i.c(),this.h()},l(a){t=C(a,"BUTTON",{class:!0,type:!0});var u=y(t);i.l(u),u.forEach(h),this.h()},h(){d(t,"class",e="px-3 py-1.5 rounded-xl w-full text-left "+(n[19]===n[1]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(a,u){S(a,t,u),i.m(t,null),l||(s=[O(t,"click",c),O(t,"mousemove",f),O(t,"focus",Mn)],l=!0)},p(a,u){n=a,o===(o=r(n))&&i?i.p(n,u):(i.d(1),i=o(n),i&&(i.c(),i.m(t,null))),u&2&&e!==(e="px-3 py-1.5 rounded-xl w-full text-left "+(n[19]===n[1]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",e)},d(a){a&&h(t),i.d(),l=!1,Nt(s)}}}function xe(n){var u,_;let t,e,l=((_=(u=n[0].split(" "))==null?void 0:u.at(0))==null?void 0:_.substring(1))+"",s,r,o,i=n[3].t("Web")+"",c,f,a;return{c(){t=D("button"),e=D("div"),s=tt(l),r=N(),o=D("div"),c=tt(i),this.h()},l(g){t=C(g,"BUTTON",{class:!0,type:!0});var m=y(t);e=C(m,"DIV",{class:!0});var p=y(e);s=et(p,l),p.forEach(h),r=R(m),o=C(m,"DIV",{class:!0});var k=y(o);c=et(k,i),k.forEach(h),m.forEach(h),this.h()},h(){d(e,"class","font-medium text-black line-clamp-1"),d(o,"class","text-xs text-gray-600 line-clamp-1"),d(t,"class","px-3 py-1.5 rounded-xl w-full text-left bg-gray-100 selected-command-option-button"),d(t,"type","button")},m(g,m){S(g,t,m),b(t,e),b(e,s),b(t,r),b(t,o),b(o,c),f||(a=O(t,"click",n[15]),f=!0)},p(g,m){var p,k;m&1&&l!==(l=((k=(p=g[0].split(" "))==null?void 0:p.at(0))==null?void 0:k.substring(1))+"")&&it(s,l),m&8&&i!==(i=g[3].t("Web")+"")&&it(c,i)},d(g){g&&h(t),f=!1,a()}}}function In(n){var s,r;let t=n[2].length>0||((r=(s=n[0].split(" "))==null?void 0:s.at(0))==null?void 0:r.substring(1).startsWith("http")),e,l=t&&Re(n);return{c(){l&&l.c(),e=bt()},l(o){l&&l.l(o),e=bt()},m(o,i){l&&l.m(o,i),S(o,e,i)},p(o,[i]){var c,f;i&5&&(t=o[2].length>0||((f=(c=o[0].split(" "))==null?void 0:c.at(0))==null?void 0:f.substring(1).startsWith("http"))),t?l?l.p(o,i):(l=Re(o),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:at,o:at,d(o){o&&h(e),l&&l.d(o)}}}const Mn=()=>{};function Tn(n,t,e){let l,s,r;rt(n,vl,E=>e(12,s=E));const o=Jt("i18n");rt(n,o,E=>e(3,r=E));let{prompt:i=""}=t;const c=hl();let f=0,a=[],u=[],_=[];const g=()=>{e(1,f=Math.max(0,f-1))},m=()=>{e(1,f=Math.min(f+1,a.length-1))},p=async E=>{c("select",E),e(0,i=ke(i));const T=document.getElementById("chat-textarea");await vt(),T==null||T.focus(),await vt()},k=async E=>{c("url",E),e(0,i=ke(i));const T=document.getElementById("chat-textarea");await vt(),T==null||T.focus(),await vt()},w=E=>{console.log(E),p(E)},V=E=>{e(1,f=E)},M=()=>{var T,I;const E=(I=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:I.substring(1);yl(E)?k(E):dt.error(r.t("Oops! Looks like the URL is invalid. Please double-check and try again."))};return n.$$set=E=>{"prompt"in E&&e(0,i=E.prompt)},n.$$.update=()=>{n.$$.dirty&4096&&e(10,_=[...s.length>0?[{name:"All Documents",type:"collection",title:"All Documents",collection_names:s.map(E=>E.collection_name)}]:[],...s.reduce((E,T,I,G)=>{var B;return[...new Set([...E,...(((B=T==null?void 0:T.content)==null?void 0:B.tags)??[]).map(j=>j.name)])]},[]).map(E=>({name:E,type:"collection",collection_names:s.filter(T=>{var I;return(((I=T==null?void 0:T.content)==null?void 0:I.tags)??[]).map(G=>G.name).includes(E)}).map(T=>T.collection_name)}))]),n.$$.dirty&1025&&e(11,l=_.filter(E=>{var T,I;return E.name.includes(((I=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:I.substring(1))??"")}).sort((E,T)=>E.name.localeCompare(T.name))),n.$$.dirty&4097&&e(9,u=s.filter(E=>{var T,I;return E.name.includes(((I=(T=i.split(" "))==null?void 0:T.at(0))==null?void 0:I.substring(1))??"")}).sort((E,T)=>E.title.localeCompare(T.title))),n.$$.dirty&2560&&e(2,a=[...l,...u]),n.$$.dirty&2049&&i&&(e(1,f=0),console.log(l))},[i,f,a,r,o,p,k,g,m,u,_,l,s,w,V,M]}class Vn extends Mt{constructor(t){super(),Tt(this,t,Tn,In,It,{prompt:0,selectUp:7,selectDown:8})}get selectUp(){return this.$$.ctx[7]}get selectDown(){return this.$$.ctx[8]}}function ze(n,t,e){const l=n.slice();return l[14]=t[e],l[16]=e,l}function Fe(n){let t,e,l,s='<div class="text-lg font-semibold mt-2">@</div>',r,o,i,c=yt(n[1]),f=[];for(let a=0;a<c.length;a+=1)f[a]=qe(ze(n,c,a));return{c(){t=D("div"),e=D("div"),l=D("div"),l.innerHTML=s,r=N(),o=D("div"),i=D("div");for(let a=0;a<f.length;a+=1)f[a].c();this.h()},l(a){t=C(a,"DIV",{class:!0});var u=y(t);e=C(u,"DIV",{class:!0});var _=y(e);l=C(_,"DIV",{class:!0,"data-svelte-h":!0}),ht(l)!=="svelte-9l3i17"&&(l.innerHTML=s),r=R(_),o=C(_,"DIV",{class:!0});var g=y(o);i=C(g,"DIV",{class:!0});var m=y(i);for(let p=0;p<f.length;p+=1)f[p].l(m);m.forEach(h),g.forEach(h),_.forEach(h),u.forEach(h),this.h()},h(){d(l,"class","bg-gray-100 dark:bg-gray-700 w-10 rounded-l-xl text-center"),d(i,"class","m-1 overflow-y-auto p-1 rounded-r-xl space-y-0.5"),d(o,"class","max-h-60 flex flex-col w-full rounded-r-xl bg-white"),d(e,"class","flex w-full px-2"),d(t,"class","md:px-2 mb-3 text-left w-full absolute bottom-0 left-0 right-0")},m(a,u){S(a,t,u),b(t,e),b(e,l),b(e,r),b(e,o),b(o,i);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(i,null)},p(a,u){if(u&11){c=yt(a[1]);let _;for(_=0;_<c.length;_+=1){const g=ze(a,c,_);f[_]?f[_].p(g,u):(f[_]=qe(g),f[_].c(),f[_].m(i,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=c.length}},d(a){a&&h(t),$t(f,a)}}}function qe(n){let t,e,l=n[14].name+"",s,r,o,i,c;function f(){return n[11](n[14])}function a(){return n[12](n[16])}return{c(){t=D("button"),e=D("div"),s=tt(l),r=N(),this.h()},l(u){t=C(u,"BUTTON",{class:!0,type:!0});var _=y(t);e=C(_,"DIV",{class:!0});var g=y(e);s=et(g,l),g.forEach(h),r=R(_),_.forEach(h),this.h()},h(){d(e,"class","font-medium text-black line-clamp-1"),d(t,"class",o="px-3 py-1.5 rounded-xl w-full text-left "+(n[16]===n[0]?" bg-gray-100 selected-command-option-button":"")),d(t,"type","button")},m(u,_){S(u,t,_),b(t,e),b(e,s),b(t,r),i||(c=[O(t,"click",f),O(t,"mousemove",a),O(t,"focus",Bn)],i=!0)},p(u,_){n=u,_&2&&l!==(l=n[14].name+"")&&it(s,l),_&1&&o!==(o="px-3 py-1.5 rounded-xl w-full text-left "+(n[16]===n[0]?" bg-gray-100 selected-command-option-button":""))&&d(t,"class",o)},d(u){u&&h(t),i=!1,Nt(c)}}}function Sn(n){let t,e=n[1].length>0&&Fe(n);return{c(){e&&e.c(),t=bt()},l(l){e&&e.l(l),t=bt()},m(l,s){e&&e.m(l,s),S(l,t,s)},p(l,[s]){l[1].length>0?e?e.p(l,s):(e=Fe(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},i:at,o:at,d(l){l&&h(t),e&&e.d(l)}}}const Bn=()=>{};function Ln(n,t,e){let l,s;rt(n,al,w=>e(10,s=w));const r=Jt("i18n");rt(n,r,w=>e(13,l=w));let{prompt:o=""}=t,{user:i=null}=t,{chatInputPlaceholder:c=""}=t,{messages:f=[]}=t,a=0,u=[];const _=()=>{e(0,a=Math.max(0,a-1))},g=()=>{e(0,a=Math.min(a+1,u.length-1))},m=async w=>{e(4,o=""),e(5,i=JSON.parse(JSON.stringify(w.name))),await vt(),e(6,c=l.t("{{modelName}} is thinking...",{modelName:w.name}));const V=document.getElementById("chat-textarea");await vt(),V==null||V.focus(),await vt();const M=f.reduce((T,I,G,B)=>`${T}### ${I.role.toUpperCase()}
${I.content}

`,""),E=await Ml(localStorage.token,w.name,M);if(E&&E.ok){const T=E.body.pipeThrough(new TextDecoderStream).pipeThrough(El(`
`)).getReader();for(;;){const{value:I,done:G}=await T.read();if(G)break;try{let B=I.split(`
`);for(const j of B)if(j!==""){console.log(j);let Q=JSON.parse(j);if("detail"in Q)throw Q;if("id"in Q)console.log(Q);else if(Q.done==!1){if(o==""&&Q.response==`
`)continue;e(4,o+=Q.response),console.log(Q.response),V.scrollTop=V.scrollHeight,await vt()}}}catch(B){console.log(B),"detail"in B&&dt.error(B.detail);break}}}else if(E!==null){const T=await E.json();console.log(T),"detail"in T?dt.error(T.detail):dt.error(T.error)}else dt.error(l.t("Uh-oh! There was an issue connecting to {{provider}}.",{provider:"llama"}));e(6,c=""),console.log(i)},p=w=>{m(w)},k=w=>{e(0,a=w)};return n.$$set=w=>{"prompt"in w&&e(4,o=w.prompt),"user"in w&&e(5,i=w.user),"chatInputPlaceholder"in w&&e(6,c=w.chatInputPlaceholder),"messages"in w&&e(7,f=w.messages)},n.$$.update=()=>{n.$$.dirty&1040&&e(1,u=s.filter(w=>{var V,M;return w.name!=="hr"&&!w.external&&w.name.includes(((M=(V=o.split(" "))==null?void 0:V.at(0))==null?void 0:M.substring(1))??"")}).sort((w,V)=>w.name.localeCompare(V.name))),n.$$.dirty&16&&o&&e(0,a=0)},[a,u,r,m,o,i,c,f,_,g,s,p,k]}class Hn extends Mt{constructor(t){super(),Tt(this,t,Ln,Sn,It,{prompt:4,user:5,chatInputPlaceholder:6,messages:7,selectUp:8,selectDown:9})}get selectUp(){return this.$$.ctx[8]}get selectDown(){return this.$$.ctx[9]}}function We(n,t,e){const l=n.slice();return l[58]=t[e],l[60]=e,l}function Ze(n){let t,e,l,s,r,o;return r=new Dl({}),{c(){t=D("div"),e=D("div"),l=D("div"),s=D("div"),X(r.$$.fragment),this.h()},l(i){t=C(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var c=y(t);e=C(c,"DIV",{class:!0});var f=y(e);l=C(f,"DIV",{class:!0});var a=y(l);s=C(a,"DIV",{class:!0});var u=y(s);K(r.$$.fragment,u),u.forEach(h),a.forEach(h),f.forEach(h),c.forEach(h),this.h()},h(){d(s,"class","max-w-md"),d(l,"class","m-auto pt-64 flex flex-col justify-center"),d(e,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),d(t,"class","fixed lg:w-[calc(100%-260px)] w-full h-full flex z-50 touch-none pointer-events-none"),d(t,"id","dropzone"),d(t,"role","region"),d(t,"aria-label","Drag and Drop Container")},m(i,c){S(i,t,c),b(t,e),b(e,l),b(l,s),Y(r,s,null),o=!0},i(i){o||(H(r.$$.fragment,i),o=!0)},o(i){P(r.$$.fragment,i),o=!1},d(i){i&&h(t),J(r)}}}function Ge(n){let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 3a.75.75 0 01.75.75v10.638l3.96-4.158a.75.75 0 111.08 1.04l-5.25 5.5a.75.75 0 01-1.08 0l-5.25-5.5a.75.75 0 111.08-1.04l3.96 4.158V3.75A.75.75 0 0110 3z" clip-rule="evenodd"></path></svg>',s,r;return{c(){t=D("div"),e=D("button"),e.innerHTML=l,this.h()},l(o){t=C(o,"DIV",{class:!0});var i=y(t);e=C(i,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(e)!=="svelte-a2mahu"&&(e.innerHTML=l),i.forEach(h),this.h()},h(){d(e,"class","bg-white border border-gray-100 dark:border-none dark:bg-white/20 p-1.5 rounded-full"),d(t,"class","absolute -top-12 left-0 right-0 flex justify-center")},m(o,i){S(o,t,i),b(t,e),s||(r=O(e,"click",n[25]),s=!0)},p:at,d(o){o&&h(t),s=!1,r()}}}function Pn(n){let t,e,l,s,r;function o(a){n[33](a)}function i(a){n[34](a)}function c(a){n[35](a)}let f={messages:n[8]};return n[0]!==void 0&&(f.prompt=n[0]),n[16]!==void 0&&(f.user=n[16]),n[17]!==void 0&&(f.chatInputPlaceholder=n[17]),t=new Hn({props:f}),n[32](t),ut.push(()=>Wt(t,"prompt",o)),ut.push(()=>Wt(t,"user",i)),ut.push(()=>Wt(t,"chatInputPlaceholder",c)),{c(){X(t.$$.fragment)},l(a){K(t.$$.fragment,a)},m(a,u){Y(t,a,u),r=!0},p(a,u){const _={};u[0]&256&&(_.messages=a[8]),!e&&u[0]&1&&(e=!0,_.prompt=a[0],qt(()=>e=!1)),!l&&u[0]&65536&&(l=!0,_.user=a[16],qt(()=>l=!1)),!s&&u[0]&131072&&(s=!0,_.chatInputPlaceholder=a[17],qt(()=>s=!1)),t.$set(_)},i(a){r||(H(t.$$.fragment,a),r=!0)},o(a){P(t.$$.fragment,a),r=!1},d(a){n[32](null),J(t,a)}}}function An(n){let t,e,l;function s(o){n[29](o)}let r={};return n[0]!==void 0&&(r.prompt=n[0]),t=new Vn({props:r}),n[28](t),ut.push(()=>Wt(t,"prompt",s)),t.$on("url",n[30]),t.$on("select",n[31]),{c(){X(t.$$.fragment)},l(o){K(t.$$.fragment,o)},m(o,i){Y(t,o,i),l=!0},p(o,i){const c={};!e&&i[0]&1&&(e=!0,c.prompt=o[0],qt(()=>e=!1)),t.$set(c)},i(o){l||(H(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){n[28](null),J(t,o)}}}function On(n){let t,e,l;function s(o){n[27](o)}let r={};return n[0]!==void 0&&(r.prompt=n[0]),t=new vn({props:r}),n[26](t),ut.push(()=>Wt(t,"prompt",s)),{c(){X(t.$$.fragment)},l(o){K(t.$$.fragment,o)},m(o,i){Y(t,o,i),l=!0},p(o,i){const c={};!e&&i[0]&1&&(e=!0,c.prompt=o[0],qt(()=>e=!1)),t.$set(c)},i(o){l||(H(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){n[26](null),J(t,o)}}}function Qe(n){let t,e;return t=new En({props:{suggestionPrompts:n[5],submitPrompt:n[3]}}),{c(){X(t.$$.fragment)},l(l){K(t.$$.fragment,l)},m(l,s){Y(t,l,s),e=!0},p(l,s){const r={};s[0]&32&&(r.suggestionPrompts=l[5]),s[0]&8&&(r.submitPrompt=l[3]),t.$set(r)},i(l){e||(H(t.$$.fragment,l),e=!0)},o(l){P(t.$$.fragment,l),e=!1},d(l){J(t,l)}}}function Xe(n){let t,e=yt(n[2]),l=[];for(let s=0;s<e.length;s+=1)l[s]=Ke(We(n,e,s));return{c(){t=D("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){t=C(s,"DIV",{class:!0});var r=y(t);for(let o=0;o<l.length;o+=1)l[o].l(r);r.forEach(h),this.h()},h(){d(t,"class","mx-2 mt-2 mb-1 flex flex-wrap gap-2")},m(s,r){S(s,t,r);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(t,null)},p(s,r){if(r[0]&524292){e=yt(s[2]);let o;for(o=0;o<e.length;o+=1){const i=We(s,e,o);l[o]?l[o].p(i,r):(l[o]=Ke(i),l[o].c(),l[o].m(t,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(s){s&&h(t),$t(l,s)}}}function Un(n){var g;let t,e,l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6"><path d="M7.5 3.375c0-1.036.84-1.875 1.875-1.875h.375a3.75 3.75 0 0 1 3.75 3.75v1.875C13.5 8.161 14.34 9 15.375 9h1.875A3.75 3.75 0 0 1 21 12.75v3.375C21 17.16 20.16 18 19.125 18h-9.75A1.875 1.875 0 0 1 7.5 16.125V3.375Z"></path><path d="M15 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 17.25 7.5h-1.875A.375.375 0 0 1 15 7.125V5.25ZM4.875 6H6v10.125A3.375 3.375 0 0 0 9.375 19.5H16.5v1.125c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625V7.875C3 6.839 3.84 6 4.875 6Z"></path></svg>',s,r,o,i=(((g=n[58])==null?void 0:g.title)??`#${n[58].name}`)+"",c,f,a,u=n[19].t("Collection")+"",_;return{c(){t=D("div"),e=D("div"),e.innerHTML=l,s=N(),r=D("div"),o=D("div"),c=tt(i),f=N(),a=D("div"),_=tt(u),this.h()},l(m){t=C(m,"DIV",{class:!0});var p=y(t);e=C(p,"DIV",{class:!0,"data-svelte-h":!0}),ht(e)!=="svelte-1h7831u"&&(e.innerHTML=l),s=R(p),r=C(p,"DIV",{class:!0});var k=y(r);o=C(k,"DIV",{class:!0});var w=y(o);c=et(w,i),w.forEach(h),f=R(k),a=C(k,"DIV",{class:!0});var V=y(a);_=et(V,u),V.forEach(h),k.forEach(h),p.forEach(h),this.h()},h(){d(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),d(o,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),d(a,"class","text-gray-500 text-sm"),d(r,"class","flex flex-col justify-center -space-y-0.5"),d(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(m,p){S(m,t,p),b(t,e),b(t,s),b(t,r),b(r,o),b(o,c),b(r,f),b(r,a),b(a,_)},p(m,p){var k;p[0]&4&&i!==(i=(((k=m[58])==null?void 0:k.title)??`#${m[58].name}`)+"")&&it(c,i),p[0]&524288&&u!==(u=m[19].t("Collection")+"")&&it(_,u)},d(m){m&&h(t)}}}function Nn(n){let t,e,l,s,r,o=n[58].name+"",i,c,f,a=n[19].t("Document")+"",u;function _(p,k){return p[58].upload_status?xn:jn}let g=_(n),m=g(n);return{c(){t=D("div"),e=D("div"),m.c(),l=N(),s=D("div"),r=D("div"),i=tt(o),c=N(),f=D("div"),u=tt(a),this.h()},l(p){t=C(p,"DIV",{class:!0});var k=y(t);e=C(k,"DIV",{class:!0});var w=y(e);m.l(w),w.forEach(h),l=R(k),s=C(k,"DIV",{class:!0});var V=y(s);r=C(V,"DIV",{class:!0});var M=y(r);i=et(M,o),M.forEach(h),c=R(V),f=C(V,"DIV",{class:!0});var E=y(f);u=et(E,a),E.forEach(h),V.forEach(h),k.forEach(h),this.h()},h(){d(e,"class","p-2.5 bg-red-400 text-white rounded-lg"),d(r,"class","dark:text-gray-100 text-sm font-medium line-clamp-1"),d(f,"class","text-gray-500 text-sm"),d(s,"class","flex flex-col justify-center -space-y-0.5"),d(t,"class","h-16 w-[15rem] flex items-center space-x-3 px-2.5 dark:bg-gray-600 rounded-xl border border-gray-200 dark:border-none")},m(p,k){S(p,t,k),b(t,e),m.m(e,null),b(t,l),b(t,s),b(s,r),b(r,i),b(s,c),b(s,f),b(f,u)},p(p,k){g!==(g=_(p))&&(m.d(1),m=g(p),m&&(m.c(),m.m(e,null))),k[0]&4&&o!==(o=p[58].name+"")&&it(i,o),k[0]&524288&&a!==(a=p[19].t("Document")+"")&&it(u,a)},d(p){p&&h(t),m.d()}}}function Rn(n){let t,e;return{c(){t=D("img"),this.h()},l(l){t=C(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){pe(t.src,e=n[58].url)||d(t,"src",e),d(t,"alt","input"),d(t,"class","h-16 w-16 rounded-xl object-cover")},m(l,s){S(l,t,s)},p(l,s){s[0]&4&&!pe(t.src,e=l[58].url)&&d(t,"src",e)},d(l){l&&h(t)}}}function jn(n){let t,e,l,s,r,o;return{c(){t=W("svg"),e=W("style"),l=tt(`.spinner_qM83 {\r
																animation: spinner_8HQG 1.05s infinite;\r
															}\r
															.spinner_oXPr {\r
																animation-delay: 0.1s;\r
															}\r
															.spinner_ZTLf {\r
																animation-delay: 0.2s;\r
															}\r
															@keyframes spinner_8HQG {\r
																0%,\r
																57.14% {\r
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																	transform: translate(0);\r
																}\r
																28.57% {\r
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																	transform: translateY(-6px);\r
																}\r
																100% {\r
																	transform: translate(0);\r
																}\r
															}\r
														`),s=W("circle"),r=W("circle"),o=W("circle"),this.h()},l(i){t=Z(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=y(t);e=Z(c,"style",{});var f=y(e);l=et(f,`.spinner_qM83 {\r
																animation: spinner_8HQG 1.05s infinite;\r
															}\r
															.spinner_oXPr {\r
																animation-delay: 0.1s;\r
															}\r
															.spinner_ZTLf {\r
																animation-delay: 0.2s;\r
															}\r
															@keyframes spinner_8HQG {\r
																0%,\r
																57.14% {\r
																	animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																	transform: translate(0);\r
																}\r
																28.57% {\r
																	animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																	transform: translateY(-6px);\r
																}\r
																100% {\r
																	transform: translate(0);\r
																}\r
															}\r
														`),f.forEach(h),s=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(s).forEach(h),r=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(r).forEach(h),o=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(o).forEach(h),c.forEach(h),this.h()},h(){d(s,"class","spinner_qM83"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","2.5"),d(r,"class","spinner_qM83 spinner_oXPr"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","2.5"),d(o,"class","spinner_qM83 spinner_ZTLf"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","2.5"),d(t,"class","w-6 h-6 translate-y-[0.5px]"),d(t,"fill","currentColor"),d(t,"viewBox","0 0 24 24"),d(t,"xmlns","http://www.w3.org/2000/svg")},m(i,c){S(i,t,c),b(t,e),b(e,l),b(t,s),b(t,r),b(t,o)},d(i){i&&h(t)}}}function xn(n){let t,e,l;return{c(){t=W("svg"),e=W("path"),l=W("path"),this.h()},l(s){t=Z(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=y(t);e=Z(r,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(e).forEach(h),l=Z(r,"path",{d:!0}),y(l).forEach(h),r.forEach(h),this.h()},h(){d(e,"fill-rule","evenodd"),d(e,"d","M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z"),d(e,"clip-rule","evenodd"),d(l,"d","M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"fill","currentColor"),d(t,"class","w-6 h-6")},m(s,r){S(s,t,r),b(t,e),b(t,l)},d(s){s&&h(t)}}}function Ke(n){let t,e,l,s,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"></path></svg>',o,i,c;function f(g,m){if(g[58].type==="image")return Rn;if(g[58].type==="doc")return Nn;if(g[58].type==="collection")return Un}let a=f(n),u=a&&a(n);function _(){return n[39](n[60])}return{c(){t=D("div"),u&&u.c(),e=N(),l=D("div"),s=D("button"),s.innerHTML=r,o=N(),this.h()},l(g){t=C(g,"DIV",{class:!0});var m=y(t);u&&u.l(m),e=R(m),l=C(m,"DIV",{class:!0});var p=y(l);s=C(p,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ht(s)!=="svelte-3nr9d3"&&(s.innerHTML=r),p.forEach(h),o=R(m),m.forEach(h),this.h()},h(){d(s,"class","bg-gray-400 text-white border border-white rounded-full group-hover:visible invisible transition"),d(s,"type","button"),d(l,"class","absolute -top-1 -right-1"),d(t,"class","relative group")},m(g,m){S(g,t,m),u&&u.m(t,null),b(t,e),b(t,l),b(l,s),b(t,o),i||(c=O(s,"click",_),i=!0)},p(g,m){n=g,a===(a=f(n))&&u?u.p(n,m):(u&&u.d(1),u=a&&a(n),u&&(u.c(),u.m(t,e)))},d(g){g&&h(t),u&&u.d(),i=!1,c()}}}function Ye(n){let t,e,l;return e=new Gt({props:{content:n[19].t("Upload files"),$$slots:{default:[zn]},$$scope:{ctx:n}}}),{c(){t=D("div"),X(e.$$.fragment),this.h()},l(s){t=C(s,"DIV",{class:!0});var r=y(t);K(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-end mb-2 ml-1")},m(s,r){S(s,t,r),Y(e,t,null),l=!0},p(s,r){const o={};r[0]&524288&&(o.content=s[19].t("Upload files")),r[0]&1024|r[1]&1073741824&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(H(e.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),l=!1},d(s){s&&h(t),J(e)}}}function zn(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-[1.2rem] h-[1.2rem]"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=C(r,"BUTTON",{class:!0,type:!0,"data-svelte-h":!0}),ht(t)!=="svelte-19681my"&&(t.innerHTML=e),this.h()},h(){d(t,"class","bg-gray-50 hover:bg-gray-100 text-gray-800 dark:bg-gray-850 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5"),d(t,"type","button")},m(r,o){S(r,t,o),l||(s=O(t,"click",n[40]),l=!0)},p:at,d(r){r&&h(t),l=!1,s()}}}function Fn(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm6-2.438c0-.724.588-1.312 1.313-1.312h4.874c.725 0 1.313.588 1.313 1.313v4.874c0 .725-.588 1.313-1.313 1.313H9.564a1.312 1.312 0 01-1.313-1.313V9.564z" clip-rule="evenodd"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=C(r,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-tod56q"&&(t.innerHTML=e),this.h()},h(){d(t,"class","bg-white hover:bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-800 transition rounded-full p-1.5")},m(r,o){S(r,t,o),l||(s=O(t,"click",function(){gl(n[4])&&n[4].apply(this,arguments)}),l=!0)},p(r,o){n=r},i:at,o:at,d(r){r&&h(t),l=!1,s()}}}function qn(n){let t,e,l,s;return t=new Gt({props:{content:n[19].t("Record voice"),$$slots:{default:[Gn]},$$scope:{ctx:n}}}),l=new Gt({props:{content:n[19].t("Send message"),$$slots:{default:[Qn]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment),e=N(),X(l.$$.fragment)},l(r){K(t.$$.fragment,r),e=R(r),K(l.$$.fragment,r)},m(r,o){Y(t,r,o),S(r,e,o),Y(l,r,o),s=!0},p(r,o){const i={};o[0]&524288&&(i.content=r[19].t("Record voice")),o[0]&262272|o[1]&1073741824&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const c={};o[0]&524288&&(c.content=r[19].t("Send message")),o[0]&1|o[1]&1073741824&&(c.$$scope={dirty:o,ctx:r}),l.$set(c)},i(r){s||(H(t.$$.fragment,r),H(l.$$.fragment,r),s=!0)},o(r){P(t.$$.fragment,r),P(l.$$.fragment,r),s=!1},d(r){r&&h(e),J(t,r),J(l,r)}}}function Je(n){let t,e,l;function s(i,c){return i[18]?Zn:Wn}let r=s(n),o=r(n);return{c(){t=D("button"),o.c(),this.h()},l(i){t=C(i,"BUTTON",{id:!0,class:!0,type:!0});var c=y(t);o.l(c),c.forEach(h),this.h()},h(){d(t,"id","voice-input-button"),d(t,"class","text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-full p-1.5 mr-0.5 self-center"),d(t,"type","button")},m(i,c){S(i,t,c),o.m(t,null),e||(l=O(t,"click",n[48]),e=!0)},p(i,c){r!==(r=s(i))&&(o.d(1),o=r(i),o&&(o.c(),o.m(t,null)))},d(i){i&&h(t),o.d(),e=!1,l()}}}function Wn(n){let t,e,l;return{c(){t=W("svg"),e=W("path"),l=W("path"),this.h()},l(s){t=Z(s,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var r=y(t);e=Z(r,"path",{d:!0}),y(e).forEach(h),l=Z(r,"path",{d:!0}),y(l).forEach(h),r.forEach(h),this.h()},h(){d(e,"d","M7 4a3 3 0 016 0v6a3 3 0 11-6 0V4z"),d(l,"d","M5.5 9.643a.75.75 0 00-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5v-1.546A6.001 6.001 0 0016 10v-.357a.75.75 0 00-1.5 0V10a4.5 4.5 0 01-9 0v-.357z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 20 20"),d(t,"fill","currentColor"),d(t,"class","w-5 h-5 translate-y-[0.5px]")},m(s,r){S(s,t,r),b(t,e),b(t,l)},d(s){s&&h(t)}}}function Zn(n){let t,e,l,s,r,o;return{c(){t=W("svg"),e=W("style"),l=tt(`.spinner_qM83 {\r
															animation: spinner_8HQG 1.05s infinite;\r
														}\r
														.spinner_oXPr {\r
															animation-delay: 0.1s;\r
														}\r
														.spinner_ZTLf {\r
															animation-delay: 0.2s;\r
														}\r
														@keyframes spinner_8HQG {\r
															0%,\r
															57.14% {\r
																animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																transform: translate(0);\r
															}\r
															28.57% {\r
																animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																transform: translateY(-6px);\r
															}\r
															100% {\r
																transform: translate(0);\r
															}\r
														}\r
													`),s=W("circle"),r=W("circle"),o=W("circle"),this.h()},l(i){t=Z(i,"svg",{class:!0,fill:!0,viewBox:!0,xmlns:!0});var c=y(t);e=Z(c,"style",{});var f=y(e);l=et(f,`.spinner_qM83 {\r
															animation: spinner_8HQG 1.05s infinite;\r
														}\r
														.spinner_oXPr {\r
															animation-delay: 0.1s;\r
														}\r
														.spinner_ZTLf {\r
															animation-delay: 0.2s;\r
														}\r
														@keyframes spinner_8HQG {\r
															0%,\r
															57.14% {\r
																animation-timing-function: cubic-bezier(0.33, 0.66, 0.66, 1);\r
																transform: translate(0);\r
															}\r
															28.57% {\r
																animation-timing-function: cubic-bezier(0.33, 0, 0.66, 0.33);\r
																transform: translateY(-6px);\r
															}\r
															100% {\r
																transform: translate(0);\r
															}\r
														}\r
													`),f.forEach(h),s=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(s).forEach(h),r=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(r).forEach(h),o=Z(c,"circle",{class:!0,cx:!0,cy:!0,r:!0}),y(o).forEach(h),c.forEach(h),this.h()},h(){d(s,"class","spinner_qM83"),d(s,"cx","4"),d(s,"cy","12"),d(s,"r","2.5"),d(r,"class","spinner_qM83 spinner_oXPr"),d(r,"cx","12"),d(r,"cy","12"),d(r,"r","2.5"),d(o,"class","spinner_qM83 spinner_ZTLf"),d(o,"cx","20"),d(o,"cy","12"),d(o,"r","2.5"),d(t,"class","w-5 h-5 translate-y-[0.5px]"),d(t,"fill","currentColor"),d(t,"viewBox","0 0 24 24"),d(t,"xmlns","http://www.w3.org/2000/svg")},m(i,c){S(i,t,c),b(t,e),b(e,l),b(t,s),b(t,r),b(t,o)},d(i){i&&h(t)}}}function Gn(n){let t,e=n[7]&&Je(n);return{c(){e&&e.c(),t=bt()},l(l){e&&e.l(l),t=bt()},m(l,s){e&&e.m(l,s),S(l,t,s)},p(l,s){l[7]?e?e.p(l,s):(e=Je(l),e.c(),e.m(t.parentNode,t)):e&&(e.d(1),e=null)},d(l){l&&h(t),e&&e.d(l)}}}function Qn(n){let t,e,l,s,r;return{c(){t=D("button"),e=W("svg"),l=W("path"),this.h()},l(o){t=C(o,"BUTTON",{class:!0,type:!0});var i=y(t);e=Z(i,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var c=y(e);l=Z(c,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(l).forEach(h),c.forEach(h),i.forEach(h),this.h()},h(){d(l,"fill-rule","evenodd"),d(l,"d","M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z"),d(l,"clip-rule","evenodd"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"viewBox","0 0 16 16"),d(e,"fill","currentColor"),d(e,"class","w-5 h-5"),d(t,"class",s=(n[0]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-100 dark:text-gray-900 dark:bg-gray-800 disabled")+" transition rounded-full p-1.5 self-center"),d(t,"type","submit"),t.disabled=r=n[0]===""},m(o,i){S(o,t,i),b(t,e),b(e,l)},p(o,i){i[0]&1&&s!==(s=(o[0]!==""?"bg-black text-white hover:bg-gray-900 dark:bg-white dark:text-black dark:hover:bg-gray-100 ":"text-white bg-gray-100 dark:text-gray-900 dark:bg-gray-800 disabled")+" transition rounded-full p-1.5 self-center")&&d(t,"class",s),i[0]&1&&r!==(r=o[0]==="")&&(t.disabled=r)},d(o){o&&h(t)}}}function Xn(n){let t,e,l,s,r,o,i,c,f,a,u,_,g,m,p,k,w,V,M,E,T,I,G,B,j,Q,$,ct,q,mt,_t,jt,pt,Vt=n[19].t("LLMs can make mistakes. Verify important information.")+"",xt,Et,Zt,Qt,lt=n[15]&&Ze(),ot=n[1]===!1&&n[8].length>0&&Ge(n);const L=[On,An,Pn],St=[];function se(A,F){return F[0]&1&&(c=null),F[0]&1&&(f=null),F[0]&1&&(a=null),c==null&&(c=A[0].charAt(0)==="/"),c?0:(f==null&&(f=A[0].charAt(0)==="#"),f?1:(a==null&&(a=A[0].charAt(0)==="@"),a?2:-1))}~(u=se(n,[-1,-1]))&&(_=St[u]=L[u](n));let nt=n[8].length==0&&n[5].length!==0&&Qe(n),ft=n[2].length>0&&Xe(n),st=n[6]&&Ye(n);const re=[qn,Fn],Bt=[];function oe(A,F){return F[0]&256&&(q=null),q==null&&(q=A[8].length==0||A[8].at(-1).done==!0),q?0:1}return mt=oe(n,[-1,-1]),_t=Bt[mt]=re[mt](n),{c(){lt&&lt.c(),t=N(),e=D("div"),l=D("div"),s=D("div"),r=D("div"),ot&&ot.c(),o=N(),i=D("div"),_&&_.c(),g=N(),nt&&nt.c(),m=N(),p=D("div"),k=D("div"),w=D("div"),V=D("input"),M=N(),E=D("form"),ft&&ft.c(),T=N(),I=D("div"),st&&st.c(),G=N(),B=D("textarea"),$=N(),ct=D("div"),_t.c(),jt=N(),pt=D("div"),xt=tt(Vt),this.h()},l(A){lt&&lt.l(A),t=R(A),e=C(A,"DIV",{class:!0});var F=y(e);l=C(F,"DIV",{class:!0});var zt=y(l);s=C(zt,"DIV",{class:!0});var Lt=y(s);r=C(Lt,"DIV",{class:!0});var ie=y(r);ot&&ot.l(ie),ie.forEach(h),o=R(Lt),i=C(Lt,"DIV",{class:!0});var Xt=y(i);_&&_.l(Xt),g=R(Xt),nt&&nt.l(Xt),Xt.forEach(h),Lt.forEach(h),zt.forEach(h),m=R(F),p=C(F,"DIV",{class:!0});var ae=y(p);k=C(ae,"DIV",{class:!0});var ce=y(k);w=C(ce,"DIV",{class:!0});var Ft=y(w);V=C(Ft,"INPUT",{type:!0}),M=R(Ft),E=C(Ft,"FORM",{class:!0});var Kt=y(E);ft&&ft.l(Kt),T=R(Kt),I=C(Kt,"DIV",{class:!0});var v=y(I);st&&st.l(v),G=R(v),B=C(v,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),y(B).forEach(h),$=R(v),ct=C(v,"DIV",{class:!0});var z=y(ct);_t.l(z),z.forEach(h),v.forEach(h),Kt.forEach(h),jt=R(Ft),pt=C(Ft,"DIV",{class:!0});var U=y(pt);xt=et(U,Vt),U.forEach(h),Ft.forEach(h),ce.forEach(h),ae.forEach(h),F.forEach(h),this.h()},h(){d(r,"class","relative"),d(i,"class","w-full relative"),d(s,"class","flex flex-col max-w-3xl w-full"),d(l,"class","px-2.5 -mb-0.5 mx-auto inset-x-0 bg-transparent flex justify-center"),d(V,"type","file"),V.hidden=!0,V.multiple=!0,d(B,"id","chat-textarea"),d(B,"class",j="dark:bg-gray-900 dark:text-gray-100 outline-none w-full py-3 px-3 "+(n[6]?"":" pl-4")+" rounded-xl resize-none h-[48px]"),d(B,"placeholder",Q=n[17]!==""?n[17]:n[18]?n[19].t("Listening..."):n[19].t("Send a Message")),d(B,"rows","1"),d(ct,"class","self-end mb-2 flex space-x-1 mr-1"),d(I,"class","flex"),d(E,"class","flex flex-col relative w-full rounded-3xl px-1.5 border border-gray-100 dark:border-gray-850 bg-white dark:bg-gray-900 dark:text-gray-100"),d(pt,"class","mt-1.5 text-xs text-gray-500 text-center"),d(w,"class","pb-2"),d(k,"class","max-w-3xl px-2.5 mx-auto inset-x-0"),d(p,"class","bg-white dark:bg-gray-900"),d(e,"class","w-full")},m(A,F){lt&&lt.m(A,F),S(A,t,F),S(A,e,F),b(e,l),b(l,s),b(s,r),ot&&ot.m(r,null),b(s,o),b(s,i),~u&&St[u].m(i,null),b(i,g),nt&&nt.m(i,null),b(e,m),b(e,p),b(p,k),b(k,w),b(w,V),n[36](V),b(w,M),b(w,E),ft&&ft.m(E,null),b(E,T),b(E,I),st&&st.m(I,null),b(I,G),b(I,B),n[41](B),ge(B,n[0]),b(I,$),b(I,ct),Bt[mt].m(ct,null),b(w,jt),b(w,pt),b(pt,xt),Et=!0,Zt||(Qt=[O(V,"change",n[37]),O(V,"change",n[38]),O(B,"input",n[42]),O(B,"keypress",n[43]),O(B,"keydown",n[44]),O(B,"input",n[45]),O(B,"focus",n[46]),O(B,"paste",n[47]),O(E,"submit",ml(n[49]))],Zt=!0)},p(A,F){A[15]?lt?F[0]&32768&&H(lt,1):(lt=Ze(),lt.c(),H(lt,1),lt.m(t.parentNode,t)):lt&&(Dt(),P(lt,1,1,()=>{lt=null}),Ct()),A[1]===!1&&A[8].length>0?ot?ot.p(A,F):(ot=Ge(A),ot.c(),ot.m(r,null)):ot&&(ot.d(1),ot=null);let zt=u;u=se(A,F),u===zt?~u&&St[u].p(A,F):(_&&(Dt(),P(St[zt],1,1,()=>{St[zt]=null}),Ct()),~u?(_=St[u],_?_.p(A,F):(_=St[u]=L[u](A),_.c()),H(_,1),_.m(i,g)):_=null),A[8].length==0&&A[5].length!==0?nt?(nt.p(A,F),F[0]&288&&H(nt,1)):(nt=Qe(A),nt.c(),H(nt,1),nt.m(i,null)):nt&&(Dt(),P(nt,1,1,()=>{nt=null}),Ct()),A[2].length>0?ft?ft.p(A,F):(ft=Xe(A),ft.c(),ft.m(E,T)):ft&&(ft.d(1),ft=null),A[6]?st?(st.p(A,F),F[0]&64&&H(st,1)):(st=Ye(A),st.c(),H(st,1),st.m(I,G)):st&&(Dt(),P(st,1,1,()=>{st=null}),Ct()),(!Et||F[0]&64&&j!==(j="dark:bg-gray-900 dark:text-gray-100 outline-none w-full py-3 px-3 "+(A[6]?"":" pl-4")+" rounded-xl resize-none h-[48px]"))&&d(B,"class",j),(!Et||F[0]&917504&&Q!==(Q=A[17]!==""?A[17]:A[18]?A[19].t("Listening..."):A[19].t("Send a Message")))&&d(B,"placeholder",Q),F[0]&1&&ge(B,A[0]);let Lt=mt;mt=oe(A,F),mt===Lt?Bt[mt].p(A,F):(Dt(),P(Bt[Lt],1,1,()=>{Bt[Lt]=null}),Ct(),_t=Bt[mt],_t?_t.p(A,F):(_t=Bt[mt]=re[mt](A),_t.c()),H(_t,1),_t.m(ct,null)),(!Et||F[0]&524288)&&Vt!==(Vt=A[19].t("LLMs can make mistakes. Verify important information.")+"")&&it(xt,Vt)},i(A){Et||(H(lt),H(_),H(nt),H(st),H(_t),Et=!0)},o(A){P(lt),P(_),P(nt),P(st),P(_t),Et=!1},d(A){A&&(h(t),h(e)),lt&&lt.d(A),ot&&ot.d(),~u&&St[u].d(),nt&&nt.d(),n[36](null),ft&&ft.d(),st&&st.d(),n[41](null),Bt[mt].d(),Zt=!1,Nt(Qt)}}}function Kn(n,t,e){let l,s;rt(n,fe,v=>e(53,s=v));const r=Jt("i18n");rt(n,r,v=>e(19,l=v));let{submitPrompt:o}=t,{stopResponse:i}=t,{suggestionPrompts:c=[]}=t,{autoScroll:f=!0}=t,a,u,_,g,m,p,k=!1,w=null,V="",{files:M=[]}=t,{fileUploadEnabled:E=!0}=t,{speechRecognitionEnabled:T=!0}=t,{prompt:I=""}=t,{messages:G=[]}=t,B,j,Q=[],$=!1;const ct=-45,q=()=>{const v=document.getElementById("messages-container");v.scrollTop=v.scrollHeight},mt=async()=>{const v=await navigator.mediaDevices.getUserMedia({audio:!0});j=new MediaRecorder(v),j.onstart=()=>{e(18,$=!0),console.log("Recording started")},j.ondataavailable=z=>Q.push(z.data),j.onstop=async()=>{e(18,$=!1),console.log("Recording stopped");const z=new Blob(Q,{type:"audio/wav"}),U=ye(z,"recording.wav"),x=await Ee(localStorage.token,U).catch(gt=>(dt.error(gt),null));x&&(e(0,I=x.text),await vt(),a==null||a.focus(),I!==""&&(s==null?void 0:s.speechAutoSend)===!0&&o(I,w)),Q=[]},j.start(),_t(v)},_t=v=>{const z=new AudioContext,U=z.createMediaStreamSource(v),x=z.createAnalyser();x.minDecibels=ct,U.connect(x);const gt=x.frequencyBinCount,wt=new Uint8Array(gt);let ee=Date.now();const le=()=>{if(x.getByteFrequencyData(wt),wt.some(ne=>ne>0)&&(ee=Date.now()),$&&Date.now()-ee>3e3){j.stop(),z.close();return}window.requestAnimationFrame(le)};window.requestAnimationFrame(le)},jt=()=>{var v;if($)B&&B.stop(),j&&j.stop();else if(e(18,$=!0),((v=s==null?void 0:s.audio)==null?void 0:v.STTEngine)??!1)mt();else if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){B=new(window.SpeechRecognition||window.webkitSpeechRecognition),B.continuous=!0;const z=3e3;let U;B.start(),B.onresult=async x=>{clearTimeout(U),console.log(x);const gt=x.results[Object.keys(x.results).length-1][0].transcript;e(0,I=`${I}${gt}`),await vt(),a==null||a.focus(),U=setTimeout(()=>{console.log("Speech recognition turned off due to inactivity."),B.stop()},z)},B.onend=function(){console.log("recognition ended"),e(18,$=!1),I!==""&&(s==null?void 0:s.speechAutoSend)===!0&&o(I,w)},B.onerror=function(x){console.log(x),dt.error(l.t("Speech recognition error: {{error}}",{error:x.error})),e(18,$=!1)}}else dt.error(l.t("SpeechRecognition API is not supported in this browser."))},pt=async v=>{console.log(v);const z={type:"doc",name:v.name,collection_name:"",upload_status:!1,error:""};try{if(e(2,M=[...M,z]),["audio/mpeg","audio/wav"].includes(v.type)){const x=await Ee(localStorage.token,v).catch(gt=>(dt.error(gt),null));if(x){console.log(x);const gt=new Blob([x.text],{type:"text/plain"});v=ye(gt,`${v.name}.txt`)}}const U=await Cl(localStorage.token,"",v);U&&(z.upload_status=!0,z.collection_name=U.collection_name,e(2,M))}catch(U){e(2,M=M.filter(x=>x.name!==v.name)),dt.error(U)}},Vt=async v=>{console.log(v);const z={type:"doc",name:v,collection_name:"",upload_status:!1,url:v,error:""};try{e(2,M=[...M,z]);const U=await Il(localStorage.token,"",v);U&&(z.upload_status=!0,z.collection_name=U.collection_name,e(2,M))}catch(U){e(2,M=M.filter(x=>x.name!==v)),dt.error(U)}};_l(()=>{window.setTimeout(()=>a==null?void 0:a.focus(),0);const v=document.querySelector("body"),z=wt=>{wt.key==="Escape"&&(console.log("Escape"),e(15,k=!1))},U=wt=>{wt.preventDefault(),e(15,k=!0)},x=()=>{e(15,k=!1)},gt=async wt=>{var ee,le;if(wt.preventDefault(),console.log(wt),(ee=wt.dataTransfer)!=null&&ee.files){const ne=Array.from((le=wt.dataTransfer)==null?void 0:le.files);ne&&ne.length>0?ne.forEach(Rt=>{if(console.log(Rt,Rt.name.split(".").at(-1)),["image/gif","image/jpeg","image/png"].includes(Rt.type)){let _e=new FileReader;_e.onload=dl=>{e(2,M=[...M,{type:"image",url:`${dl.target.result}`}])},_e.readAsDataURL(Rt)}else be.includes(Rt.type)||we.includes(Rt.name.split(".").at(-1))||dt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:Rt.type})),pt(Rt)}):dt.error(l.t("File not found."))}e(15,k=!1)};return window.addEventListener("keydown",z),v==null||v.addEventListener("dragover",U),v==null||v.addEventListener("drop",gt),v==null||v.addEventListener("dragleave",x),()=>{window.removeEventListener("keydown",z),v==null||v.removeEventListener("dragover",U),v==null||v.removeEventListener("drop",gt),v==null||v.removeEventListener("dragleave",x)}});const xt=()=>{e(1,f=!0),q()};function Et(v){ut[v?"unshift":"push"](()=>{_=v,e(11,_)})}function Zt(v){I=v,e(0,I)}function Qt(v){ut[v?"unshift":"push"](()=>{g=v,e(12,g)})}function lt(v){I=v,e(0,I)}const ot=v=>{console.log(v),Vt(v.detail)},L=v=>{var z;console.log(v),e(2,M=[...M,{type:((z=v==null?void 0:v.detail)==null?void 0:z.type)??"doc",...v.detail,upload_status:!0}])};function St(v){ut[v?"unshift":"push"](()=>{m=v,e(13,m)})}function se(v){I=v,e(0,I)}function nt(v){w=v,e(16,w)}function ft(v){V=v,e(17,V)}function st(v){ut[v?"unshift":"push"](()=>{u=v,e(10,u)})}function re(){p=this.files,e(14,p)}const Bt=async()=>{p&&p.length>0?Array.from(p).forEach(z=>{if(["image/gif","image/jpeg","image/png"].includes(z.type)){let U=new FileReader;U.onload=x=>{e(2,M=[...M,{type:"image",url:`${x.target.result}`}]),e(14,p=null),e(10,u.value="",u)},U.readAsDataURL(z)}else be.includes(z.type)||we.includes(z.name.split(".").at(-1))?(pt(z),e(10,u.value="",u)):(dt.error(l.t("Unknown File Type '{{file_type}}', but accepting and treating as plain text",{file_type:z.type})),pt(z),e(10,u.value="",u))}):dt.error(l.t("File not found."))},oe=v=>{M.splice(v,1),e(2,M)},A=()=>{u.click()};function F(v){ut[v?"unshift":"push"](()=>{a=v,e(9,a),e(0,I)})}function zt(){I=this.value,e(0,I)}const Lt=v=>{v.keyCode==13&&!v.shiftKey&&v.preventDefault(),I!==""&&v.keyCode==13&&!v.shiftKey&&o(I,w)},ie=async v=>{const z=v.ctrlKey||v.metaKey;if(I===""&&z&&v.key.toLowerCase()==="r"){v.preventDefault(),console.log("regenerate");const U=[...document.getElementsByClassName("regenerate-response-button")].at(-1);U==null||U.click()}if(I===""&&v.key=="ArrowUp"){v.preventDefault();const U=[...document.getElementsByClassName("user-message")].at(-1),x=[...document.getElementsByClassName("edit-user-message-button")].at(-1);console.log(U),U.scrollIntoView({block:"center"}),x==null||x.click()}if(["/","#","@"].includes(I.charAt(0))&&v.key==="ArrowUp"&&(v.preventDefault(),(_||g||m).selectUp(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(I.charAt(0))&&v.key==="ArrowDown"&&(v.preventDefault(),(_||g||m).selectDown(),[...document.getElementsByClassName("selected-command-option-button")].at(-1).scrollIntoView({block:"center"})),["/","#","@"].includes(I.charAt(0))&&v.key==="Enter"){v.preventDefault();const U=[...document.getElementsByClassName("selected-command-option-button")].at(-1);U==null||U.click()}if(["/","#","@"].includes(I.charAt(0))&&v.key==="Tab"){v.preventDefault();const U=[...document.getElementsByClassName("selected-command-option-button")].at(-1);U==null||U.click()}else if(v.key==="Tab"){const U=cl(I);if(U.length>0){const x=U.at(0),gt=I;e(0,I=I.substring(0,(x==null?void 0:x.endIndex)+1)),await vt(),v.target.scrollTop=v.target.scrollHeight,e(0,I=gt),await vt(),v.preventDefault(),v.target.setSelectionRange(x==null?void 0:x.startIndex,x.endIndex+1)}}},Xt=v=>{v.target.style.height="",v.target.style.height=Math.min(v.target.scrollHeight,200)+"px",e(16,w=null)},ae=v=>{v.target.style.height="",v.target.style.height=Math.min(v.target.scrollHeight,200)+"px"},ce=v=>{const z=v.clipboardData||window.clipboardData;if(z&&z.items){for(const U of z.items)if(U.type.indexOf("image")!==-1){const x=U.getAsFile(),gt=new FileReader;gt.onload=function(wt){e(2,M=[...M,{type:"image",url:`${wt.target.result}`}])},gt.readAsDataURL(x)}}},Ft=()=>{jt()},Kt=()=>{o(I,w)};return n.$$set=v=>{"submitPrompt"in v&&e(3,o=v.submitPrompt),"stopResponse"in v&&e(4,i=v.stopResponse),"suggestionPrompts"in v&&e(5,c=v.suggestionPrompts),"autoScroll"in v&&e(1,f=v.autoScroll),"files"in v&&e(2,M=v.files),"fileUploadEnabled"in v&&e(6,E=v.fileUploadEnabled),"speechRecognitionEnabled"in v&&e(7,T=v.speechRecognitionEnabled),"prompt"in v&&e(0,I=v.prompt),"messages"in v&&e(8,G=v.messages)},n.$$.update=()=>{n.$$.dirty[0]&513&&I&&a&&(e(9,a.style.height="",a),e(9,a.style.height=Math.min(a.scrollHeight,200)+"px",a))},[I,f,M,o,i,c,E,T,G,a,u,_,g,m,p,k,w,V,$,l,r,q,jt,pt,Vt,xt,Et,Zt,Qt,lt,ot,L,St,se,nt,ft,st,re,Bt,oe,A,F,zt,Lt,ie,Xt,ae,ce,Ft,Kt]}class qs extends Mt{constructor(t){super(),Tt(this,t,Kn,Xn,It,{submitPrompt:3,stopResponse:4,suggestionPrompts:5,autoScroll:1,files:2,fileUploadEnabled:6,speechRecognitionEnabled:7,prompt:0,messages:8},null,[-1,-1])}}function $e(n,t,e){const l=n.slice();return l[11]=t[e],l[12]=t,l[13]=e,l}function Yn(n){let t,e,l;return e=new Gt({props:{content:"Remove Model",$$slots:{default:[$n]},$$scope:{ctx:n}}}),{c(){t=D("div"),X(e.$$.fragment),this.h()},l(s){t=C(s,"DIV",{class:!0});var r=y(t);K(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-center disabled:text-gray-600 disabled:hover:text-gray-600 mr-2")},m(s,r){S(s,t,r),Y(e,t,null),l=!0},p(s,r){const o={};r&16387&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(H(e.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),l=!1},d(s){s&&h(t),J(e)}}}function Jn(n){let t,e,l;return e=new Gt({props:{content:"Add Model",$$slots:{default:[ts]},$$scope:{ctx:n}}}),{c(){t=D("div"),X(e.$$.fragment),this.h()},l(s){t=C(s,"DIV",{class:!0});var r=y(t);K(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"class","self-center mr-2 disabled:text-gray-600 disabled:hover:text-gray-600")},m(s,r){S(s,t,r),Y(e,t,null),l=!0},p(s,r){const o={};r&16387&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(H(e.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),l=!1},d(s){s&&h(t),J(e)}}}function $n(n){let t,e,l,s,r;function o(){return n[8](n[13])}return{c(){t=D("button"),e=W("svg"),l=W("path"),this.h()},l(i){t=C(i,"BUTTON",{});var c=y(t);e=Z(c,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var f=y(e);l=Z(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),f.forEach(h),c.forEach(h),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M19.5 12h-15"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","1.5"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4"),t.disabled=n[1]},m(i,c){S(i,t,c),b(t,e),b(e,l),s||(r=O(t,"click",o),s=!0)},p(i,c){n=i,c&2&&(t.disabled=n[1])},d(i){i&&h(t),s=!1,r()}}}function ts(n){let t,e,l,s,r;return{c(){t=D("button"),e=W("svg"),l=W("path"),this.h()},l(o){t=C(o,"BUTTON",{class:!0});var i=y(t);e=Z(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=y(e);l=Z(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),c.forEach(h),i.forEach(h),this.h()},h(){d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M12 6v12m6-6H6"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"fill","none"),d(e,"viewBox","0 0 24 24"),d(e,"stroke-width","1.5"),d(e,"stroke","currentColor"),d(e,"class","w-4 h-4"),d(t,"class",""),t.disabled=n[1]},m(o,i){S(o,t,i),b(t,e),b(e,l),s||(r=O(t,"click",n[7]),s=!0)},p(o,i){i&2&&(t.disabled=o[1])},d(o){o&&h(t),s=!1,r()}}}function tl(n){let t,e,l,s,r,o,i,c,f,a;function u(k){n[6](k,n[11],n[12],n[13])}let _={placeholder:n[3].t("Select a model"),items:n[2].filter(el).map(ll)};n[11]!==void 0&&(_.value=n[11]),s=new Ul({props:_}),ut.push(()=>Wt(s,"value",u));const g=[Jn,Yn],m=[];function p(k,w){return k[13]===0?0:1}return i=p(n),c=m[i]=g[i](n),{c(){t=D("div"),e=D("div"),l=D("div"),X(s.$$.fragment),o=N(),c.c(),f=N(),this.h()},l(k){t=C(k,"DIV",{class:!0});var w=y(t);e=C(w,"DIV",{class:!0});var V=y(e);l=C(V,"DIV",{class:!0});var M=y(l);K(s.$$.fragment,M),M.forEach(h),V.forEach(h),o=R(w),c.l(w),f=R(w),w.forEach(h),this.h()},h(){d(l,"class","mr-0.5 max-w-full"),d(e,"class","overflow-hidden w-full"),d(t,"class","flex w-full")},m(k,w){S(k,t,w),b(t,e),b(e,l),Y(s,l,null),b(t,o),m[i].m(t,null),b(t,f),a=!0},p(k,w){n=k;const V={};w&8&&(V.placeholder=n[3].t("Select a model")),w&4&&(V.items=n[2].filter(el).map(ll)),!r&&w&1&&(r=!0,V.value=n[11],qt(()=>r=!1)),s.$set(V),c.p(n,w)},i(k){a||(H(s.$$.fragment,k),H(c),a=!0)},o(k){P(s.$$.fragment,k),P(c),a=!1},d(k){k&&h(t),J(s),m[i].d()}}}function es(n){let t,e,l,s,r=n[3].t("Set as default")+"",o,i,c,f,a=yt(n[0]),u=[];for(let g=0;g<a.length;g+=1)u[g]=tl($e(n,a,g));const _=g=>P(u[g],1,1,()=>{u[g]=null});return{c(){t=D("div");for(let g=0;g<u.length;g+=1)u[g].c();e=N(),l=D("div"),s=D("button"),o=tt(r),this.h()},l(g){t=C(g,"DIV",{class:!0});var m=y(t);for(let w=0;w<u.length;w+=1)u[w].l(m);m.forEach(h),e=R(g),l=C(g,"DIV",{class:!0});var p=y(l);s=C(p,"BUTTON",{});var k=y(s);o=et(k,r),k.forEach(h),p.forEach(h),this.h()},h(){d(t,"class","flex flex-col mt-0.5 w-full"),d(l,"class","text-left mt-0.5 ml-1 text-[0.7rem] text-gray-500")},m(g,m){S(g,t,m);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(t,null);S(g,e,m),S(g,l,m),b(l,s),b(s,o),i=!0,c||(f=O(s,"click",n[5]),c=!0)},p(g,[m]){if(m&15){a=yt(g[0]);let p;for(p=0;p<a.length;p+=1){const k=$e(g,a,p);u[p]?(u[p].p(k,m),H(u[p],1)):(u[p]=tl(k),u[p].c(),H(u[p],1),u[p].m(t,null))}for(Dt(),p=a.length;p<u.length;p+=1)_(p);Ct()}(!i||m&8)&&r!==(r=g[3].t("Set as default")+"")&&it(o,r)},i(g){if(!i){for(let m=0;m<a.length;m+=1)H(u[m]);i=!0}},o(g){u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)P(u[m]);i=!1},d(g){g&&(h(t),h(e),h(l)),$t(u,g),c=!1,f()}}}const el=n=>n.name!=="hr",ll=n=>({value:n.id,label:n.name,info:n});function ls(n,t,e){let l,s,r,o;rt(n,al,m=>e(2,l=m)),rt(n,bl,m=>e(9,r=m)),rt(n,fe,m=>e(10,o=m));const i=Jt("i18n");rt(n,i,m=>e(3,s=m));let{selectedModels:c=[""]}=t,{disabled:f=!1}=t;const a=async()=>{if(c.filter(p=>p==="").length){dt.error(s.t("Choose a model before saving..."));return}fe.set({...o,models:c}),localStorage.setItem("settings",JSON.stringify(o)),r.role==="admin"&&(console.log("setting default models globally"),await Ll(localStorage.token,c.join(","))),dt.success(s.t("Default model updated"))};function u(m,p,k,w){k[w]=m,e(0,c),e(2,l)}const _=()=>{e(0,c=[...c,""])},g=m=>{c.splice(m,1),e(0,c),e(2,l)};return n.$$set=m=>{"selectedModels"in m&&e(0,c=m.selectedModels),"disabled"in m&&e(1,f=m.disabled)},n.$$.update=()=>{n.$$.dirty&5&&c.length>0&&l.length>0&&e(0,c=c.map(m=>l.map(p=>p.id).includes(m)?m:""))},[c,f,l,s,i,a,u,_,g]}class ns extends Mt{constructor(t){super(),Tt(this,t,ls,es,It,{selectedModels:0,disabled:1})}}function ss(n){let t;const e=n[8].default,l=Pt(e,n,n[14],null);return{c(){l&&l.c()},l(s){l&&l.l(s)},m(s,r){l&&l.m(s,r),t=!0},p(s,r){l&&l.p&&(!t||r&16384)&&At(l,e,s,s[14],t?Ut(e,s[14],r,null):Ot(s[14]),null)},i(s){t||(H(l,s),t=!0)},o(s){P(l,s),t=!1},d(s){l&&l.d(s)}}}function rs(n){let t,e,l,s,r,o="Settings";return{c(){t=W("svg"),e=W("path"),l=W("path"),s=N(),r=D("div"),r.textContent=o,this.h()},l(i){t=Z(i,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var c=y(t);e=Z(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(e).forEach(h),l=Z(c,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(l).forEach(h),c.forEach(h),s=R(i),r=C(i,"DIV",{class:!0,"data-svelte-h":!0}),ht(r)!=="svelte-bpggsr"&&(r.textContent=o),this.h()},h(){d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"d","M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"),d(l,"stroke-linecap","round"),d(l,"stroke-linejoin","round"),d(l,"d","M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","1.5"),d(t,"stroke","currentColor"),d(t,"class","size-4"),d(r,"class","flex items-center")},m(i,c){S(i,t,c),b(t,e),b(t,l),S(i,s,c),S(i,r,c)},p:at,d(i){i&&(h(t),h(s),h(r))}}}function nl(n){let t,e,l,s,r,o,i,c,f;return t=new he({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[os]},$$scope:{ctx:n}}}),t.$on("click",n[10]),l=new Wl({props:{$$slots:{default:[fs]},$$scope:{ctx:n}}}),c=new Al({props:{chatId:n[2].id}}),{c(){X(t.$$.fragment),e=N(),X(l.$$.fragment),s=N(),r=D("hr"),o=N(),i=D("div"),X(c.$$.fragment),this.h()},l(a){K(t.$$.fragment,a),e=R(a),K(l.$$.fragment,a),s=R(a),r=C(a,"HR",{class:!0}),o=R(a),i=C(a,"DIV",{class:!0});var u=y(i);K(c.$$.fragment,u),u.forEach(h),this.h()},h(){d(r,"class","border-gray-100 dark:border-gray-800 mt-2.5 mb-1.5"),d(i,"class","flex p-1")},m(a,u){Y(t,a,u),S(a,e,u),Y(l,a,u),S(a,s,u),S(a,r,u),S(a,o,u),S(a,i,u),Y(c,i,null),f=!0},p(a,u){const _={};u&16384&&(_.$$scope={dirty:u,ctx:a}),t.$set(_);const g={};u&16384&&(g.$$scope={dirty:u,ctx:a}),l.$set(g);const m={};u&4&&(m.chatId=a[2].id),c.$set(m)},i(a){f||(H(t.$$.fragment,a),H(l.$$.fragment,a),H(c.$$.fragment,a),f=!0)},o(a){P(t.$$.fragment,a),P(l.$$.fragment,a),P(c.$$.fragment,a),f=!1},d(a){a&&(h(e),h(s),h(r),h(o),h(i)),J(t,a),J(l,a),J(c)}}}function os(n){let t,e,l,s,r="Share";return{c(){t=W("svg"),e=W("path"),l=N(),s=D("div"),s.textContent=r,this.h()},l(o){t=Z(o,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var i=y(t);e=Z(i,"path",{"fill-rule":!0,d:!0,"clip-rule":!0}),y(e).forEach(h),i.forEach(h),l=R(o),s=C(o,"DIV",{class:!0,"data-svelte-h":!0}),ht(s)!=="svelte-1hfcbd9"&&(s.textContent=r),this.h()},h(){d(e,"fill-rule","evenodd"),d(e,"d","M15.75 4.5a3 3 0 1 1 .825 2.066l-8.421 4.679a3.002 3.002 0 0 1 0 1.51l8.421 4.679a3 3 0 1 1-.729 1.31l-8.421-4.678a3 3 0 1 1 0-4.132l8.421-4.679a3 3 0 0 1-.096-.755Z"),d(e,"clip-rule","evenodd"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"viewBox","0 0 24 24"),d(t,"fill","currentColor"),d(t,"class","size-4"),d(s,"class","flex items-center")},m(o,i){S(o,t,i),b(t,e),S(o,l,i),S(o,s,i)},p:at,d(o){o&&(h(t),h(l),h(s))}}}function is(n){let t,e,l,s,r="Download";return{c(){t=W("svg"),e=W("path"),l=N(),s=D("div"),s.textContent=r,this.h()},l(o){t=Z(o,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var i=y(t);e=Z(i,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(e).forEach(h),i.forEach(h),l=R(o),s=C(o,"DIV",{class:!0,"data-svelte-h":!0}),ht(s)!=="svelte-q99o00"&&(s.textContent=r),this.h()},h(){d(e,"stroke-linecap","round"),d(e,"stroke-linejoin","round"),d(e,"d","M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"),d(t,"xmlns","http://www.w3.org/2000/svg"),d(t,"fill","none"),d(t,"viewBox","0 0 24 24"),d(t,"stroke-width","1.5"),d(t,"stroke","currentColor"),d(t,"class","size-4"),d(s,"class","flex items-center")},m(o,i){S(o,t,i),b(t,e),S(o,l,i),S(o,s,i)},p:at,d(o){o&&(h(t),h(l),h(s))}}}function as(n){let t,e="Plain text (.txt)";return{c(){t=D("div"),t.textContent=e,this.h()},l(l){t=C(l,"DIV",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-3izyoe"&&(t.textContent=e),this.h()},h(){d(t,"class","flex items-center line-clamp-1")},m(l,s){S(l,t,s)},p:at,d(l){l&&h(t)}}}function cs(n){let t,e="PDF document (.pdf)";return{c(){t=D("div"),t.textContent=e,this.h()},l(l){t=C(l,"DIV",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-qe7pyo"&&(t.textContent=e),this.h()},h(){d(t,"class","flex items-center line-clamp-1")},m(l,s){S(l,t,s)},p:at,d(l){l&&h(t)}}}function us(n){let t,e,l,s;return t=new he({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[as]},$$scope:{ctx:n}}}),t.$on("click",n[11]),l=new he({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[cs]},$$scope:{ctx:n}}}),l.$on("click",n[12]),{c(){X(t.$$.fragment),e=N(),X(l.$$.fragment)},l(r){K(t.$$.fragment,r),e=R(r),K(l.$$.fragment,r)},m(r,o){Y(t,r,o),S(r,e,o),Y(l,r,o),s=!0},p(r,o){const i={};o&16384&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const c={};o&16384&&(c.$$scope={dirty:o,ctx:r}),l.$set(c)},i(r){s||(H(t.$$.fragment,r),H(l.$$.fragment,r),s=!0)},o(r){P(t.$$.fragment,r),P(l.$$.fragment,r),s=!1},d(r){r&&h(e),J(t,r),J(l,r)}}}function fs(n){let t,e,l,s;return t=new mn({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[is]},$$scope:{ctx:n}}}),l=new on({props:{class:"w-full rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-900 dark:text-white shadow-lg",transition:fl,sideOffset:8,$$slots:{default:[us]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment),e=N(),X(l.$$.fragment)},l(r){K(t.$$.fragment,r),e=R(r),K(l.$$.fragment,r)},m(r,o){Y(t,r,o),S(r,e,o),Y(l,r,o),s=!0},p(r,o){const i={};o&16384&&(i.$$scope={dirty:o,ctx:r}),t.$set(i);const c={};o&16384&&(c.$$scope={dirty:o,ctx:r}),l.$set(c)},i(r){s||(H(t.$$.fragment,r),H(l.$$.fragment,r),s=!0)},o(r){P(t.$$.fragment,r),P(l.$$.fragment,r),s=!1},d(r){r&&h(e),J(t,r),J(l,r)}}}function ds(n){let t,e,l,s;t=new he({props:{class:"flex gap-2 items-center px-3 py-2 text-sm  cursor-pointer dark:hover:bg-gray-850 rounded-md",$$slots:{default:[rs]},$$scope:{ctx:n}}}),t.$on("click",n[9]);let r=n[0]&&nl(n);return{c(){X(t.$$.fragment),e=N(),r&&r.c(),l=bt()},l(o){K(t.$$.fragment,o),e=R(o),r&&r.l(o),l=bt()},m(o,i){Y(t,o,i),S(o,e,i),r&&r.m(o,i),S(o,l,i),s=!0},p(o,i){const c={};i&16384&&(c.$$scope={dirty:i,ctx:o}),t.$set(c),o[0]?r?(r.p(o,i),i&1&&H(r,1)):(r=nl(o),r.c(),H(r,1),r.m(l.parentNode,l)):r&&(Dt(),P(r,1,1,()=>{r=null}),Ct())},i(o){s||(H(t.$$.fragment,o),H(r),s=!0)},o(o){P(t.$$.fragment,o),P(r),s=!1},d(o){o&&(h(e),h(l)),J(t,o),r&&r.d(o)}}}function hs(n){let t,e,l;return e=new Pl({props:{class:"w-full max-w-[200px] rounded-lg px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-900 dark:text-white shadow-lg",sideOffset:8,side:"bottom",align:"end",transition:fl,$$slots:{default:[ds]},$$scope:{ctx:n}}}),{c(){t=D("div"),X(e.$$.fragment),this.h()},l(s){t=C(s,"DIV",{slot:!0});var r=y(t);K(e.$$.fragment,r),r.forEach(h),this.h()},h(){d(t,"slot","content")},m(s,r){S(s,t,r),Y(e,t,null),l=!0},p(s,r){const o={};r&16407&&(o.$$scope={dirty:r,ctx:s}),e.$set(o)},i(s){l||(H(e.$$.fragment,s),l=!0)},o(s){P(e.$$.fragment,s),l=!1},d(s){s&&h(t),J(e)}}}function ms(n){let t,e;return t=new Hl({props:{$$slots:{content:[hs],default:[ss]},$$scope:{ctx:n}}}),t.$on("change",n[13]),{c(){X(t.$$.fragment)},l(l){K(t.$$.fragment,l)},m(l,s){Y(t,l,s),e=!0},p(l,[s]){const r={};s&16407&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(H(t.$$.fragment,l),e=!0)},o(l){P(t.$$.fragment,l),e=!1},d(l){J(t,l)}}}function _s(n,t,e){let l;rt(n,de,M=>e(4,l=M));let{$$slots:s={},$$scope:r}=t;const{saveAs:o}=jl;let{shareEnabled:i=!1}=t,{shareHandler:c}=t,{downloadHandler:f}=t,{chat:a}=t,{onClose:u=()=>{}}=t;const _=async()=>{const M=a.chat;console.log("download",a);const E=M.messages.reduce((I,G,B,j)=>`${I}### ${G.role.toUpperCase()}
${G.content}

`,"");let T=new Blob([E],{type:"text/plain"});o(T,`chat-${M.title}.txt`)},g=async()=>{const M=a.chat;console.log("download",a);const E=await xl(M),T=window.URL.createObjectURL(E),I=document.createElement("a");I.href=T,I.download=`chat-${M.title}.pdf`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(T)},m=async()=>{await de.set(!l)},p=()=>{c()},k=()=>{_()},w=()=>{g()},V=M=>{M.detail===!1&&u()};return n.$$set=M=>{"shareEnabled"in M&&e(0,i=M.shareEnabled),"shareHandler"in M&&e(1,c=M.shareHandler),"downloadHandler"in M&&e(7,f=M.downloadHandler),"chat"in M&&e(2,a=M.chat),"onClose"in M&&e(3,u=M.onClose),"$$scope"in M&&e(14,r=M.$$scope)},[i,c,a,u,l,_,g,f,s,m,p,k,w,V,r]}class gs extends Mt{constructor(t){super(),Tt(this,t,_s,ms,It,{shareEnabled:0,shareHandler:1,downloadHandler:7,chat:2,onClose:3})}}function sl(n){let t,e,l;function s(o){n[12](o)}let r={};return n[0]!==void 0&&(r.selectedModels=n[0]),t=new ns({props:r}),ut.push(()=>Wt(t,"selectedModels",s)),{c(){X(t.$$.fragment)},l(o){K(t.$$.fragment,o)},m(o,i){Y(t,o,i),l=!0},p(o,i){const c={};!e&&i&1&&(e=!0,c.selectedModels=o[0],qt(()=>e=!1)),t.$set(c)},i(o){l||(H(t.$$.fragment,o),l=!0)},o(o){P(t.$$.fragment,o),l=!1},d(o){J(t,o)}}}function ps(n){let t,e;return t=new gs({props:{chat:n[3],shareEnabled:n[2],shareHandler:n[14],downloadHandler:n[15],$$slots:{default:[bs]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment)},l(l){K(t.$$.fragment,l)},m(l,s){Y(t,l,s),e=!0},p(l,s){const r={};s&8&&(r.chat=l[3]),s&4&&(r.shareEnabled=l[2]),s&32&&(r.shareHandler=l[14]),s&64&&(r.downloadHandler=l[15]),s&524288&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(H(t.$$.fragment,l),e=!0)},o(l){P(t.$$.fragment,l),e=!1},d(l){J(t,l)}}}function vs(n){let t,e;return t=new Gt({props:{content:"Settings",$$slots:{default:[ws]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment)},l(l){K(t.$$.fragment,l)},m(l,s){Y(t,l,s),e=!0},p(l,s){const r={};s&524800&&(r.$$scope={dirty:s,ctx:l}),t.$set(r)},i(l){e||(H(t.$$.fragment,l),e=!0)},o(l){P(t.$$.fragment,l),e=!1},d(l){J(t,l)}}}function bs(n){let t,e='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM18.75 12a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"></path></svg></div>';return{c(){t=D("button"),t.innerHTML=e,this.h()},l(l){t=C(l,"BUTTON",{class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-sw01s9"&&(t.innerHTML=e),this.h()},h(){d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition")},m(l,s){S(l,t,s)},p:at,d(l){l&&h(t)}}}function ws(n){let t,e='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path></svg>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=C(r,"BUTTON",{class:!0,id:!0,"data-svelte-h":!0}),ht(t)!=="svelte-18q4zlt"&&(t.innerHTML=e),this.h()},h(){d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition"),d(t,"id","open-settings-button")},m(r,o){S(r,t,o),l||(s=O(t,"click",n[13]),l=!0)},p:at,d(r){r&&h(t),l=!1,s()}}}function ks(n){let t,e='<div class="m-auto self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path d="M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"></path><path d="M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"></path></svg></div>',l,s;return{c(){t=D("button"),t.innerHTML=e,this.h()},l(r){t=C(r,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),ht(t)!=="svelte-1lsyhb0"&&(t.innerHTML=e),this.h()},h(){d(t,"id","new-chat-button"),d(t,"class","cursor-pointer p-1.5 flex dark:hover:bg-gray-700 rounded-full transition")},m(r,o){S(r,t,o),l||(s=O(t,"click",n[16]),l=!0)},p:at,d(r){r&&h(t),l=!1,s()}}}function ys(n){let t,e,l,s,r,o,i,c,f,a,u,_,g,m,p,k,w;function V(B){n[11](B)}let M={chatId:n[7]};n[5]!==void 0&&(M.show=n[5]),t=new Ol({props:M}),ut.push(()=>Wt(t,"show",V));let E=n[4]&&sl(n);const T=[vs,ps],I=[];function G(B,j){return B[2]?1:0}return _=G(n),g=I[_]=T[_](n),p=new Gt({props:{content:"New Chat",$$slots:{default:[ks]},$$scope:{ctx:n}}}),{c(){X(t.$$.fragment),l=N(),s=D("nav"),r=D("div"),o=D("div"),i=D("div"),E&&E.c(),c=N(),f=D("div"),a=D("div"),u=N(),g.c(),m=N(),X(p.$$.fragment),this.h()},l(B){K(t.$$.fragment,B),l=R(B),s=C(B,"NAV",{id:!0,class:!0});var j=y(s);r=C(j,"DIV",{class:!0});var Q=y(r);o=C(Q,"DIV",{class:!0});var $=y(o);i=C($,"DIV",{class:!0});var ct=y(i);E&&E.l(ct),ct.forEach(h),c=R($),f=C($,"DIV",{class:!0});var q=y(f);a=C(q,"DIV",{class:!0}),y(a).forEach(h),u=R(q),g.l(q),m=R(q),K(p.$$.fragment,q),q.forEach(h),$.forEach(h),Q.forEach(h),j.forEach(h),this.h()},h(){var B;d(i,"class","flex-1 overflow-hidden max-w-full"),d(a,"class","flex self-center w-[1px] h-5 mx-2 bg-gray-300 dark:bg-stone-700"),d(f,"class","self-start flex flex-none items-center"),d(o,"class","flex items-center w-full max-w-full"),d(r,"class",k="flex "+(((B=n[8])==null?void 0:B.fullScreenMode)??null?"max-w-full":"max-w-3xl")+" w-full mx-auto px-3"),d(s,"id","nav"),d(s,"class","sticky py-2.5 top-0 flex flex-row justify-center z-30")},m(B,j){Y(t,B,j),S(B,l,j),S(B,s,j),b(s,r),b(r,o),b(o,i),E&&E.m(i,null),b(o,c),b(o,f),b(f,a),b(f,u),I[_].m(f,null),b(f,m),Y(p,f,null),w=!0},p(B,[j]){var q;const Q={};j&128&&(Q.chatId=B[7]),!e&&j&32&&(e=!0,Q.show=B[5],qt(()=>e=!1)),t.$set(Q),B[4]?E?(E.p(B,j),j&16&&H(E,1)):(E=sl(B),E.c(),H(E,1),E.m(i,null)):E&&(Dt(),P(E,1,1,()=>{E=null}),Ct());let $=_;_=G(B),_===$?I[_].p(B,j):(Dt(),P(I[$],1,1,()=>{I[$]=null}),Ct(),g=I[_],g?g.p(B,j):(g=I[_]=T[_](B),g.c()),H(g,1),g.m(f,m));const ct={};j&524290&&(ct.$$scope={dirty:j,ctx:B}),p.$set(ct),(!w||j&256&&k!==(k="flex "+(((q=B[8])==null?void 0:q.fullScreenMode)??null?"max-w-full":"max-w-3xl")+" w-full mx-auto px-3"))&&d(r,"class",k)},i(B){w||(H(t.$$.fragment,B),H(E),H(g),H(p.$$.fragment,B),w=!0)},o(B){P(t.$$.fragment,B),P(E),P(g),P(p.$$.fragment,B),w=!1},d(B){B&&(h(l),h(s)),J(t,B),E&&E.d(),I[_].d(),J(p)}}}function Es(n,t,e){let l,s,r,o;rt(n,wl,T=>e(17,l=T)),rt(n,kl,T=>e(7,s=T)),rt(n,fe,T=>e(8,r=T)),rt(n,de,T=>e(9,o=T)),Jt("i18n");let{initNewChat:i}=t,{title:c=l}=t,{shareEnabled:f=!1}=t,{chat:a}=t,{selectedModels:u}=t,{showModelSelector:_=!0}=t,g=!1,m=!1;function p(T){g=T,e(5,g)}function k(T){u=T,e(0,u)}const w=async()=>{await de.set(!o)},V=()=>{e(5,g=!g)},M=()=>{e(6,m=!m)},E=()=>{i()};return n.$$set=T=>{"initNewChat"in T&&e(1,i=T.initNewChat),"title"in T&&e(10,c=T.title),"shareEnabled"in T&&e(2,f=T.shareEnabled),"chat"in T&&e(3,a=T.chat),"selectedModels"in T&&e(0,u=T.selectedModels),"showModelSelector"in T&&e(4,_=T.showModelSelector)},[u,i,f,a,_,g,m,s,r,o,c,p,k,w,V,M,E]}class Ws extends Mt{constructor(t){super(),Tt(this,t,Es,ys,It,{initNewChat:1,title:10,shareEnabled:2,chat:3,selectedModels:0,showModelSelector:4})}}export{qs as M,Ws as N};
